"use strict";(self.webpackChunkcampuslife=self.webpackChunkcampuslife||[]).push([[584],{3584:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var t=a(9379),l=a(5043),r=a(3515),i=a(579);const d=[{id:"books",label:"Book Searches"},{id:"categories",label:"Category Searches"},{id:"authors",label:"Author Searches"},{id:"past_papers",label:"Past Paper Searches"}],c=[{id:"7",label:"Last 7 days"},{id:"30",label:"Last 30 days"},{id:"90",label:"Last 90 days"}],n=()=>{const[e,s]=(0,l.useState)("30"),[a,n]=(0,l.useState)(!1),[h,o]=(0,l.useState)({books:[],categories:[],authors:[],past_papers:[]});return(0,l.useEffect)(()=>{let s=!1;return(async()=>{n(!0);try{const a=await Promise.all(d.map(async s=>{const a=await(0,r.UV)(s.id,{days:Number(e)||30,limit:20});return[s.id,a||[]]}));if(!s){const e={};a.forEach(s=>{let[a,t]=s;e[a]=t}),o(s=>(0,t.A)((0,t.A)({},s),e))}}finally{s||n(!1)}})(),()=>{s=!0}},[e]),(0,i.jsxs)("div",{className:"panel",children:[(0,i.jsxs)("div",{className:"panel-title",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsx)("span",{children:"Search Overview"}),(0,i.jsx)("div",{style:{display:"flex",gap:4},children:c.map(a=>(0,i.jsx)("button",{className:e===a.id?"btn":"btn btn-secondary",onClick:()=>s(a.id),children:a.label},a.id))})]}),a&&(0,i.jsx)("div",{style:{color:"#8696a0",padding:8,fontSize:12},children:"Loading search analytics..."}),(0,i.jsx)("div",{className:"grid-2",style:{marginTop:8},children:d.map(e=>{const s=h[e.id]||[];return(0,i.jsxs)("div",{className:"panel",style:{background:"#111b21"},children:[(0,i.jsx)("div",{className:"panel-title",children:e.label}),0===s.length?(0,i.jsx)("div",{style:{color:"#8696a0",padding:6,fontSize:11},children:"No search data yet for this period."}):(0,i.jsxs)("table",{className:"table overview-table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Query"}),(0,i.jsx)("th",{children:"Searches"}),(0,i.jsx)("th",{children:"Avg Results"}),(0,i.jsx)("th",{children:"Last Searched"})]})}),(0,i.jsx)("tbody",{children:s.map((e,s)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.query_text}),(0,i.jsx)("td",{children:e.search_count}),(0,i.jsx)("td",{children:null!=e.avg_results?Math.round(e.avg_results):"\u2014"}),(0,i.jsx)("td",{children:e.last_searched?new Date(e.last_searched).toLocaleString():"\u2014"})]},s))})]})]},e.id)})})]})}}}]);
//# sourceMappingURL=584.bd57753a.chunk.js.map