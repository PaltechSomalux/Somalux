"use strict";(self.webpackChunkcampuslife=self.webpackChunkcampuslife||[]).push([[497],{7497:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var d=r(9379),s=r(5043),a=r(4218),i=r(7488),l=r(95),o=r(379),n=r(1180),c=r(7734),h=r(8676),x=r(6125),u=r(2185),j=r(6026),g=r(5748),m=r(2291),v=r(579);const _=[{id:"overview",label:"Overview"},{id:"views",label:"Books Read / Viewed"},{id:"downloads",label:"Downloads"},{id:"likes",label:"Liked Books"},{id:"comments",label:"Comments"},{id:"uploads",label:"Uploads"},{id:"sessions",label:"Reading Sessions"},{id:"goals",label:"Goals & Progress"},{id:"achievements",label:"Achievements"},{id:"authors",label:"Author Engagement"},{id:"search_overview",label:"Search Overview"}],b=["#00a884","#34B7F1","#FFCC00","#f15e6c","#8b5cf6","#22d3ee"],p=()=>{const{id:e}=(0,a.g)(),t=(0,a.Zp)(),r=(0,a.zy)(),[p,y]=(0,s.useState)(!0),[f,k]=(0,s.useState)(null),[w,S]=(0,s.useState)([]),[N,D]=(0,s.useState)([]),[A,B]=(0,s.useState)([]),[L,z]=(0,s.useState)([]),[T,R]=(0,s.useState)([]),[W,C]=(0,s.useState)([]),[F,U]=(0,s.useState)([]),[q,M]=(0,s.useState)([]),[E,V]=(0,s.useState)(null),[P,I]=(0,s.useState)(null),[K,O]=(0,s.useState)([]),[G,J]=(0,s.useState)([]),[Y,Z]=(0,s.useState)([]),[H,Q]=(0,s.useState)([]),[X,$]=(0,s.useState)([]),[ee,te]=(0,s.useState)(()=>{const e=new URLSearchParams(r.search).get("tab");return e&&_.some(t=>t.id===e)?e:"overview"});(0,s.useEffect)(()=>{e&&"search_overview"===ee&&t("/books/admin/users/".concat(e,"/search"))},[ee,e,t]),(0,s.useEffect)(()=>{const e=new URLSearchParams(r.search).get("tab");e&&_.some(t=>t.id===e)&&e!==ee&&te(e)},[r.search]),(0,s.useEffect)(()=>{if(!e)return;(async()=>{y(!0);try{const[t,r,s,a,l,o,n,c,h,x,u,j,g,m,v,_]=await Promise.all([i.N.from("profiles").select("id, email, display_name, role, created_at, avatar_url, subscription_tier").eq("id",e).maybeSingle(),i.N.from("book_views").select("id, book_id, viewed_at").eq("user_id",e).order("viewed_at",{ascending:!1}),i.N.from("book_downloads").select("id, book_id, downloaded_at").eq("user_id",e).order("downloaded_at",{ascending:!1}),i.N.from("book_likes").select("id, book_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}),i.N.from("book_comments").select("id, book_id, text, created_at").eq("user_id",e).order("created_at",{ascending:!1}),i.N.from("subscriptions").select("id, product, plan_id, price_kes, status, start_at, end_date, created_at").eq("user_id",e).order("start_at",{ascending:!1}),i.N.from("books").select("id, title, author, created_at, views_count, downloads_count, year, language, publisher").eq("uploaded_by",e).order("created_at",{ascending:!1}),i.N.from("reading_sessions").select("id, book_id, pages_read, progress_percent, started_at, ended_at").eq("user_id",e).order("started_at",{ascending:!1}),i.N.from("reading_goals").select("id, goal_type, target_books, current_progress, year, month, is_active, created_at, updated_at").eq("user_id",e).order("created_at",{ascending:!1}),i.N.from("user_reading_stats").select("total_books_completed, total_books_started, genres_explored, total_pages_read, avg_pages_per_book, updated_at").eq("user_id",e).maybeSingle(),i.N.from("reading_streaks").select("current_streak, longest_streak, updated_at").eq("user_id",e).maybeSingle(),i.N.from("user_achievements").select("id, achievement_code, earned_at, metadata, achievements(title, code, tier)").eq("user_id",e).order("earned_at",{ascending:!1}),i.N.from("author_likes").select("id, author_name, created_at").eq("user_id",e).order("created_at",{ascending:!1}),i.N.from("author_follows").select("id, author_name, created_at").eq("follower_id",e).order("created_at",{ascending:!1}),i.N.from("author_ratings").select("id, author_name, rating, created_at, updated_at").eq("user_id",e).order("created_at",{ascending:!1}),i.N.from("author_stats").select("author_name, books_count, average_rating, rating_count, likes_count, loves_count, followers_count, updated_at")]);if(t.error)throw t.error;k(t.data||null);const b=r.error?[]:r.data||[],p=s.error?[]:s.data||[],y=a.error?[]:a.data||[],f=l.error?[]:l.data||[],w=o.error?[]:o.data||[],N=n.error?[]:n.data||[],A=c.error?[]:c.data||[],L=h.error?[]:h.data||[],T=x.error?null:x.data||null,W=u.error?null:u.data||null,F=j.error?[]:j.data||[],q=g.error?[]:g.data||[],E=m.error?[]:m.data||[],P=v.error?[]:v.data||[],K=_.error?[]:_.data||[],G=Array.from(new Set([...b.map(e=>e.book_id).filter(Boolean),...p.map(e=>e.book_id).filter(Boolean),...A.map(e=>e.book_id).filter(Boolean),...y.map(e=>e.book_id).filter(Boolean),...f.map(e=>e.book_id).filter(Boolean)]));let Y=new Map;if(G.length>0){const{data:e}=await i.N.from("books").select("id, title, author, cover_url").in("id",G);e&&(Y=new Map(e.map(e=>[e.id,e])))}const H=e=>{const t=Y.get(e.book_id)||null;return(0,d.A)((0,d.A)({},e),{},{book:t})};S(b.map(H)),D(p.map(H)),U(A.map(H)),B(y.map(H)),z(f.map(H)),R(w||[]),C(N||[]),M(L||[]),V(T),I(W),O(F||[]),J(q||[]),Z(E||[]),Q(P||[]),$(K||[])}catch(t){console.error("Failed to load user details",t)}finally{y(!1)}})()},[e]);const re=(0,s.useMemo)(()=>{const e=new Map;return w.forEach(t=>{if(!t.book_id)return;const r=e.get(t.book_id)||{book:t.book||null,count:0,lastViewed:null};r.count+=1;(t.viewed_at?new Date(t.viewed_at).getTime():0)>(r.lastViewed?new Date(r.lastViewed).getTime():0)&&(r.lastViewed=t.viewed_at),e.set(t.book_id,r)}),Array.from(e.values())},[w]),de=L.length,se=A.length,ae=w.length,ie=N.length,le=W.length,oe=ae+se+de+ie+le,ne=(0,s.useMemo)(()=>[{name:"Views",value:ae},{name:"Likes",value:se},{name:"Comments",value:de},{name:"Downloads",value:ie},{name:"Uploads",value:le}].filter(e=>e.value>0),[ae,se,de,ie,le]),ce=(0,s.useMemo)(()=>{const e=new Map,t=(t,r)=>{if(!t)return;const d=new Date(t);if(Number.isNaN(d.getTime()))return;const s=d.toISOString().slice(0,10),a=e.get(s)||{day:s,views:0,downloads:0};a[r]+=1,e.set(s,a)};return w.forEach(e=>t(e.viewed_at,"views")),N.forEach(e=>t(e.downloaded_at,"downloads")),Array.from(e.values()).sort((e,t)=>e.day<t.day?-1:1)},[w,N]),he=(0,s.useMemo)(()=>{const e=new Map;return N.forEach(t=>{if(!t.book_id)return;const r=e.get(t.book_id)||{book:t.book||null,count:0,lastDownloaded:null};r.count+=1;(t.downloaded_at?new Date(t.downloaded_at).getTime():0)>(r.lastDownloaded?new Date(r.lastDownloaded).getTime():0)&&(r.lastDownloaded=t.downloaded_at),e.set(t.book_id,r)}),Array.from(e.values())},[N]),xe=(0,s.useMemo)(()=>T&&0!==T.length?T[0]:null,[T]);return(0,v.jsxs)("div",{className:"panel",children:[(0,v.jsxs)("div",{className:"panel-title",style:{display:"flex",alignItems:"center",gap:8,fontSize:12},children:[(0,v.jsx)("button",{className:"btn",onClick:()=>t(-1),children:"Back"}),(0,v.jsx)("span",{children:"User Details"})]}),p?(0,v.jsx)("div",{style:{color:"#8696a0",padding:12},children:"Loading user details..."}):f?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{style:{display:"flex",gap:8,marginBottom:12,flexWrap:"wrap",alignItems:"center"},children:(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,v.jsx)("div",{className:"viewer-avatar",style:{width:48,height:48,fontSize:20},children:f.avatar_url?(0,v.jsx)("img",{src:f.avatar_url,alt:f.display_name||f.email||"User avatar",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):(f.display_name||f.email||"?").charAt(0).toUpperCase()}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{style:{fontSize:16,fontWeight:600},children:f.display_name||"\u2014"}),(0,v.jsx)("div",{style:{color:"#8696a0",fontSize:13},children:f.email}),(0,v.jsxs)("div",{style:{color:"#8696a0",fontSize:12},children:["Role: ",(0,v.jsx)("strong",{children:f.role||"viewer"}),f.created_at&&(0,v.jsxs)(v.Fragment,{children:[" ","\xb7 Joined ",new Date(f.created_at).toLocaleDateString()]})]})]})]})}),(0,v.jsx)("div",{style:{display:"flex",gap:8,marginBottom:12,flexWrap:"wrap"},children:_.map(e=>(0,v.jsx)("button",{className:"btn",style:{padding:"6px 14px",fontSize:12,background:ee===e.id?"#202c33":"transparent",borderColor:ee===e.id?"#23a76d":"rgba(134,150,160,0.3)"},onClick:()=>te(e.id),children:e.label},e.id))}),(()=>{if("overview"===ee)return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[{label:"Books Viewed",value:ae,color:"#00a884",bg:"rgba(0,168,132,0.1)"},{label:"Books Liked",value:se,color:"#34B7F1",bg:"rgba(52,183,241,0.1)"},{label:"Comments",value:de,color:"#FFCC00",bg:"rgba(255,204,0,0.1)"},{label:"Downloads",value:ie,color:"#8b5cf6",bg:"rgba(139,92,246,0.1)"},{label:"Uploads",value:le,color:"#f15e6c",bg:"rgba(241,94,108,0.1)"}].map((e,t)=>{const r=(d=e.value,oe?Math.round(d/oe*100):0);var d;return(0,v.jsxs)("div",{style:{padding:8,borderRadius:12,background:"#111b21",minWidth:200,boxShadow:"0 1px 3px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",gap:4},children:[(0,v.jsx)("div",{style:{color:"#8696a0",fontSize:12},children:e.label}),(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:4},children:[(0,v.jsx)("div",{style:{fontSize:22,fontWeight:600},children:e.value}),(0,v.jsx)("div",{style:{fontSize:11,padding:"2px 8px",borderRadius:999,background:e.bg,color:e.color},children:oe?"".concat(r,"% of activity"):"\u2014"})]})]},t)})}),(0,v.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[(0,v.jsxs)("div",{style:{flex:1,minWidth:320,padding:8,borderRadius:12,background:"#111b21"},children:[(0,v.jsx)("div",{style:{color:"#e9edef",fontSize:12,marginBottom:6},children:"Activity Over Time"}),(0,v.jsx)("div",{style:{width:"100%",height:260},children:0===ce.length?(0,v.jsx)("div",{style:{color:"#8696a0",textAlign:"center",paddingTop:40},children:"No activity yet for this user."}):(0,v.jsx)(n.u,{width:"100%",height:"100%",children:(0,v.jsxs)(g.b,{data:ce,margin:{top:10,right:16,left:-16,bottom:0},children:[(0,v.jsx)(c.d,{strokeDasharray:"3 3",stroke:"#202c33"}),(0,v.jsx)(u.W,{dataKey:"day",stroke:"#8696a0",tick:{fontSize:11},tickMargin:8}),(0,v.jsx)(j.h,{stroke:"#8696a0",tick:{fontSize:11}}),(0,v.jsx)(o.m,{contentStyle:{backgroundColor:"#1f2c33",border:"1px solid #2a3942",borderRadius:8,color:"#e9edef"},labelStyle:{color:"#cfd8dc"}}),(0,v.jsx)(l.s,{}),(0,v.jsx)(h.N1,{type:"monotone",dataKey:"views",name:"Views",stroke:"#00a884",strokeWidth:2,dot:!1}),(0,v.jsx)(h.N1,{type:"monotone",dataKey:"downloads",name:"Downloads",stroke:"#34B7F1",strokeWidth:2,dot:!1})]})})})]}),(0,v.jsxs)("div",{style:{flex:1,minWidth:280,padding:8,borderRadius:12,background:"#111b21"},children:[(0,v.jsx)("div",{style:{color:"#e9edef",fontSize:12,marginBottom:6},children:"Engagement Breakdown"}),(0,v.jsx)("div",{style:{width:"100%",height:260},children:0===ne.length?(0,v.jsx)("div",{style:{color:"#8696a0",textAlign:"center",paddingTop:40},children:"No engagement yet for this user."}):(0,v.jsx)(n.u,{width:"100%",height:"100%",children:(0,v.jsxs)(m.E,{data:ne,layout:"vertical",margin:{top:10,right:24,left:40,bottom:0},children:[(0,v.jsx)(c.d,{strokeDasharray:"3 3",stroke:"#202c33"}),(0,v.jsx)(u.W,{type:"number",stroke:"#8696a0"}),(0,v.jsx)(j.h,{dataKey:"name",type:"category",stroke:"#8696a0",tick:{fontSize:12}}),(0,v.jsx)(o.m,{contentStyle:{backgroundColor:"#1f2c33",border:"1px solid #2a3942",borderRadius:8,color:"#e9edef"},labelStyle:{color:"#cfd8dc"}}),(0,v.jsx)(l.s,{}),(0,v.jsx)(x.yP,{dataKey:"value",name:"Events",radius:[4,4,4,4],children:ne.map((e,t)=>(0,v.jsx)(x.yP,{dataKey:"value",fill:b[t%b.length]},"bar-".concat(t)))})]})})})]})]}),xe&&(0,v.jsxs)("div",{style:{marginTop:6,padding:8,borderRadius:12,background:"#111b21",display:"flex",flexDirection:"column",gap:4,maxWidth:420},children:[(0,v.jsx)("div",{style:{fontSize:13,color:"#8696a0"},children:"Latest Subscription"}),(0,v.jsxs)("div",{style:{fontSize:13},children:[(0,v.jsx)("strong",{children:xe.product})," \xb7 Plan ",xe.plan_id," \xb7 Ksh"," ",xe.price_kes]}),(0,v.jsxs)("div",{style:{fontSize:12,color:"#8696a0"},children:["Status:"," ",(0,v.jsx)("span",{style:{fontWeight:600},children:xe.status}),xe.start_at&&(0,v.jsxs)(v.Fragment,{children:[" ","\xb7 From ",new Date(xe.start_at).toLocaleDateString()," to"," ",xe.end_date?new Date(xe.end_date).toLocaleDateString():"\u2014"]})]})]}),(E||P)&&(0,v.jsxs)("div",{style:{marginTop:12,padding:8,borderRadius:12,background:"#111b21",display:"flex",flexWrap:"wrap",gap:8},children:[E&&(0,v.jsxs)("div",{style:{minWidth:220},children:[(0,v.jsx)("div",{style:{color:"#8696a0",fontSize:12},children:"Reading Stats"}),(0,v.jsxs)("div",{style:{fontSize:12,marginTop:4},children:[(0,v.jsxs)("div",{children:["Total books completed: ",(0,v.jsx)("strong",{children:E.total_books_completed})]}),(0,v.jsxs)("div",{children:["Total pages read: ",(0,v.jsx)("strong",{children:E.total_pages_read})]}),(0,v.jsxs)("div",{children:["Avg pages/book: ",(0,v.jsx)("strong",{children:E.avg_pages_per_book})]})]})]}),P&&(0,v.jsxs)("div",{style:{minWidth:220},children:[(0,v.jsx)("div",{style:{color:"#8696a0",fontSize:12},children:"Reading Streak"}),(0,v.jsxs)("div",{style:{fontSize:12,marginTop:4},children:[(0,v.jsxs)("div",{children:["Current streak: ",(0,v.jsx)("strong",{children:P.current_streak})," days"]}),(0,v.jsxs)("div",{children:["Longest streak: ",(0,v.jsx)("strong",{children:P.longest_streak})," days"]})]})]})]})]});if("uploads"===ee)return(0,v.jsx)("div",{children:0===W.length?(0,v.jsx)("div",{style:{color:"#8696a0"},children:"No uploads recorded for this user."}):(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Title"}),(0,v.jsx)("th",{children:"Author"}),(0,v.jsx)("th",{children:"Year"}),(0,v.jsx)("th",{children:"Language"}),(0,v.jsx)("th",{children:"Views"}),(0,v.jsx)("th",{children:"Downloads"}),(0,v.jsx)("th",{children:"Uploaded At"})]})}),(0,v.jsx)("tbody",{children:W.map(e=>{var t,r;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.title}),(0,v.jsx)("td",{children:e.author||"\u2014"}),(0,v.jsx)("td",{children:e.year||"\u2014"}),(0,v.jsx)("td",{children:e.language||"\u2014"}),(0,v.jsx)("td",{children:null!==(t=e.views)&&void 0!==t?t:0}),(0,v.jsx)("td",{children:null!==(r=e.downloads)&&void 0!==r?r:0}),(0,v.jsx)("td",{children:e.created_at?new Date(e.created_at).toLocaleString():"\u2014"})]},e.id)})})]})});if("views"===ee)return(0,v.jsx)("div",{children:0===re.length?(0,v.jsx)("div",{style:{color:"#8696a0"},children:"No reading activity recorded for this user."}):(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Book"}),(0,v.jsx)("th",{children:"Author"}),(0,v.jsx)("th",{children:"Times Viewed"}),(0,v.jsx)("th",{children:"Last Viewed"})]})}),(0,v.jsx)("tbody",{children:re.map((e,t)=>{var r,d;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(null===(r=e.book)||void 0===r?void 0:r.title)||"Unknown"}),(0,v.jsx)("td",{children:(null===(d=e.book)||void 0===d?void 0:d.author)||"\u2014"}),(0,v.jsx)("td",{children:e.count}),(0,v.jsx)("td",{children:e.lastViewed?new Date(e.lastViewed).toLocaleString():"\u2014"})]},t)})})]})});if("downloads"===ee)return(0,v.jsx)("div",{children:0===he.length?(0,v.jsx)("div",{style:{color:"#8696a0"},children:"No downloads recorded for this user."}):(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Book"}),(0,v.jsx)("th",{children:"Author"}),(0,v.jsx)("th",{children:"Times Downloaded"}),(0,v.jsx)("th",{children:"Last Downloaded"})]})}),(0,v.jsx)("tbody",{children:he.map((e,t)=>{var r,d;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(null===(r=e.book)||void 0===r?void 0:r.title)||"Unknown"}),(0,v.jsx)("td",{children:(null===(d=e.book)||void 0===d?void 0:d.author)||"\u2014"}),(0,v.jsx)("td",{children:e.count}),(0,v.jsx)("td",{children:e.lastDownloaded?new Date(e.lastDownloaded).toLocaleString():"\u2014"})]},t)})})]})});if("likes"===ee)return(0,v.jsx)("div",{children:0===A.length?(0,v.jsx)("div",{style:{color:"#8696a0"},children:"No liked books for this user."}):(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Book"}),(0,v.jsx)("th",{children:"Author"}),(0,v.jsx)("th",{children:"Liked At"})]})}),(0,v.jsx)("tbody",{children:A.map(e=>{var t,r;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(null===(t=e.book)||void 0===t?void 0:t.title)||"Unknown"}),(0,v.jsx)("td",{children:(null===(r=e.book)||void 0===r?void 0:r.author)||"\u2014"}),(0,v.jsx)("td",{children:e.created_at?new Date(e.created_at).toLocaleString():"\u2014"})]},e.id)})})]})});if("comments"===ee)return(0,v.jsx)("div",{children:0===L.length?(0,v.jsx)("div",{style:{color:"#8696a0"},children:"No comments from this user."}):(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Book"}),(0,v.jsx)("th",{children:"Comment"}),(0,v.jsx)("th",{children:"Created At"})]})}),(0,v.jsx)("tbody",{children:L.map(e=>{var t;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(null===(t=e.book)||void 0===t?void 0:t.title)||"Unknown"}),(0,v.jsx)("td",{children:e.text&&e.text.length>120?"".concat(e.text.slice(0,120),"\u2026"):e.text||"\u2014"}),(0,v.jsx)("td",{children:e.created_at?new Date(e.created_at).toLocaleString():"\u2014"})]},e.id)})})]})});if("sessions"===ee)return(0,v.jsx)("div",{children:0===F.length?(0,v.jsx)("div",{style:{color:"#8696a0"},children:"No reading sessions recorded for this user."}):(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Book"}),(0,v.jsx)("th",{children:"Pages Read"}),(0,v.jsx)("th",{children:"Progress %"}),(0,v.jsx)("th",{children:"Started"}),(0,v.jsx)("th",{children:"Ended"})]})}),(0,v.jsx)("tbody",{children:F.map(e=>{var t;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(null===(t=e.book)||void 0===t?void 0:t.title)||"Unknown"}),(0,v.jsx)("td",{children:e.pages_read}),(0,v.jsx)("td",{children:e.progress_percent}),(0,v.jsx)("td",{children:e.started_at?new Date(e.started_at).toLocaleString():"\u2014"}),(0,v.jsx)("td",{children:e.ended_at?new Date(e.ended_at).toLocaleString():"In progress"})]},e.id)})})]})});if("goals"===ee)return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[E&&(0,v.jsxs)("div",{style:{padding:8,borderRadius:12,background:"#111b21",minWidth:220},children:[(0,v.jsx)("div",{style:{color:"#8696a0",fontSize:12},children:"Lifetime Reading Stats"}),(0,v.jsxs)("div",{style:{fontSize:12,marginTop:4},children:[(0,v.jsxs)("div",{children:["Total books completed: ",(0,v.jsx)("strong",{children:E.total_books_completed})]}),(0,v.jsxs)("div",{children:["Total books started: ",(0,v.jsx)("strong",{children:E.total_books_started})]}),(0,v.jsxs)("div",{children:["Total pages read: ",(0,v.jsx)("strong",{children:E.total_pages_read})]}),(0,v.jsxs)("div",{children:["Avg pages per book: ",(0,v.jsx)("strong",{children:E.avg_pages_per_book})]})]})]}),P&&(0,v.jsxs)("div",{style:{padding:8,borderRadius:12,background:"#111b21",minWidth:220},children:[(0,v.jsx)("div",{style:{color:"#8696a0",fontSize:12},children:"Reading Streak"}),(0,v.jsxs)("div",{style:{fontSize:12,marginTop:4},children:[(0,v.jsxs)("div",{children:["Current streak: ",(0,v.jsx)("strong",{children:P.current_streak})," days"]}),(0,v.jsxs)("div",{children:["Longest streak: ",(0,v.jsx)("strong",{children:P.longest_streak})," days"]})]})]})]}),0===q.length?(0,v.jsx)("div",{style:{color:"#8696a0"},children:"No reading goals defined for this user."}):(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Type"}),(0,v.jsx)("th",{children:"Target Books"}),(0,v.jsx)("th",{children:"Progress"}),(0,v.jsx)("th",{children:"Period"}),(0,v.jsx)("th",{children:"Status"}),(0,v.jsx)("th",{children:"Updated"})]})}),(0,v.jsx)("tbody",{children:q.map(e=>{const t=e.target_books>0?Math.round(e.current_progress/e.target_books*100):0,r="yearly"===e.goal_type?e.year||"\u2014":"monthly"===e.goal_type?"".concat(e.month||"\u2014","/").concat(e.year||"\u2014"):"Custom";return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.goal_type}),(0,v.jsx)("td",{children:e.target_books}),(0,v.jsxs)("td",{children:[e.current_progress," (",t,"% )"]}),(0,v.jsx)("td",{children:r}),(0,v.jsx)("td",{children:e.is_active?"Active":"Inactive"}),(0,v.jsx)("td",{children:e.updated_at?new Date(e.updated_at).toLocaleString():"\u2014"})]},e.id)})})]})]});if("achievements"===ee)return(0,v.jsx)("div",{children:0===K.length?(0,v.jsx)("div",{style:{color:"#8696a0"},children:"No achievements recorded for this user."}):(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Title"}),(0,v.jsx)("th",{children:"Code"}),(0,v.jsx)("th",{children:"Tier"}),(0,v.jsx)("th",{children:"Awarded"}),(0,v.jsx)("th",{children:"Earned"})]})}),(0,v.jsx)("tbody",{children:K.map(e=>{var t,r,d;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(null===(t=e.achievements)||void 0===t?void 0:t.title)||"Achievement"}),(0,v.jsx)("td",{children:(null===(r=e.achievements)||void 0===r?void 0:r.code)||"\u2014"}),(0,v.jsx)("td",{children:(null===(d=e.achievements)||void 0===d?void 0:d.tier)||"\u2014"}),(0,v.jsx)("td",{children:e.awarded_at?new Date(e.awarded_at).toLocaleString():"\u2014"}),(0,v.jsx)("td",{children:e.earned_at?new Date(e.earned_at).toLocaleString():"\u2014"})]},e.id)})})]})});if("authors"===ee){const e=new Map((X||[]).map(e=>[e.author_name,e]));return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[(0,v.jsxs)("div",{style:{padding:8,borderRadius:12,background:"#111b21",minWidth:180},children:[(0,v.jsx)("div",{style:{color:"#8696a0",fontSize:12},children:"Authors Liked"}),(0,v.jsx)("div",{style:{fontSize:22,fontWeight:600},children:G.length})]}),(0,v.jsxs)("div",{style:{padding:8,borderRadius:12,background:"#111b21",minWidth:180},children:[(0,v.jsx)("div",{style:{color:"#8696a0",fontSize:12},children:"Authors Followed"}),(0,v.jsx)("div",{style:{fontSize:22,fontWeight:600},children:Y.length})]}),(0,v.jsxs)("div",{style:{padding:8,borderRadius:12,background:"#111b21",minWidth:180},children:[(0,v.jsx)("div",{style:{color:"#8696a0",fontSize:12},children:"Authors Rated"}),(0,v.jsx)("div",{style:{fontSize:22,fontWeight:600},children:H.length})]})]}),(0,v.jsx)("h4",{style:{color:"#e9edef",marginBottom:8},children:"Author Ratings"}),0===H.length?(0,v.jsx)("div",{style:{color:"#8696a0",marginBottom:12},children:"No author ratings from this user."}):(0,v.jsxs)("table",{className:"table",style:{marginBottom:12},children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Author"}),(0,v.jsx)("th",{children:"Rating"}),(0,v.jsx)("th",{children:"Given At"}),(0,v.jsx)("th",{children:"Author Avg Rating"}),(0,v.jsx)("th",{children:"Author Rating Count"})]})}),(0,v.jsx)("tbody",{children:H.map(t=>{var r,d;const s=e.get(t.author_name);return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:t.author_name}),(0,v.jsx)("td",{children:t.rating}),(0,v.jsx)("td",{children:t.created_at?new Date(t.created_at).toLocaleString():"\u2014"}),(0,v.jsx)("td",{children:null!==(r=null===s||void 0===s?void 0:s.average_rating)&&void 0!==r?r:"\u2014"}),(0,v.jsx)("td",{children:null!==(d=null===s||void 0===s?void 0:s.rating_count)&&void 0!==d?d:"\u2014"})]},t.id)})})]}),(0,v.jsx)("h4",{style:{color:"#e9edef",marginBottom:8},children:"Authors Followed"}),0===Y.length?(0,v.jsx)("div",{style:{color:"#8696a0",marginBottom:12},children:"No authors followed by this user."}):(0,v.jsxs)("table",{className:"table",style:{marginBottom:12},children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Author"}),(0,v.jsx)("th",{children:"Followed At"}),(0,v.jsx)("th",{children:"Total Followers"})]})}),(0,v.jsx)("tbody",{children:Y.map(t=>{var r;const d=e.get(t.author_name);return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:t.author_name}),(0,v.jsx)("td",{children:t.created_at?new Date(t.created_at).toLocaleString():"\u2014"}),(0,v.jsx)("td",{children:null!==(r=null===d||void 0===d?void 0:d.followers_count)&&void 0!==r?r:"\u2014"})]},t.id)})})]}),(0,v.jsx)("h4",{style:{color:"#e9edef",marginBottom:8},children:"Authors Liked"}),0===G.length?(0,v.jsx)("div",{style:{color:"#8696a0"},children:"No authors liked by this user."}):(0,v.jsxs)("table",{className:"table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Author"}),(0,v.jsx)("th",{children:"Liked At"}),(0,v.jsx)("th",{children:"Total Likes"}),(0,v.jsx)("th",{children:"Total Loves"})]})}),(0,v.jsx)("tbody",{children:G.map(t=>{var r,d;const s=e.get(t.author_name);return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:t.author_name}),(0,v.jsx)("td",{children:t.created_at?new Date(t.created_at).toLocaleString():"\u2014"}),(0,v.jsx)("td",{children:null!==(r=null===s||void 0===s?void 0:s.likes_count)&&void 0!==r?r:"\u2014"}),(0,v.jsx)("td",{children:null!==(d=null===s||void 0===s?void 0:s.loves_count)&&void 0!==d?d:"\u2014"})]},t.id)})})]})]})}return null})()]}):(0,v.jsx)("div",{style:{color:"#8696a0",padding:12},children:"User not found."})]})}}}]);
//# sourceMappingURL=497.3ada4f35.chunk.js.map