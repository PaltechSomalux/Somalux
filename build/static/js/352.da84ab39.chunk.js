"use strict";(self.webpackChunkcampuslife=self.webpackChunkcampuslife||[]).push([[352],{7352:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var l=a(9379),i=a(5043),t=a(6263),n=a(5200),c=a(579);function d(){var e;const[s,a]=(0,i.useState)([]),[d,r]=(0,i.useState)(!0),[o,m]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[u,x]=(0,i.useState)(!1),[v,j]=(0,i.useState)(null),[g,N]=(0,i.useState)("ads"),[b,y]=(0,i.useState)("image"),[f,A]=(0,i.useState)(!1),[k,C]=(0,i.useState)(null),[D,T]=(0,i.useState)(null),[_,w]=(0,i.useState)(null),[S,U]=(0,i.useState)(!1),[P,F]=(0,i.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]}),[E,L]=(0,i.useState)({title:"",adType:"image",placement:"homepage",imageUrl:"",videoUrl:"",videoDuration:0,videoThumbnailUrl:"",clickUrl:"",ctaText:"Learn More",ctaButtonColor:"#00a884",startDate:(new Date).toISOString().split("T")[0],endDate:"",countdownSeconds:10,isSkippable:!0,budget:"",dailyBudget:"",costPerClick:.5,minAge:0,maxAge:100,targetGender:"all",targetDevices:["mobile","tablet","desktop"],frequencyCap:0,conversionTracking:!1,conversionUrl:"",status:"draft",priority:0,abTestGroup:"control"}),B=async e=>{try{U(!0),console.log("\ud83d\udcc8 [Analytics] Fetching detailed metrics for ad:",e);const s=await t.A.get("http://localhost:5000/api/admin/analytics/".concat(e));console.log("\u2705 [Analytics] Metrics received:",s.data.data),T(s.data.data)}catch(s){console.error("\u274c [Analytics] Failed to fetch analytics:",s)}finally{U(!1)}},O=async e=>{try{const s=await t.A.get("http://localhost:5000/api/admin/analytics/".concat(e,"/engagement"),{params:{startDate:P.startDate,endDate:P.endDate}});w(s.data.data)}catch(s){console.error("Failed to fetch engagement:",s)}},G=(e,s)=>{F(a=>(0,l.A)((0,l.A)({},a),{},{[e]:s}))};(0,i.useEffect)(()=>{(async()=>{try{r(!0),console.log("\ud83d\udd04 [FETCH_ADS] Fetching ads from backend...");const e=await t.A.get("http://localhost:5000/api/admin/ads/all");console.log("\u2705 [FETCH_ADS] Response:",e.data),console.log("\u2705 [FETCH_ADS] Ads array:",e.data.data),a(e.data.data||[]),m(null)}catch(e){console.error("\u274c [FETCH_ADS] Error:",e),m("Failed to load ads. Make sure backend is running.")}finally{r(!1)}})()},[]),(0,i.useEffect)(()=>{k&&(B(k.id),O(k.id))},[k]);const I=e=>{const{name:s,value:a,type:i,checked:t}=e.target;L(e=>(0,l.A)((0,l.A)({},e),{},{[s]:"checkbox"===i?t:a})),m(null)},R=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image";const a=e.target.files[0];if(console.log("\ud83d\udce4 [UPLOAD] File selected:",{fileType:s,fileName:null===a||void 0===a?void 0:a.name,fileSize:null===a||void 0===a?void 0:a.size}),a)try{A(!0);const e=new FileReader;e.onload=async e=>{const i=e.target.result.split(",")[1];console.log("\ud83d\udcf8 [UPLOAD] Base64 ready, size:",i.length);try{const e="video"===s?"video/mp4":a.type;console.log("\ud83d\ude80 [UPLOAD] Sending to backend:",{fileType:s,mimeType:e});const n=await t.A.post("http://localhost:5000/api/upload/".concat(s),{fileName:a.name,fileData:i,mimeType:e});console.log("\u2705 [UPLOAD] Response:",n.data),console.log("\u2705 [UPLOAD] Response keys:",Object.keys(n.data)),console.log("\u2705 [UPLOAD] filePath value:",n.data.filePath),n.data.success?("video"===s?(L(e=>(0,l.A)((0,l.A)({},e),{},{videoUrl:n.data.filePath||n.data.imagePath,videoDuration:n.data.duration||0})),console.log("\u2705 [UPLOAD] Video URL set:",n.data.filePath||n.data.imagePath)):"thumbnail"===s?(L(e=>(0,l.A)((0,l.A)({},e),{},{videoThumbnailUrl:n.data.filePath||n.data.imagePath})),console.log("\u2705 [UPLOAD] Thumbnail URL set:",n.data.filePath||n.data.imagePath)):(L(e=>(0,l.A)((0,l.A)({},e),{},{imageUrl:n.data.filePath||n.data.imagePath})),console.log("\u2705 [UPLOAD] Image URL set:",n.data.filePath||n.data.imagePath)),p("".concat(s.charAt(0).toUpperCase()+s.slice(1)," uploaded successfully!")),setTimeout(()=>p(null),3e3)):console.error("\u274c [UPLOAD] Response not successful:",n.data)}catch(r){var n,c,d;console.error("\u274c [UPLOAD] Error:",r),console.error("\u274c [UPLOAD] Response:",null===(n=r.response)||void 0===n?void 0:n.data),m((null===(c=r.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.error)||"Failed to upload ".concat(s))}finally{A(!1)}},e.readAsDataURL(a)}catch(i){console.error("\u274c [FILE_READ] Error:",i),m("Failed to read file"),A(!1)}else console.warn("\u26a0\ufe0f [UPLOAD] No file selected")},V=()=>{L({title:"",adType:"image",placement:"homepage",imageUrl:"",videoUrl:"",videoDuration:0,videoThumbnailUrl:"",clickUrl:"",ctaText:"Learn More",ctaButtonColor:"#00a884",startDate:(new Date).toISOString().split("T")[0],endDate:"",countdownSeconds:10,isSkippable:!0,budget:"",dailyBudget:"",costPerClick:.5,minAge:0,maxAge:100,targetGender:"all",targetDevices:["mobile","tablet","desktop"],frequencyCap:0,conversionTracking:!1,conversionUrl:"",status:"draft",priority:0,abTestGroup:"control"}),y("image"),j(null),x(!1)};return d?(0,c.jsx)("div",{className:"ads-management",children:(0,c.jsx)("div",{className:"ads-loading",children:"Loading ads..."})}):(0,c.jsxs)("div",{className:"ads-management advanced",children:[(0,c.jsx)("div",{className:"ads-header-enhanced",children:(0,c.jsxs)("div",{className:"header-main",children:[(0,c.jsxs)("div",{className:"header-title-section",children:[(0,c.jsx)("h1",{children:"Ad Management"}),(0,c.jsx)("p",{children:"Create, edit, and manage advertisements with video support"})]}),(0,c.jsxs)("div",{className:"header-stats",children:[(0,c.jsxs)("div",{className:"stat-item",children:[(0,c.jsx)("span",{className:"stat-label",children:"Total Ads"}),(0,c.jsx)("span",{className:"stat-value",children:s.length})]}),(0,c.jsxs)("div",{className:"stat-item",children:[(0,c.jsx)("span",{className:"stat-label",children:"Active"}),(0,c.jsx)("span",{className:"stat-value",children:s.filter(e=>"active"===e.status).length})]}),(0,c.jsxs)("div",{className:"stat-item",children:[(0,c.jsx)("span",{className:"stat-label",children:"Total Views"}),(0,c.jsx)("span",{className:"stat-value",children:s.reduce((e,s)=>e+(s.total_impressions||0),0).toLocaleString()})]})]})]})}),o&&(0,c.jsxs)("div",{className:"ads-error",children:[(0,c.jsx)("span",{children:o}),(0,c.jsx)("button",{onClick:()=>m(null),children:"\xd7"})]}),h&&(0,c.jsxs)("div",{className:"ads-success",children:[(0,c.jsx)("span",{children:h}),(0,c.jsx)("button",{onClick:()=>p(null),children:"\xd7"})]}),(0,c.jsx)("div",{className:"ads-tabs-container",children:(0,c.jsxs)("div",{className:"ads-tabs",children:[(0,c.jsxs)("button",{className:"tab ".concat("ads"===g?"active":""),onClick:()=>{N("ads"),x(!1)},children:[(0,c.jsx)("span",{className:"tab-icon",children:"\ud83d\udcca"}),(0,c.jsx)("span",{className:"tab-text",children:"Ads"}),(0,c.jsx)("span",{className:"tab-count",children:s.length})]}),(0,c.jsxs)("button",{className:"tab ".concat("analytics"===g?"active":""),onClick:()=>N("analytics"),children:[(0,c.jsx)("span",{className:"tab-icon",children:"\ud83d\udcc8"}),(0,c.jsx)("span",{className:"tab-text",children:"Analytics"}),(0,c.jsx)("span",{className:"tab-count",children:k?"1":"-"})]})]})}),!u&&"ads"===g&&(0,c.jsx)("div",{className:"header-actions",children:(0,c.jsxs)("button",{className:"btn-create-ad",onClick:()=>x(!0),children:[(0,c.jsx)(n.GGD,{size:18}),(0,c.jsx)("span",{children:"Create Ad"})]})}),u&&"ads"===g&&(0,c.jsxs)("div",{className:"ads-form-container",children:[(0,c.jsx)("h2",{children:v?"Edit Ad":"Create Ad"}),(0,c.jsxs)("div",{className:"ad-type-selection",children:[(0,c.jsxs)("button",{type:"button",className:"type-btn ".concat("image"===E.adType?"active":""),onClick:()=>{L((0,l.A)((0,l.A)({},E),{},{adType:"image"})),y("image")},children:[(0,c.jsx)(n.fZZ,{})," Image Ad"]}),(0,c.jsxs)("button",{type:"button",className:"type-btn ".concat("video"===E.adType?"active":""),onClick:()=>{L((0,l.A)((0,l.A)({},E),{},{adType:"video"})),y("video")},children:[(0,c.jsx)(n.pVQ,{})," Video Ad"]})]}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),E.title)if("image"!==E.adType||E.imageUrl)if("video"!==E.adType||E.videoUrl)try{const e={title:E.title,adType:E.adType,imageUrl:E.imageUrl||null,videoUrl:E.videoUrl||null,videoDuration:parseInt(E.videoDuration)||0,videoThumbnailUrl:E.videoThumbnailUrl||null,clickUrl:E.clickUrl||null,ctaText:E.ctaText,ctaButtonColor:E.ctaButtonColor,placement:E.placement,startDate:E.startDate,endDate:E.endDate||null,countdownSeconds:parseInt(E.countdownSeconds)||10,isSkippable:E.isSkippable,budget:parseFloat(E.budget)||0,dailyBudget:parseFloat(E.dailyBudget)||0,costPerClick:parseFloat(E.costPerClick)||.5,minAge:parseInt(E.minAge)||0,maxAge:parseInt(E.maxAge)||100,targetGender:E.targetGender,targetDevices:JSON.stringify(E.targetDevices),frequencyCap:parseInt(E.frequencyCap)||0,conversionTracking:E.conversionTracking,conversionUrl:E.conversionUrl||null,status:E.status,priority:parseInt(E.priority)||0,abTestGroup:E.abTestGroup};if(console.log("\ud83d\udce4 [SAVE_AD] FULL Payload:",JSON.stringify(e,null,2)),console.log("\ud83d\udce4 [SAVE_AD] FormData state:",E),console.log("\ud83d\udce4 [SAVE_AD] FormData.placement:",E.placement),v){const l=await t.A.put("http://localhost:5000/api/admin/ads/".concat(v),e);a(s.map(e=>e.id===v?l.data.data:e)),p("Ad updated successfully!")}else{console.log("\ud83d\udce4 [SAVE_AD] POSTing to backend...");const l=await t.A.post("http://localhost:5000/api/admin/ads",e);console.log("\u2705 [SAVE_AD] Response:",l.data),a([...s,l.data.data]),p("Ad created successfully!")}V(),setTimeout(()=>p(null),3e3)}catch(c){var l,i,n;console.error("\u274c [SAVE_AD] Error:",c),console.error("\u274c [SAVE_AD] Error response:",null===(l=c.response)||void 0===l?void 0:l.data),console.error("\u274c [SAVE_AD] Full error:",c.response),m((null===(i=c.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.error)||"Failed to save ad")}else m("Please upload a video");else m("Please upload an image");else m("Please enter ad title")},className:"ads-form",children:[(0,c.jsxs)("fieldset",{className:"form-section",children:[(0,c.jsx)("legend",{children:"\ud83d\udccb Basic Information & Timing"}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Title *"}),(0,c.jsx)("input",{type:"text",name:"title",value:E.title,onChange:I,placeholder:"Ad title",required:!0,style:{minWidth:"180px"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Placement *"}),(0,c.jsxs)("select",{name:"placement",value:E.placement,onChange:I,required:!0,children:[(0,c.jsxs)("optgroup",{label:"Regular Placements",children:[(0,c.jsx)("option",{value:"homepage",children:"Homepage"}),(0,c.jsx)("option",{value:"books",children:"Books"}),(0,c.jsx)("option",{value:"authors",children:"Authors"}),(0,c.jsx)("option",{value:"categories",children:"Categories"}),(0,c.jsx)("option",{value:"pastpapers",children:"Past Papers"}),(0,c.jsx)("option",{value:"papers",children:"Papers"})]}),(0,c.jsxs)("optgroup",{label:"Grid Card Placements",children:[(0,c.jsx)("option",{value:"grid-books",children:"Grid - Books"}),(0,c.jsx)("option",{value:"grid-authors",children:"Grid - Authors"}),(0,c.jsx)("option",{value:"grid-categories",children:"Grid - Categories"}),(0,c.jsx)("option",{value:"grid-pastpapers",children:"Grid - Past Papers"}),(0,c.jsx)("option",{value:"grid-campus",children:"Grid - Campus/Universities"}),(0,c.jsx)("option",{value:"grid-papers",children:"Grid - Papers"})]})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Status"}),(0,c.jsxs)("select",{name:"status",value:E.status,onChange:I,children:[(0,c.jsx)("option",{value:"draft",children:"Draft"}),(0,c.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,c.jsx)("option",{value:"active",children:"Active"}),(0,c.jsx)("option",{value:"paused",children:"Paused"}),(0,c.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Priority"}),(0,c.jsx)("input",{type:"number",name:"priority",value:E.priority,onChange:I,min:"0",max:"100",placeholder:"0-100",style:{width:"80px"}})]})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Start Date"}),(0,c.jsx)("input",{type:"date",name:"startDate",value:E.startDate,onChange:I})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"End Date"}),(0,c.jsx)("input",{type:"date",name:"endDate",value:E.endDate,onChange:I})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Countdown (sec)"}),(0,c.jsx)("input",{type:"number",name:"countdownSeconds",value:E.countdownSeconds,onChange:I,min:"3",max:"60",style:{width:"80px"}})]}),(0,c.jsx)("div",{className:"form-group",children:(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"checkbox",name:"isSkippable",checked:E.isSkippable,onChange:I}),"Skippable"]})})]})]}),(0,c.jsxs)("fieldset",{className:"form-section",children:[(0,c.jsx)("legend",{children:"\ud83c\udfa8 Media & CTA"}),"image"===E.adType&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Image *"}),(0,c.jsxs)("div",{className:"upload-section",children:[(0,c.jsx)("input",{type:"file",accept:"image/*",onChange:e=>R(e,"image"),disabled:f,className:"file-input"}),f&&(0,c.jsx)("span",{className:"upload-status",children:"Uploading..."})]})]}),"video"===E.adType&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Video File *"}),(0,c.jsxs)("div",{className:"upload-section",children:[(0,c.jsx)("input",{type:"file",accept:"video/mp4",onChange:e=>R(e,"video"),disabled:f,className:"file-input"}),f&&(0,c.jsx)("span",{className:"upload-status",children:"Uploading..."})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Thumbnail Image"}),(0,c.jsx)("div",{className:"upload-section",children:(0,c.jsx)("input",{type:"file",accept:"image/*",onChange:e=>R(e,"thumbnail"),disabled:f,className:"file-input"})})]})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"CTA Text"}),(0,c.jsx)("input",{type:"text",name:"ctaText",value:E.ctaText,onChange:I,placeholder:"Learn More",style:{minWidth:"120px"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"CTA Color"}),(0,c.jsx)("input",{type:"color",name:"ctaButtonColor",value:E.ctaButtonColor,onChange:I,style:{height:"28px",width:"50px",cursor:"pointer"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Click URL"}),(0,c.jsx)("input",{type:"url",name:"clickUrl",value:E.clickUrl,onChange:I,placeholder:"https://example.com",style:{minWidth:"180px"}})]})]})]}),(0,c.jsxs)("fieldset",{className:"form-section",children:[(0,c.jsx)("legend",{children:"\ud83d\udcb0 Budget & Conversion"}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Total Budget"}),(0,c.jsx)("input",{type:"number",name:"budget",value:E.budget,onChange:I,step:"0.01",min:"0",placeholder:"0.00",style:{width:"90px"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Daily Budget"}),(0,c.jsx)("input",{type:"number",name:"dailyBudget",value:E.dailyBudget,onChange:I,step:"0.01",min:"0",placeholder:"0.00",style:{width:"90px"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Cost Per Click"}),(0,c.jsx)("input",{type:"number",name:"costPerClick",value:E.costPerClick,onChange:I,step:"0.01",min:"0",placeholder:"0.00",style:{width:"90px"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"A/B Test"}),(0,c.jsxs)("select",{name:"abTestGroup",value:E.abTestGroup,onChange:I,children:[(0,c.jsx)("option",{value:"control",children:"Control"}),(0,c.jsx)("option",{value:"variant_a",children:"Variant A"}),(0,c.jsx)("option",{value:"variant_b",children:"Variant B"}),(0,c.jsx)("option",{value:"variant_c",children:"Variant C"})]})]})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsx)("div",{className:"form-group",children:(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"checkbox",name:"conversionTracking",checked:E.conversionTracking,onChange:I}),"Enable Conversion Tracking"]})}),E.conversionTracking&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Conversion URL"}),(0,c.jsx)("input",{type:"url",name:"conversionUrl",value:E.conversionUrl,onChange:I,placeholder:"https://analytics.example.com/pixel",style:{minWidth:"200px"}})]})]})]}),(0,c.jsxs)("fieldset",{className:"form-section",children:[(0,c.jsx)("legend",{children:"\ud83c\udfaf Targeting"}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Gender"}),(0,c.jsxs)("select",{name:"targetGender",value:E.targetGender,onChange:I,children:[(0,c.jsx)("option",{value:"all",children:"All"}),(0,c.jsx)("option",{value:"male",children:"Male"}),(0,c.jsx)("option",{value:"female",children:"Female"})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Min Age"}),(0,c.jsx)("input",{type:"number",name:"minAge",value:E.minAge,onChange:I,min:"0",max:"100",style:{width:"70px"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Max Age"}),(0,c.jsx)("input",{type:"number",name:"maxAge",value:E.maxAge,onChange:I,min:"0",max:"100",style:{width:"70px"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Frequency Cap"}),(0,c.jsx)("input",{type:"number",name:"frequencyCap",value:E.frequencyCap,onChange:I,min:"0",placeholder:"Unlimited",style:{width:"80px"}})]})]}),(0,c.jsx)("div",{className:"form-row",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Target Devices"}),(0,c.jsx)("div",{className:"checkbox-group",children:["mobile","tablet","desktop"].map(e=>(0,c.jsxs)("label",{className:"checkbox-label",children:[(0,c.jsx)("input",{type:"checkbox",checked:E.targetDevices.includes(e),onChange:()=>(e=>{L(s=>(0,l.A)((0,l.A)({},s),{},{targetDevices:s.targetDevices.includes(e)?s.targetDevices.filter(s=>s!==e):[...s.targetDevices,e]}))})(e)}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]})})]}),(0,c.jsxs)("div",{className:"form-actions",children:[(0,c.jsx)("button",{type:"submit",className:"btn-primary",children:v?"\u270f\ufe0f Update":"\u2795 Create Ad"}),(0,c.jsx)("button",{type:"button",className:"btn-secondary",onClick:V,children:"\u2715 Cancel"})]})]})]}),"ads"===g&&!u&&(0,c.jsx)("div",{className:"ads-list",children:0===s.length?(0,c.jsx)("div",{className:"no-ads",children:(0,c.jsx)("p",{children:"No ads yet. Create your first ad!"})}):(0,c.jsxs)("table",{className:"ads-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Title"}),(0,c.jsx)("th",{children:"Type"}),(0,c.jsx)("th",{children:"Placement"}),(0,c.jsx)("th",{children:"Status"}),(0,c.jsx)("th",{children:"Impressions"}),(0,c.jsx)("th",{children:"Clicks"}),(0,c.jsx)("th",{children:"CTR"}),(0,c.jsx)("th",{children:"Start Date"}),(0,c.jsx)("th",{children:"End Date"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:s.map(e=>{var l,i,d;return(0,c.jsxs)("tr",{className:"ad-row ".concat(e.status),children:[(0,c.jsx)("td",{className:"title-cell",children:(0,c.jsxs)("div",{className:"title-with-thumb",children:["video"===e.ad_type?(0,c.jsx)("div",{className:"ad-thumb video",children:"\ud83c\udfa5"}):(0,c.jsx)(c.Fragment,{children:e.image_url&&(0,c.jsx)("img",{src:e.image_url,alt:e.title,className:"ad-thumb"})}),(0,c.jsx)("span",{children:e.title})]})}),(0,c.jsx)("td",{className:"type-cell",children:(0,c.jsx)("span",{className:"badge-type",children:(null===(l=e.ad_type)||void 0===l?void 0:l.toUpperCase())||"IMAGE"})}),(0,c.jsx)("td",{children:e.placement}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"status-badge ".concat(e.status),children:(null===(i=e.status)||void 0===i?void 0:i.charAt(0).toUpperCase())+(null===(d=e.status)||void 0===d?void 0:d.slice(1))||"Active"})}),(0,c.jsx)("td",{className:"number",children:e.total_impressions||0}),(0,c.jsx)("td",{className:"number",children:e.total_clicks||0}),(0,c.jsxs)("td",{className:"number",children:[e.total_impressions>0?((e.total_clicks||0)/e.total_impressions*100).toFixed(2):0,"%"]}),(0,c.jsx)("td",{className:"date-cell",children:e.start_date?new Date(e.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"\u2014"}),(0,c.jsx)("td",{className:"date-cell",children:e.end_date?new Date(e.end_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"\u2014"}),(0,c.jsx)("td",{className:"actions-cell",children:(0,c.jsxs)("div",{className:"actions",children:[(0,c.jsx)("button",{className:"btn-small edit",onClick:()=>(e=>{y(e.ad_type||"image"),L({title:e.title,adType:e.ad_type||"image",imageUrl:e.image_url||"",videoUrl:e.video_url||"",videoDuration:e.video_duration||0,videoThumbnailUrl:e.video_thumbnail_url||"",clickUrl:e.click_url||"",ctaText:e.cta_text||"Learn More",ctaButtonColor:e.cta_button_color||"#00a884",placement:e.placement,startDate:e.start_date?e.start_date.split("T")[0]:(new Date).toISOString().split("T")[0],endDate:e.end_date?e.end_date.split("T")[0]:"",countdownSeconds:e.countdown_seconds||10,isSkippable:void 0===e.is_skippable||e.is_skippable,budget:e.budget||"",dailyBudget:e.daily_budget||"",costPerClick:e.cost_per_click||.5,minAge:e.min_age||0,maxAge:e.max_age||100,targetGender:e.target_gender||"all",targetDevices:e.target_devices?JSON.parse(e.target_devices):["mobile","tablet","desktop"],frequencyCap:e.frequency_cap||0,conversionTracking:e.conversion_tracking||!1,conversionUrl:e.conversion_url||"",status:e.status||"draft",priority:e.priority||0,abTestGroup:e.ab_test_group||"control"}),j(e.id),x(!0)})(e),title:"Edit ad",children:(0,c.jsx)(n.WXf,{})}),(0,c.jsx)("button",{className:"btn-small delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this ad?"))try{await t.A.delete("http://localhost:5000/api/admin/ads/".concat(e)),a(s.filter(s=>s.id!==e)),p("Ad deleted successfully!"),setTimeout(()=>p(null),3e3)}catch(l){console.error("Failed to delete ad:",l),m("Failed to delete ad")}})(e.id),title:"Delete ad",children:(0,c.jsx)(n.IXo,{})})]})})]},e.id)})})]})}),"analytics"===g&&(0,c.jsxs)("div",{className:"analytics-section",children:[(0,c.jsxs)("div",{className:"analytics-header-section",children:[(0,c.jsx)("h3",{children:"\ufffd Ad Performance Analytics"}),(0,c.jsx)("p",{children:"Real-time tracking of impressions, clicks, and engagement metrics"})]}),(0,c.jsxs)("div",{className:"ads-performance-table-wrapper",children:[(0,c.jsx)("h2",{children:"All Ads Performance Overview"}),(0,c.jsxs)("div",{className:"ads-performance-table",children:[(0,c.jsxs)("div",{className:"table-header",children:[(0,c.jsx)("div",{className:"col-title",children:"Ad Title"}),(0,c.jsx)("div",{className:"col-placement",children:"Placement"}),(0,c.jsx)("div",{className:"col-impressions",children:"Impressions"}),(0,c.jsx)("div",{className:"col-clicks",children:"Clicks"}),(0,c.jsx)("div",{className:"col-dismisses",children:"Dismisses"}),(0,c.jsx)("div",{className:"col-ctr",children:"CTR %"}),(0,c.jsx)("div",{className:"col-engagement",children:"Engagement %"})]}),(0,c.jsx)("div",{className:"table-body",children:s.map(e=>(0,c.jsxs)("div",{className:"table-row ".concat((null===k||void 0===k?void 0:k.id)===e.id?"active":""),onClick:()=>{C(e),B(e.id),O(e.id)},children:[(0,c.jsx)("div",{className:"col-title",children:e.title}),(0,c.jsx)("div",{className:"col-placement",children:(0,c.jsx)("span",{className:"placement-badge",children:e.placement})}),(0,c.jsx)("div",{className:"col-impressions",children:e.total_impressions||0}),(0,c.jsx)("div",{className:"col-clicks",children:e.total_clicks||0}),(0,c.jsx)("div",{className:"col-dismisses",children:e.total_dismisses||0}),(0,c.jsxs)("div",{className:"col-ctr",children:[e.total_impressions>0?((e.total_clicks||0)/e.total_impressions*100).toFixed(1):0,"%"]}),(0,c.jsxs)("div",{className:"col-engagement",children:[e.total_impressions>0?((e.total_clicks+e.total_dismisses)/e.total_impressions*100).toFixed(1):0,"%"]})]},e.id))})]})]}),k&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"selected-ad-analytics-panel",children:[(0,c.jsxs)("h2",{children:["\ud83d\udcc8 Analytics Details: ",k.title]}),(0,c.jsxs)("div",{className:"key-metrics-grid",children:[(0,c.jsxs)("div",{className:"key-metric",children:[(0,c.jsx)("span",{className:"label",children:"Total Impressions"}),(0,c.jsx)("span",{className:"value",children:k.total_impressions||0})]}),(0,c.jsxs)("div",{className:"key-metric",children:[(0,c.jsx)("span",{className:"label",children:"Total Clicks"}),(0,c.jsx)("span",{className:"value highlight-blue",children:k.total_clicks||0})]}),(0,c.jsxs)("div",{className:"key-metric",children:[(0,c.jsx)("span",{className:"label",children:"Total Dismisses"}),(0,c.jsx)("span",{className:"value highlight-red",children:k.total_dismisses||0})]}),(0,c.jsxs)("div",{className:"key-metric",children:[(0,c.jsx)("span",{className:"label",children:"Click-Through Rate"}),(0,c.jsxs)("span",{className:"value highlight-green",children:[k.total_impressions>0?((k.total_clicks||0)/k.total_impressions*100).toFixed(1):0,"%"]})]}),(0,c.jsxs)("div",{className:"key-metric",children:[(0,c.jsx)("span",{className:"label",children:"Engagement Rate"}),(0,c.jsxs)("span",{className:"value highlight-purple",children:[k.total_impressions>0?((k.total_clicks+k.total_dismisses)/k.total_impressions*100).toFixed(1):0,"%"]})]}),(0,c.jsxs)("div",{className:"key-metric",children:[(0,c.jsx)("span",{className:"label",children:"Completion Rate"}),(0,c.jsxs)("span",{className:"value highlight-yellow",children:[k.total_impressions>0?((k.total_impressions-k.total_dismisses)/k.total_impressions*100).toFixed(1):0,"%"]})]})]}),(0,c.jsxs)("div",{className:"analytics-grid",children:[(0,c.jsxs)("div",{className:"ad-info-card",children:[(0,c.jsx)("h3",{children:"Ad Information"}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"label",children:"Status:"}),(0,c.jsx)("span",{className:"value status-badge ".concat(k.is_active?"active":"inactive"),children:k.is_active?"\u25cf Active":"\u25cb Inactive"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"label",children:"Dismiss Rate:"}),(0,c.jsxs)("span",{className:"value",children:[k.dismissRate||0,"%"]})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"label",children:"Avg View Duration:"}),(0,c.jsxs)("span",{className:"value",children:[(null===D||void 0===D||null===(e=D.metrics)||void 0===e?void 0:e.avgViewDuration)||0,"s"]})]})]}),(0,c.jsxs)("div",{className:"device-breakdown-card",children:[(0,c.jsx)("h3",{children:"Device Breakdown"}),((e,s,a,l,i,t)=>{const n=(null===D||void 0===D||null===(e=D.metrics)||void 0===e||null===(s=e.deviceBreakdown)||void 0===s?void 0:s.mobile)||0,d=(null===D||void 0===D||null===(a=D.metrics)||void 0===a||null===(l=a.deviceBreakdown)||void 0===l?void 0:l.tablet)||0,r=(null===D||void 0===D||null===(i=D.metrics)||void 0===i||null===(t=i.deviceBreakdown)||void 0===t?void 0:t.desktop)||0,o=n+d+r;return(0,c.jsxs)("div",{className:"device-rows",children:[(0,c.jsxs)("div",{className:"device-item",children:[(0,c.jsx)("span",{className:"device-name",children:"\ud83d\udcf1 Mobile"}),(0,c.jsx)("span",{className:"device-count",children:n}),(0,c.jsx)("div",{className:"device-bar-small",children:(0,c.jsx)("div",{className:"bar mobile",style:{width:o>0?n/o*100:"0%"}})}),(0,c.jsxs)("span",{className:"device-pct",children:[o>0?(n/o*100).toFixed(1):0,"%"]})]}),(0,c.jsxs)("div",{className:"device-item",children:[(0,c.jsx)("span",{className:"device-name",children:"\ud83d\udcf1 Tablet"}),(0,c.jsx)("span",{className:"device-count",children:d}),(0,c.jsx)("div",{className:"device-bar-small",children:(0,c.jsx)("div",{className:"bar tablet",style:{width:o>0?d/o*100:"0%"}})}),(0,c.jsxs)("span",{className:"device-pct",children:[o>0?(d/o*100).toFixed(1):0,"%"]})]}),(0,c.jsxs)("div",{className:"device-item",children:[(0,c.jsx)("span",{className:"device-name",children:"\ud83d\udda5\ufe0f Desktop"}),(0,c.jsx)("span",{className:"device-count",children:r}),(0,c.jsx)("div",{className:"device-bar-small",children:(0,c.jsx)("div",{className:"bar desktop",style:{width:o>0?r/o*100:"0%"}})}),(0,c.jsxs)("span",{className:"device-pct",children:[o>0?(r/o*100).toFixed(1):0,"%"]})]})]})})()]})]}),(0,c.jsxs)("div",{className:"engagement-section",children:[(0,c.jsxs)("div",{className:"engagement-header-row",children:[(0,c.jsx)("h3",{children:"Daily Engagement Timeline"}),(0,c.jsxs)("div",{className:"date-selector-inline",children:[(0,c.jsx)("input",{type:"date",value:P.startDate,onChange:e=>G("startDate",e.target.value),title:"Start Date"}),(0,c.jsx)("input",{type:"date",value:P.endDate,onChange:e=>G("endDate",e.target.value),title:"End Date"}),(0,c.jsx)("button",{className:"btn-refresh",onClick:()=>{k&&O(k.id)},children:"Refresh"})]})]}),_&&Object.keys(_).length>0?(0,c.jsxs)("div",{className:"engagement-table",children:[(0,c.jsxs)("div",{className:"table-header-row",children:[(0,c.jsx)("div",{className:"col date",children:"Date"}),(0,c.jsx)("div",{className:"col impressions",children:"Impressions"}),(0,c.jsx)("div",{className:"col clicks",children:"Clicks"}),(0,c.jsx)("div",{className:"col dismisses",children:"Dismisses"}),(0,c.jsx)("div",{className:"col avgTime",children:"Avg Time"})]}),(0,c.jsx)("div",{className:"table-body-rows",children:Object.entries(_).map(e=>{let[s,a]=e;return(0,c.jsxs)("div",{className:"table-row-item",children:[(0,c.jsx)("div",{className:"col date",children:s}),(0,c.jsx)("div",{className:"col impressions",children:a.impressions||0}),(0,c.jsx)("div",{className:"col clicks",children:a.clicks||0}),(0,c.jsx)("div",{className:"col dismisses",children:a.dismisses||0}),(0,c.jsxs)("div",{className:"col avgTime",children:[a.totalViewTime>0?(a.totalViewTime/Math.max(a.impressions,1)).toFixed(1):0,"s"]})]},s)})})]}):(0,c.jsx)("p",{className:"no-data",children:"No engagement data for selected date range"})]})]})})]})]})}}}]);
//# sourceMappingURL=352.da84ab39.chunk.js.map