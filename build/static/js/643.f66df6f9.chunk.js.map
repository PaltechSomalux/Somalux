{"version":3,"file":"static/js/643.f66df6f9.chunk.js","mappings":"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","sources":["SomaLux/Books/Admin/pages/AdAnalytics.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { API_URL } from '../../../../config';\r\nimport { FiBarChart2, FiTrendingUp, FiUsers, FiMousePointer } from 'react-icons/fi';\r\n\r\nimport './AdAnalytics.css';\r\n\r\nexport default function AdAnalytics() {\r\n  const [ads, setAds] = useState([]);\r\n  const [selectedAd, setSelectedAd] = useState(null);\r\n  const [analytics, setAnalytics] = useState(null);\r\n  const [engagement, setEngagement] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [dateRange, setDateRange] = useState({\r\n    startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\r\n    endDate: new Date().toISOString().split('T')[0]\r\n  });\r\n\r\n  // Fetch all ads\r\n  useEffect(() => {\r\n    const fetchAds = async () => {\r\n      try {\r\n        setLoading(true);\r\n        console.log('üìä [Analytics] Fetching all ads...');\r\n        const response = await axios.get(`${API_URL}/api/admin/analytics/all`);\r\n        console.log('‚úÖ [Analytics] Ads fetched:', response.data.data);\r\n        setAds(response.data.data || []);\r\n        if (response.data.data && response.data.data.length > 0) {\r\n          setSelectedAd(response.data.data[0]);\r\n        } else {\r\n          console.warn('‚ö†Ô∏è [Analytics] No ads found');\r\n        }\r\n      } catch (err) {\r\n        console.error('‚ùå [Analytics] Failed to fetch ads:', err);\r\n        setError('Failed to load ads');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAds();\r\n  }, []);\r\n\r\n  // Fetch analytics for selected ad\r\n  useEffect(() => {\r\n    if (selectedAd) {\r\n      fetchAnalytics(selectedAd.id);\r\n      fetchEngagement(selectedAd.id);\r\n    }\r\n  }, [selectedAd]);\r\n\r\n  const fetchAnalytics = async (adId) => {\r\n    try {\r\n      console.log('üìà [Analytics] Fetching detailed metrics for ad:', adId);\r\n      const response = await axios.get(`${API_URL}/api/admin/analytics/${adId}`);\r\n      console.log('‚úÖ [Analytics] Metrics received:', response.data.data);\r\n      setAnalytics(response.data.data);\r\n    } catch (err) {\r\n      console.error('‚ùå [Analytics] Failed to fetch analytics:', err);\r\n    }\r\n  };\r\n\r\n  const fetchEngagement = async (adId) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${API_URL}/api/admin/analytics/${adId}/engagement`,\r\n        {\r\n          params: {\r\n            startDate: dateRange.startDate,\r\n            endDate: dateRange.endDate\r\n          }\r\n        }\r\n      );\r\n      setEngagement(response.data.data);\r\n    } catch (err) {\r\n      console.error('Failed to fetch engagement:', err);\r\n    }\r\n  };\r\n\r\n  const handleDateRangeChange = (field, value) => {\r\n    setDateRange(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const refreshEngagement = () => {\r\n    if (selectedAd) {\r\n      fetchEngagement(selectedAd.id);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"analytics-container\"><p>Loading analytics...</p></div>;\r\n  }\r\n\r\n  const metrics = analytics?.metrics || {};\r\n  const deviceBreakdown = metrics.deviceBreakdown || {};\r\n\r\n  return (\r\n    <div className=\"analytics-container\">\r\n      <div className=\"analytics-header\">\r\n        <h1>üìä Ad Analytics & Performance Dashboard</h1>\r\n        <p>Real-time tracking of impressions, clicks, and engagement metrics</p>\r\n      </div>\r\n\r\n      {error && <div className=\"analytics-error\">{error}</div>}\r\n\r\n      {/* Ads List as Enhanced Table */}\r\n      <div className=\"ads-analytics-table-wrapper\">\r\n        <h2>All Advertisements Performance</h2>\r\n        <div className=\"ads-analytics-table\">\r\n          <div className=\"table-header\">\r\n            <div className=\"col-title\">Ad Title</div>\r\n            <div className=\"col-placement\">Placement</div>\r\n            <div className=\"col-status\">Status</div>\r\n            <div className=\"col-impressions\">Impressions</div>\r\n            <div className=\"col-clicks\">Clicks</div>\r\n            <div className=\"col-dismisses\">Dismisses</div>\r\n            <div className=\"col-ctr\">CTR %</div>\r\n            <div className=\"col-engagement\">Engagement %</div>\r\n            <div className=\"col-action\">Action</div>\r\n          </div>\r\n          <div className=\"table-body\">\r\n            {ads.map(ad => (\r\n              <div \r\n                key={ad.id} \r\n                className={`table-row ${selectedAd?.id === ad.id ? 'active' : ''}`}\r\n                onClick={() => setSelectedAd(ad)}\r\n              >\r\n                <div className=\"col-title\">{ad.title}</div>\r\n                <div className=\"col-placement\">\r\n                  <span className=\"placement-badge\">{ad.placement}</span>\r\n                </div>\r\n                <div className=\"col-status\">\r\n                  <span className={`status-badge ${ad.is_active ? 'active' : 'inactive'}`}>\r\n                    {ad.is_active ? '‚óè Active' : '‚óã Inactive'}\r\n                  </span>\r\n                </div>\r\n                <div className=\"col-impressions\">{ad.total_impressions || 0}</div>\r\n                <div className=\"col-clicks\">{ad.total_clicks || 0}</div>\r\n                <div className=\"col-dismisses\">{ad.total_dismisses || 0}</div>\r\n                <div className=\"col-ctr\">{ad.ctr || 0}%</div>\r\n                <div className=\"col-engagement\">\r\n                  {ad.total_impressions > 0 \r\n                    ? (((ad.total_clicks + ad.total_dismisses) / ad.total_impressions) * 100).toFixed(1)\r\n                    : 0}%\r\n                </div>\r\n                <div className=\"col-action\">\r\n                  <button className=\"view-details-btn\">View Details</button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {selectedAd && (\r\n        <>\r\n          {/* Selected Ad Details Panel */}\r\n          <div className=\"selected-ad-details\">\r\n            <h2>üìà Detailed Analytics: {selectedAd.title}</h2>\r\n            \r\n            {/* Key Metrics in Compact Layout */}\r\n            <div className=\"details-metrics-grid\">\r\n              <div className=\"detail-metric\">\r\n                <span className=\"label\">Total Impressions</span>\r\n                <span className=\"value\">{selectedAd.total_impressions || 0}</span>\r\n              </div>\r\n              <div className=\"detail-metric\">\r\n                <span className=\"label\">Total Clicks</span>\r\n                <span className=\"value highlight-blue\">{selectedAd.total_clicks || 0}</span>\r\n              </div>\r\n              <div className=\"detail-metric\">\r\n                <span className=\"label\">Total Dismisses</span>\r\n                <span className=\"value highlight-red\">{selectedAd.total_dismisses || 0}</span>\r\n              </div>\r\n              <div className=\"detail-metric\">\r\n                <span className=\"label\">Click-Through Rate</span>\r\n                <span className=\"value highlight-green\">{selectedAd.ctr || 0}%</span>\r\n              </div>\r\n              <div className=\"detail-metric\">\r\n                <span className=\"label\">Engagement Rate</span>\r\n                <span className=\"value highlight-purple\">\r\n                  {selectedAd.total_impressions > 0 \r\n                    ? (((selectedAd.total_clicks + selectedAd.total_dismisses) / selectedAd.total_impressions) * 100).toFixed(2)\r\n                    : 0}%\r\n                </span>\r\n              </div>\r\n              <div className=\"detail-metric\">\r\n                <span className=\"label\">Completion Rate</span>\r\n                <span className=\"value highlight-yellow\">\r\n                  {selectedAd.total_impressions > 0\r\n                    ? (((selectedAd.total_impressions - selectedAd.total_dismisses) / selectedAd.total_impressions) * 100).toFixed(2)\r\n                    : 0}%\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Ad Information Table */}\r\n            <div className=\"ad-info-table\">\r\n              <div className=\"info-row\">\r\n                <span className=\"info-label\">Ad Title:</span>\r\n                <span className=\"info-value\">{selectedAd.title}</span>\r\n              </div>\r\n              <div className=\"info-row\">\r\n                <span className=\"info-label\">Placement:</span>\r\n                <span className=\"info-value placement-badge\">{selectedAd.placement}</span>\r\n              </div>\r\n              <div className=\"info-row\">\r\n                <span className=\"info-label\">Status:</span>\r\n                <span className={`info-value status-badge ${selectedAd.is_active ? 'active' : 'inactive'}`}>\r\n                  {selectedAd.is_active ? '‚óè Active' : '‚óã Inactive'}\r\n                </span>\r\n              </div>\r\n              <div className=\"info-row\">\r\n                <span className=\"info-label\">Dismiss Rate:</span>\r\n                <span className=\"info-value\">{selectedAd.dismissRate || 0}%</span>\r\n              </div>\r\n              <div className=\"info-row\">\r\n                <span className=\"info-label\">Avg View Duration:</span>\r\n                <span className=\"info-value\">{metrics.avgViewDuration || 0}s</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Device Breakdown Table */}\r\n            <div className=\"device-breakdown-table\">\r\n              <h3>Device Breakdown</h3>\r\n              <div className=\"device-table\">\r\n                <div className=\"device-header\">\r\n                  <div className=\"device-col\">Device</div>\r\n                  <div className=\"device-col\">Count</div>\r\n                  <div className=\"device-col\">Percentage</div>\r\n                  <div className=\"device-col\">Visual</div>\r\n                </div>\r\n                {(() => {\r\n                  const total = (deviceBreakdown.mobile || 0) + (deviceBreakdown.tablet || 0) + (deviceBreakdown.desktop || 0);\r\n                  return (\r\n                    <>\r\n                      <div className=\"device-row\">\r\n                        <div className=\"device-col device-name\">üì± Mobile</div>\r\n                        <div className=\"device-col\">{deviceBreakdown.mobile || 0}</div>\r\n                        <div className=\"device-col\">{total > 0 ? ((deviceBreakdown.mobile / total) * 100).toFixed(1) : 0}%</div>\r\n                        <div className=\"device-col device-bar\">\r\n                          <div className=\"bar mobile\" style={{width: total > 0 ? ((deviceBreakdown.mobile / total) * 100) : 0 + '%'}}></div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"device-row\">\r\n                        <div className=\"device-col device-name\">üì± Tablet</div>\r\n                        <div className=\"device-col\">{deviceBreakdown.tablet || 0}</div>\r\n                        <div className=\"device-col\">{total > 0 ? ((deviceBreakdown.tablet / total) * 100).toFixed(1) : 0}%</div>\r\n                        <div className=\"device-col device-bar\">\r\n                          <div className=\"bar tablet\" style={{width: total > 0 ? ((deviceBreakdown.tablet / total) * 100) : 0 + '%'}}></div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"device-row\">\r\n                        <div className=\"device-col device-name\">üñ•Ô∏è Desktop</div>\r\n                        <div className=\"device-col\">{deviceBreakdown.desktop || 0}</div>\r\n                        <div className=\"device-col\">{total > 0 ? ((deviceBreakdown.desktop / total) * 100).toFixed(1) : 0}%</div>\r\n                        <div className=\"device-col device-bar\">\r\n                          <div className=\"bar desktop\" style={{width: total > 0 ? ((deviceBreakdown.desktop / total) * 100) : 0 + '%'}}></div>\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Date Range Selector */}\r\n          <div className=\"date-range-selector\">\r\n            <div className=\"date-group\">\r\n              <label>Start Date</label>\r\n              <input\r\n                type=\"date\"\r\n                value={dateRange.startDate}\r\n                onChange={(e) => handleDateRangeChange('startDate', e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"date-group\">\r\n              <label>End Date</label>\r\n              <input\r\n                type=\"date\"\r\n                value={dateRange.endDate}\r\n                onChange={(e) => handleDateRangeChange('endDate', e.target.value)}\r\n              />\r\n            </div>\r\n            <button className=\"btn-refresh\" onClick={refreshEngagement}>\r\n              Refresh Data\r\n            </button>\r\n          </div>\r\n\r\n          {/* Engagement Timeline */}\r\n          <div className=\"engagement-section\">\r\n            <h2>Daily Engagement</h2>\r\n            {engagement && Object.keys(engagement).length > 0 ? (\r\n              <div className=\"engagement-table\">\r\n                <div className=\"engagement-header\">\r\n                  <div className=\"col date\">Date</div>\r\n                  <div className=\"col impressions\">Impressions</div>\r\n                  <div className=\"col clicks\">Clicks</div>\r\n                  <div className=\"col dismisses\">Dismisses</div>\r\n                  <div className=\"col avgTime\">Avg Time</div>\r\n                </div>\r\n                {Object.entries(engagement).map(([date, data]) => (\r\n                  <div key={date} className=\"engagement-row\">\r\n                    <div className=\"col date\">{date}</div>\r\n                    <div className=\"col impressions\">{data.impressions || 0}</div>\r\n                    <div className=\"col clicks\">{data.clicks || 0}</div>\r\n                    <div className=\"col dismisses\">{data.dismisses || 0}</div>\r\n                    <div className=\"col avgTime\">\r\n                      {data.totalViewTime > 0 \r\n                        ? (data.totalViewTime / Math.max(data.impressions, 1)).toFixed(1) \r\n                        : 0}s\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <p className=\"no-data\">No engagement data for selected date range</p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Performance Summary */}\r\n          <div className=\"performance-summary\">\r\n            <h2>Performance Summary</h2>\r\n            <div className=\"summary-grid\">\r\n              <div className=\"summary-item\">\r\n                <h4>Status</h4>\r\n                <p className=\"summary-value\">{selectedAd.is_active ? 'Active' : 'Inactive'}</p>\r\n              </div>\r\n              <div className=\"summary-item\">\r\n                <h4>Placement</h4>\r\n                <p className=\"summary-value\">{selectedAd.placement}</p>\r\n              </div>\r\n              <div className=\"summary-item\">\r\n                <h4>Engagement Rate</h4>\r\n                <p className=\"summary-value\">\r\n                  {selectedAd.total_impressions > 0 \r\n                    ? (((selectedAd.total_clicks + selectedAd.total_dismisses) / selectedAd.total_impressions) * 100).toFixed(2)\r\n                    : 0}%\r\n                </p>\r\n              </div>\r\n              <div className=\"summary-item\">\r\n                <h4>Completion Rate</h4>\r\n                <p className=\"summary-value\">\r\n                  {selectedAd.total_impressions > 0\r\n                    ? (((selectedAd.total_impressions - selectedAd.total_dismisses) / selectedAd.total_impressions) * 100).toFixed(2)\r\n                    : 0}%\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["AdAnalytics","ads","setAds","useState","selectedAd","setSelectedAd","analytics","setAnalytics","engagement","setEngagement","loading","setLoading","error","setError","dateRange","setDateRange","startDate","Date","now","toISOString","split","endDate","useEffect","async","console","log","response","axios","get","concat","API_URL","data","length","warn","err","fetchAds","fetchAnalytics","id","fetchEngagement","adId","params","handleDateRangeChange","field","value","prev","_objectSpread","_jsx","className","children","metrics","deviceBreakdown","_jsxs","map","ad","onClick","title","placement","is_active","total_impressions","total_clicks","total_dismisses","ctr","toFixed","_Fragment","dismissRate","avgViewDuration","total","mobile","tablet","desktop","style","width","type","onChange","e","target","refreshEngagement","Object","keys","entries","_ref","date","impressions","clicks","dismisses","totalViewTime","Math","max"],"ignoreList":[],"sourceRoot":""}