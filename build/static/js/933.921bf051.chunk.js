"use strict";(self.webpackChunkcampuslife=self.webpackChunkcampuslife||[]).push([[933],{2933:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(9379),l=s(5043),i=s(1389),o=s(4857);var n=s(3515),r=s(9101),c=(s(7488),s(579));const d=e=>{let{userProfile:t}=e;const[s,d]=(0,l.useState)({overview:!0,uploadsPerMonth:!0,categoriesDistribution:!0,topBooks:!0,recentBooks:!0,viewsDetails:!0,includeUsers:!1,usersMode:"names_emails",dateRange:"all"}),[h,m]=(0,l.useState)(!1),[u,p]=(0,l.useState)(!1),[x,g]=(0,l.useState)([]),[y,v]=(0,l.useState)([]),[b,A]=(0,l.useState)([]),{showToast:N}=(0,r.v)(),j="admin"===(null===t||void 0===t?void 0:t.role),f=e=>{d(t=>(0,a.A)((0,a.A)({},t),{},{[e]:!t[e]}))};(0,l.useEffect)(()=>{u&&(async()=>{const e=await(0,n.Ym)();A(e);const t=Array.from(new Set((e||[]).map(e=>(e.role||"viewer").toLowerCase()))),s={admin:0,editor:1,viewer:2},a=t.sort((e,t)=>{var a,l;return(null!==(a=s[e])&&void 0!==a?a:99)-(null!==(l=s[t])&&void 0!==l?l:99)||e.localeCompare(t)});g(a),v(a)})()},[u]);return(0,c.jsxs)("div",{children:[j&&(0,c.jsxs)("div",{className:"panel",style:{marginBottom:8},children:[(0,c.jsx)("div",{className:"panel-title",children:"PDF Documentation Export"}),(0,c.jsx)("p",{style:{color:"#8696a0",marginBottom:8,fontSize:12},children:"Generate a comprehensive PDF report of your library statistics and data. Select the sections you want to include:"}),(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:6,marginBottom:8},children:[(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,c.jsx)("input",{type:"checkbox",checked:s.overview,onChange:()=>f("overview"),style:{width:16,height:16,cursor:"pointer"}}),(0,c.jsx)("span",{style:{color:"#e9edef"},children:"Overview Statistics"})]}),(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,c.jsx)("input",{type:"checkbox",checked:s.uploadsPerMonth,onChange:()=>f("uploadsPerMonth"),style:{width:16,height:16,cursor:"pointer"}}),(0,c.jsx)("span",{style:{color:"#e9edef"},children:"Uploads per Month"})]}),(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,c.jsx)("input",{type:"checkbox",checked:s.categoriesDistribution,onChange:()=>f("categoriesDistribution"),style:{width:16,height:16,cursor:"pointer"}}),(0,c.jsx)("span",{style:{color:"#e9edef"},children:"Categories Distribution"})]}),(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,c.jsx)("input",{type:"checkbox",checked:s.topBooks,onChange:()=>f("topBooks"),style:{width:16,height:16,cursor:"pointer"}}),(0,c.jsx)("span",{style:{color:"#e9edef"},children:"Top Books (Downloads)"})]}),(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,c.jsx)("input",{type:"checkbox",checked:s.recentBooks,onChange:()=>f("recentBooks"),style:{width:16,height:16,cursor:"pointer"}}),(0,c.jsx)("span",{style:{color:"#e9edef"},children:"Recent Books"})]}),(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,c.jsx)("input",{type:"checkbox",checked:s.viewsDetails,onChange:()=>f("viewsDetails"),style:{width:16,height:16,cursor:"pointer"}}),(0,c.jsx)("span",{style:{color:"#e9edef"},children:"Book Views Details"})]})]}),(0,c.jsx)("div",{style:{marginTop:6,marginBottom:8},children:(0,c.jsx)("button",{className:"btn",onClick:()=>p(e=>!e),children:u?"Hide":"More"})}),u&&(0,c.jsxs)("div",{className:"panel",style:{marginTop:6},children:[(0,c.jsx)("div",{className:"panel-title",children:"Users Export Options"}),(0,c.jsx)("div",{className:"settings-tree",children:(0,c.jsxs)("div",{className:"settings-branch",children:[(0,c.jsxs)("label",{className:"settings-check",style:{width:"fit-content"},children:[(0,c.jsx)("input",{type:"checkbox",checked:!!s.includeUsers,onChange:()=>d(e=>(0,a.A)((0,a.A)({},e),{},{includeUsers:!e.includeUsers})),style:{width:16,height:16}}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"settings-check-title",children:"Include Users in PDF"}),(0,c.jsx)("div",{className:"muted",children:"Toggle to include a Users section in the report"})]})]}),s.includeUsers&&(0,c.jsxs)("div",{className:"settings-children",children:[(0,c.jsxs)("div",{className:"option-grid",children:[(0,c.jsxs)("label",{className:"option-card ".concat("with_roles"!==s.usersMode?"active":""),children:[(0,c.jsx)("input",{type:"radio",name:"usersMode",checked:"with_roles"!==s.usersMode,onChange:()=>d(e=>(0,a.A)((0,a.A)({},e),{},{usersMode:"names_emails"}))}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"option-title",children:"Users"}),(0,c.jsx)("div",{className:"muted small",children:"Only name and email are included"})]})]}),(0,c.jsxs)("label",{className:"option-card ".concat("with_roles"===s.usersMode?"active":""),children:[(0,c.jsx)("input",{type:"radio",name:"usersMode",checked:"with_roles"===s.usersMode,onChange:()=>d(e=>(0,a.A)((0,a.A)({},e),{},{usersMode:"with_roles"}))}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"option-title",children:"Users with Roles"}),(0,c.jsx)("div",{className:"muted small",children:"Include roles and filter which roles to show"})]})]})]}),"with_roles"===s.usersMode&&(0,c.jsxs)("div",{className:"settings-branch",style:{marginTop:6},children:[(0,c.jsx)("div",{className:"muted",style:{marginBottom:3},children:"Include roles"}),(0,c.jsx)("div",{className:"roles-grid",children:x.map(e=>(0,c.jsxs)("label",{className:"role-chip",children:[(0,c.jsx)("input",{type:"checkbox",checked:y.includes(e),onChange:()=>(e=>{v(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e)}),(0,c.jsx)("span",{className:"cap",children:e})]},e))})]})]})]})})]}),(0,c.jsx)("div",{className:"actions",children:(0,c.jsx)("button",{className:"btn primary",onClick:async()=>{m(!0);try{var e,t,l,r;const d=await(async e=>{try{const t=await fetch(e),s=await t.blob();return await new Promise((e,t)=>{const a=new FileReader;a.onload=()=>e(a.result),a.onerror=t,a.readAsDataURL(s)})}catch(t){return null}})("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALMAAADXCAYAAABRcWC/AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAGCUAABglARPzcqcAABWKSURBVHhe7Z0JcFTVnsYJkIQt7Ak7EcIeQKxHqYxDBIQ8gQCK7A9QBGVcAFEUlLFm9OGbh4OASBCK7RlkzUPZFfAJA1pvZgrrCRLZdwgQICEkYSfM/ZhzrdCcdN/bfbc++X5VX9HnpOm+3f31v/9nj7h7924pQlSgtPiXkLCHZibKQDMTZSg2Z75161ZkRkZGYmFhIQ3vAI888sg/IiIi2IAJgWLNfOrUqQYNGzY8KYrEZhYvXjyiXbt2P4tiqbZt2+4pXbp0oSgSAxRr5qysrLjk5OQtu3fvflhUEQeZP3/+S+3bt98livfRpk2bX8qUKXNHFInAb9fc+fPnazVu3Pjo1atXK4gq4gHmzZs3+tFHH/1f3G7duvXesmXL3r73hxKOXzOfPXu2TpMmTQ7TzN7l888/f6VDhw5/x+3ExMSMEm1smLk4nT59ul6FChUKcDfK+0pNTX1Va7iXlX2WJUF+I/OZM2fqNWvW7CAjc/igGfq1J5544kfcLnGR2tfdRZWdnV2NkTl8NWfOnFdu3rwZKftsVVSxkRn9zDt37uzYs2fPjdevXy8nqkmYMXv27NeTkpJ2iGKphx566HhMTEyeKKqFr7t1IV+OjIy8ibtQ6mjr1q1dZZ+3CvI7uscRKfU4cOBAc4zs4pdXVKmDzOEQInO5cuWu4S6Uepo1a9aYvXv3Jt64cSNK9vmHo6SVEM1cMjRz5sxxqhiak4hKOG+88cZMjCjevHkzSlSFLTQzKTV27NhZGEkMd0PTzOQeiNDhbmiamfwGDD137tx/CVdD08zkPsaNG/dp2EZoWasQYm9GyRZ6Oa5cuRIj84ZXxchMpCDl2L59eydRDAtoZlIsR48ebRxW6YYsXENMMygonNINRmbiF6Qb27Zt6yyKnoZmJgE5duxYo7BIN2ThGmKaQemKiIgoDId0g5GZBEQzSgTSje+//76LqPIkxa40wfo/rMy2e5UJNjqJj48/4cV9IE6ePNnQ9+e1QYMGp6Kjo2+IYtAcPny4ibgZNsyYMWP8qFGjFlSqVClfVHkK181cuXLlK4cOHWpas2bNi6LKM2CzlV9//bWVKN7j559/bod6UQyagQMHrsRjieI9jhw5koAoKIqeA4s1vv7662f79OmzVlR5C5hZJqdyZs3MuTk5OVVl1+C2EhMT9/peb0ZGRivZfc3qzp07pW/fvl2mqPr377+qcePGR3yf00tC7pyXl1dJ9prclidyZu2DLCtuegrtDXogSmomLCNuhgTSK6RWRbVixYpBBw8ebKaZOt2rS9befPPN6Vu3bu0mip6CDUCTaL9W18VNy9ENDlMPGDAAUfqo10yNXWGPHz/+UH5+fiVR5RloZpNgMagTjeJly5YNweJT5NZeM/Tbb7/9nxs2bEgRRc9AM5tk0qRJf8Z2v6JoGzA0diNaunTpH2DoRo0aHfOKqZFqeXGnJJrZJFOnTp3YtGnTQ6JoOzA1DI1c2ktROjMzs67nUg3fFqEuJ3szLly4UFN2DW5L1rOA92TLli3d3FjRjB4PzdAr4uPjj2umxkbk912bk9Jy+9taKjRYdp1uiZHZD2iARUZG3hLFeyBf7tGjxyY0gkSVY6BxiCiNfvlBgwatcDNKI9XA9YiiJ6CZ/fDNN990x8CRKP4GuhIxwOHG5BsYCF+wJUuWDIOhMXqKVET82VGwf3dBQUFFUXQfWbiGmGb8vxISEmDmB65bawDd2r17d1vZ/3FKSDu0L1TkkCFDlmqGRpR84DrtlNdSDUbmAGDXTN9UAyA6R0VFYWNJ19CjdFpa2nA0Du3sA5eBVMOtXwUZNHMAkGoU13tx4sSJeHHTVWBqpB2PPfbY/4gqx8C5N15JNWjmACDyFRd9evXqtX7Lli3JXpi4DkO7kT+/9dZbn6xbt663KLoKzWyA4kb8sC1sSkrKhn379rUUVa6yYMGCUWgUOpluIN2CRNFVaGYDIOLJ8mYAQxf3N6fBdXzxxRfPP/744/8tqhzB6Vy9OGhmA2zatKkHJuWL4gM4MbxtFAwz42RdJw127ty52p44xEnWxQGxa+5+denS5W9a5JMeixEdHX3dS8crYHQyOTl5s+xa7RDel6VLlw6RXYuTYmQ2CKJzcb0amnmicZDRd99919ULxyugy9CqeddGwGv2wuummQ2CdX/+PjD0aMDQXlnbV7t27XNOphpe6G+mmU1Qr169M/4aezC0V/qeFy5cOLJjx447RdF2vNAIpplNgAEU9GyIopRnn332aywrcvtnF78kTs451to9sdeuXSsviq5AM5sAP9v+uukA+qQxmIL5x6LKNZDLi5u2M2HChGlYuS2KrkAzm2T9+vW9AkVnmAh7boiiayBvtmKPDyMgxXL714hmNkn58uWvoR830E/4c889t9rtVczImzt16rRdFG3H7UYgzRwEWMyJifuiKAX5I9INN/NnpEVeaJg5Bc0cBIjOGBEMFJ2RbvTu3XsdVlmLKsfB1gDipvLQzEGCmWItW7bcJ4rFggbh6dOn64sisRGaOUgqVKhw1egoW9++fb9yK93wwvRUp6CZQ6BWrVrnjfTlIn/GZoNuTBWNjY294PaKGKegmUMA3XSBGoI6MDR2VhVFx3C6R8NNaOYQqFixYkH9+vVPGx1p69ev31+d7q5DY5WRmRhi7dq1fRISErBZTEAw5/eZZ55Zg9l1osoRSkqPBs0cIthFHhOQRDEgMDTyZ6wdFFXEImhmC0B0TkpK2mE03YChMSEJhnaih8NL2wHYCc1sAYjOmLxvNN0AMDS67LBFrqiyhStXrlS2ewter0AzWwQag3Xr1s00Gp0B9pvAFleiaAs4UCfczsAOFprZQpBumN3uFjvk29nDkZubW8WprQDMfJHtgGa2kJiYmLw6deqcFUVDYI9j5M/o4bDDdE4aDF+c7Ozs6k7Oo74P2SpXiKuzgxNOMe3YsSMag5itJn3NMmlpSv6uXbt+J3vMUNStW7ctsuezQ3gN1apVy3ZrM0VGZotBdEZjsHnz5gdElSGQP2P/CVG0DAy5OzVBH68hJyenmls7HNHMNoDeDazyEEXDDBkyZJnV+fPHH3/8TocOHf4uiraB16x/aZA6uTLBSRauIaYZoUnLHysnJSX9F/Ywlr3u4qSZIg/HTMgeMxgNHTp0iWYybDkgfT6rtHr16r4vv/zyPNxGupGent5Pdj12ipHZJrQv6RWsSGnRosV+UWUIRDX0P1s1QohV0040yHAkRfXq1bPR4NRTJqQcTkZomtlGkD8jZxVFw8DQVkxKgqm0iOXIWdzaL8CX7du33/X666/PxojjxIkTp6Kbcs2aNc+Iu9iPb6jWxTTDGl2+fLkKejfMphuQ9mW48u233/5e9rhGNGDAgJVRUVHIY6WPb6Ww3xxSi2vXrpV78cUXF+r1s2bNGnPnzp3SsuuzWtJKiGa2TsifW7du/Yvs9QdSKIZ2sltuzpw5r8DIeN6rV6+Wh6G1CH2nfPnyVxcsWDBSS3VsP2rO9TTD7b0WnAD5c1xcXBZ2txdVhsnLy4vBwfDIoc10eWHuh/YBO5JigGrVquVgNThuYw71Z599NuaFF174C+aFjB07dpYTG8S4amY0GvAmeOXUUTvRWvvPJSYmZoiiKWBo5NA//fTT70RVQLTIuGjHjh1Jomg7vo1MrJGEoXHd+GKhQWj3vGpXzYwG0rZt2zrD0KJKWapWrXoZ0VkUTQNDZ2VlxYliQC5dulTDqZ4ERGLZwAwMjf52NAjfe++9Py1atOhFWw3tm3fociJnrlKlymUM/8qeX0VlZ2dXQ2NQ9l4YkfaFyDHSB42ctWvXrltlj2GHiubLvsLnO2LEiEW4n2bugvnz54/SvmSRsvuGKmkl5JSZVW/8+SqU3g0IDeZAhh48ePAyp3oxoOXLlw+SXYeu/Pz8ijjzG/eFoe2au+F6A7CkoX2Bc7Gqu02bNujdMA0m2yMP3bx58+9F1X2gwZWZmVnXqRQDjb5AK1kw1xv97bgf8mecHWhLuiFzOMTIbK9CTQPw3mmGTi76mEgvNKOnOzF8rSs1NfXV4lKMokL3JNIN9Efj1wXddVanG9JKiGa2V1oDrXoo+TOE9w990FrjsBIeE2doR0REIEpK72+HAqUYRYV0AykQ/h/mb1h9qA/TDJfAPAbsV6cZemcw/c8Ak+FxZnaTJk0O//DDD/+MFET7UB3rW0aKYaZbFekGenTwfzDUjnTD0nEGX3frYmR2Rjk5OVXbtWv3D9n7Y0bo6bD78/KV0RSjqJBujBw5coGeblgZnRmZXQb9zzVr1rwoikFz+fLlqk6vwsavC6KzKBoCo6EzZ858A5ux45cE0dmqyfw0swdYsWLFIKQbohgWYJAk2JFbTOTXN5384IMP/m3VqlUDxJ9CQxauIaYZzgoDKsFM5ndLGChB74nstRgR+tvRYMVjTZ8+fXxhYWGE7H5mxMjsETCkj8k4Dz/88G5R5WmQGmEYWxRNowWyXDQG9eiM3UpDTTdoZg+BHLRGjRqXRNGzwIBaJAy51+TfNbBvCHplxo8fP2PlypUDxZ+Cgmb2GMuWLRvi5fwZ2+Ompqa+hsOHRFXQ6NEZuTdW14TcGPTNO3QxZ3ZPFy9erIH8WfaeuS3kyrdu3Soru+5ghK5JjAyirYDuxbS0tGGy+xkRI7MHQaqB/Bk7i4oqz6DnuaIYMuia/PTTT8cNGjRoBboXQ4nONLNHQf4MQ3vpCAekGFoEtHyEUV/4i5HQjz76aPLy5csHiz+ZwzdU62Ka4Q15KeWYPXv2awUFBViOJb3WUISuyWHDhqXheaZNm/aWFp3LyO7nT4zMHgcpx1dffdXX7ZQDJ73i/BasHhFVloKuSURo3A42OtPMYYBu6CeffBIR2hVmzJgxvlu3bpi2ahtIMyBsHoPc2eg5i78hC9cQ0wzvCe+VGykHehrWrFnTR3ZNVgrTYrGdGJ5Ti9TZixcvfkF2v+LEyBxGYNQNq7ydTDnQc4F+ZbujMkCjV28IIjpjIpL4kzFkDocYmb0rvGedOnXaJntPrRameVrZrxxIaAjq0RlzNsw0BBmZwxBEaMw0szuHxpq9Bg0anLKyXzkQaAiiLxvPPWXKlH/FiKj4U0Bo5jAFZ2Knp6f3t6sfGgaeM2fOq0899dTfRJVjTJ48+SNsxIgjJdAQFNWBkYVriGlGeMiulMPp9MJX48aNm4nr0PLoS3Pnzh1t5FoYmcMcO1IOjPTFx8efcDK98EXfKgHRGZHaSL8zzawAesrRuXPnbVYYcNq0aRO6dOnyvSi6Al6Hvh/HyJEjF3bv3v2be3/whyxcQ06lGZg1JXt+yryysrJijx492kgzIvJc6XtuRFqj7+SmTZu6y57DKWEY//nnn/8Lrqd27dpnlyxZMlR2v6JyPTJjhxvtQhxbHq8yiNCNGjU6hp9kRGlRbZpTp041GD58eNrGjRt7mh6FswiMemJGHW5jB1GtbRB77w9+cNXM2NmyR48emzD1T1QRC0DXFhbJhmJoLTLWxP7KzZo1O4izWUS145haNOsbqnU5kWbgZKUff/zxn4KZIUUF1vnz5+NCTTkgrZF5Yd26db1kz2Gn0FOj/UJ8gWvQIvVF7CDqzyvSSsgJM2NlgdlNRChzgqG1CI3GnPQzMCoYev369SlWrKI2o/Hjx0/XryHQfA1X0wztAiIwBi+KxAasSDkA0o4RI0YsLm73UbvQIvFvq05Gjx49z9/aQ9dz5pSUlA00tL3ohg51NA+GhkTRcTC0joahKD6Ib6jW5VTOvH379ifdHGkqSTp37lytUHPoOnXqZDqZP48ZM2aW/tyxsbFZnk0ztHy5/IQJE6YhQosqYiOYXomJO127dv1OVJnm7NmzdTCIgQ3TNQM52qWK7jl/57q4amb0Ye7Zs6dt0byI2AsM/eWXXw4NxdAwFQzdvHnzA2vXrsWkfcdMjeVb4uYDuGpmrPnauXNnR0zKFlXEAWDoJUuWDAtlyBqGPnToUNOXXnppfsuWLffB1OJPruGqmbGiAGfj4V9RRRwCR5otXbr0D6FEaABTHzhwoDlMbYehzQyauGpm/DwhbxZF4jAwNFKO/fv3t0hOTsbRxEEDU8PQLVq02G/laaymUhi0AmXifOaSJa1hV3vfvn0trDhvG70OWpTuLXseM5oyZcpkDJQUfWwspZLdF3I1MhPvgCiNqJqWljbciigNiWLQaAG1vpkxiGLNzDy2ZAJTW2Ho999//49oGELBph3+ei6kyMI1dObMmbpMM0qukHZkZGS00ky9WfbZmVFcXNz5Vq1aZaxevbqv7LlkQoqBJVO+j/XJJ5+8Kbs/JK3EC2nduvUvWkvS1jPlaGbvSzf1008/jZUe0s/RqJBLw9Tp6en9ZM+lC0bGOYGyxzBt5hMnTjSUPZDVopnDRzC1FYaGdFPrWrVqVX88x4cffvg+yjIjT5w48c/4UmEFiu+16ZJWnjx5soHdKQZEM4eXMjMz6+zduzfRKlPrgrkTExP3FheNIWxyLrumopJW0syUPyFKw9Q9evTYKPtcrdY777wz1V9E1iWtpJkpI3LC1JMmTfoP/WzwQJJW0syUGSH92LNnTxuoZ8+eG2SfdTBCnmzUyJC0kmamghWiNUydkpKCFSHSz92I3n333T+ZMTIkraSZqVClmxrq3bv3WtnnLxNMjP9j1sjQvcWJvmDfBCwxt/tgcc3MuYcPH26CLaZEFVEQ7HthdAPEhISEIzhbWxRNQTMTZeBEI6IMNDNRBpqZKAPNTJSBZibKQDMTZaCZiTLQzEQZaGaiDDQzUQaamSgDzUyUgWYmykAzE2WgmYky0MxEGWhmogw0M1EGmpkoA81MlIFmJspAMxNloJmJMtDMRBloZqIMNDNRBpqZKAPNTJSBZibKQDMTZaCZiTLQzEQZaGaiDDQzUQaamSgDzUyUgWYmykAzE2WgmYky0MxEGWhmogw0M1EGmpkoA81MlIFmJspAMxNloJmJMtDMRBlcNfPdu3cjxE1CQsZVM+fn51eioYlVuGbmihUrFqxatWpAlSpVckUVISHhmpkjIyNv9enTZ21UVNRNUUVISLhmZqQXubm5VUSRkJBxNWcmxEpoZqIMNDNRBpqZKAPNTJSBZibKQDMTZaCZiTLQzEQZaGaiDDQzUQaamSgDzUyUgWYmykAzE2WgmYky0MxEGWhmogw0M1EGqZkLCwtLX79+vZwoEhIWSM0cGxt7ITU19TVRtAUsZuWeGcRKIjRDiZsPgn0tsrKy4saMGfOZqAqJefPmjY6JicnDbWw10KtXr/XR0dE37v2RkBDxa2adlStXDrx9+3ZZUQwKmLZfv35/FUVCLMeQmQkJB9ibQZSBZibKQDMTRShV6v8AtaacfahMlxwAAAAASUVORK5CYII="),h=await(0,n.YK)(),m=s.viewsDetails?await(0,n.wL)():[],u=s.includeUsers?b.length?b:await(0,n.Ym)():[],p=new i.uE;let x=20;const g=()=>{if(!d)return;const e=p.internal.pageSize.width,t=p.internal.pageSize.height,s=Math.min(.25*e,60),a=s,l=(e-s)/2,i=(t-a)/2;try{const e=p.GState&&new p.GState({opacity:.06});e&&p.setGState&&p.setGState(e),p.addImage(d,"PNG",l,i,s,a,void 0,"FAST")}catch(o){}try{p.setGState&&p.setGState(new p.GState({opacity:1}))}catch(n){}};g(),p.setFontSize(24),p.setFont("helvetica","bold"),p.setTextColor(0,168,132);try{d&&p.addImage(d,"PNG",15,x-6,22,22)}catch(c){}p.text("Paltech-Elib Documentation",105,x,{align:"center"}),p.setFontSize(10),p.setFont("helvetica","normal"),p.setTextColor(100),p.text("Generated on: ".concat((new Date).toLocaleString()),105,x+8,{align:"center"}),p.setDrawColor(0,168,132),p.setLineWidth(.5),p.line(15,x+12,195,x+12),p.setTextColor(0),x=40;const v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e>p.internal.pageSize.height-t?(p.addPage(),g(),20):e},A={theme:"striped",headStyles:{fillColor:[0,168,132],textColor:255},styles:{fontSize:10,cellPadding:3,overflow:"linebreak"},margin:{left:15,right:15}};if(s.overview&&h.counts){x=v(x),p.setFontSize(16),p.setFont("helvetica","bold"),p.text("Overview Statistics",15,x);const e=x+6;(0,o.Ay)(p,{startY:e,head:[["Metric","Value"]],body:[["Total Books",h.counts.books||0],["Total Users",h.counts.users||0],["Total Downloads",h.counts.downloads||0],["Total Views",h.counts.views||0]],theme:"grid",headStyles:{fillColor:[0,168,132],textColor:255,fontStyle:"bold"},styles:{fontSize:10,cellPadding:3,overflow:"linebreak"},margin:{left:15,right:15}}),x=p.lastAutoTable.finalY+15}if(s.uploadsPerMonth&&(null===(e=h.monthly)||void 0===e?void 0:e.length)>0){const e=h.monthly.filter(e=>(e.uploads||0)>0);if(e.length>0){x=v(x),p.setFontSize(16),p.setFont("helvetica","bold"),p.text("Uploads per Month",15,x);const t=x+6;(0,o.Ay)(p,(0,a.A)({startY:t,head:[["Month","Uploads"]],body:e.sort((e,t)=>(t.uploads||0)-(e.uploads||0)).map(e=>[e.month,e.uploads||0])},A)),x=p.lastAutoTable.finalY+15}}if(s.categoriesDistribution&&(null===(t=h.categories)||void 0===t?void 0:t.length)>0){const e=h.categories.filter(e=>(e.count||0)>0);if(e.length>0){x=v(x),p.setFontSize(16),p.setFont("helvetica","bold"),p.text("Categories Distribution",15,x);const t=x+6;(0,o.Ay)(p,(0,a.A)({startY:t,head:[["Category","Count"]],body:e.sort((e,t)=>(t.count||0)-(e.count||0)).map(e=>[e.name,e.count||0])},A)),x=p.lastAutoTable.finalY+15}}if(s.topBooks&&(null===(l=h.top)||void 0===l?void 0:l.length)>0){const e=h.top.filter(e=>(e.downloads||0)>0);if(e.length>0){x=v(x),p.setFontSize(16),p.setFont("helvetica","bold"),p.text("Top Books (Downloads)",15,x);const t=x+6;(0,o.Ay)(p,(0,a.A)({startY:t,head:[["Title","Downloads"]],body:e.sort((e,t)=>(t.downloads||0)-(e.downloads||0)).map(e=>[e.title||"Untitled",e.downloads||0])},A)),x=p.lastAutoTable.finalY+15}}if(s.recentBooks&&(null===(r=h.recent)||void 0===r?void 0:r.length)>0){x=v(x),p.setFontSize(16),p.setFont("helvetica","bold"),p.text("Recent Books",15,x);const e=x+6;(0,o.Ay)(p,(0,a.A)({startY:e,head:[["Title","Author","Date Added"]],body:h.recent.slice(0,10).map(e=>[e.title||"Untitled",e.author||"Unknown",new Date(e.created_at).toLocaleDateString()])},A)),x=p.lastAutoTable.finalY+15}if(s.viewsDetails&&m.length>0){x=v(x),p.setFontSize(16),p.setFont("helvetica","bold"),p.text("Book Views Details",15,x);const e=x+6;(0,o.Ay)(p,(0,a.A)({startY:e,head:[["Book Title","Total Views","Unique Users"]],body:m.slice(0,20).map(e=>[e.book_title||"Unknown",e.total_views||0,e.unique_users||0])},A)),x=p.lastAutoTable.finalY+15}if(s.includeUsers&&u.length>0){x=v(x),p.setFontSize(16),p.setFont("helvetica","bold"),p.text("Users",15,x);const e=x+6,t={admin:0,editor:1,viewer:2},l=e=>(e||"viewer").toLowerCase();let i=u;if("with_roles"===s.usersMode){const e=new Set(y);i=i.filter(t=>e.has(l(t.role)))}i=[...i].sort((e,s)=>{var a,i;const o=l(e.role),n=l(s.role),r=(null!==(a=t[o])&&void 0!==a?a:99)-(null!==(i=t[n])&&void 0!==i?i:99);return 0!==r?r:(e.display_name||"").localeCompare(s.display_name||"")}),"with_roles"===s.usersMode?(0,o.Ay)(p,(0,a.A)((0,a.A)({startY:e,head:[["Name","Email","Role"]],body:i.map(e=>[e.display_name||"\u2014",e.email||"\u2014",e.role||"viewer"])},A),{},{columnStyles:{1:{cellWidth:90}}})):(0,o.Ay)(p,(0,a.A)((0,a.A)({startY:e,head:[["Name","Email"]],body:i.map(e=>[e.display_name||"\u2014",e.email||"\u2014"])},A),{},{columnStyles:{1:{cellWidth:110}}})),x=p.lastAutoTable.finalY+15}const j=p.internal.getNumberOfPages();for(let e=1;e<=j;e++)p.setPage(e),p.setFontSize(9),p.setTextColor(150),p.text("Paltech-Elib | Page ".concat(e," of ").concat(j),p.internal.pageSize.width/2,p.internal.pageSize.height-10,{align:"center"});p.save("Paltech-Elib-Report-".concat((new Date).toISOString().split("T")[0],".pdf")),N({type:"success",message:"PDF report downloaded."})}catch(d){console.error("Error generating PDF:",d),N({type:"error",message:"Failed to generate PDF. Please try again."})}finally{m(!1)}},disabled:h||0===Object.values(s).filter(e=>!0===e).length,children:h?"Generating PDF...":"Download PDF Report"})})]}),(0,c.jsxs)("div",{className:"grid-2",children:[(0,c.jsxs)("div",{className:"panel",children:[(0,c.jsx)("div",{className:"panel-title",children:"General"}),(0,c.jsx)("label",{className:"label",children:"App Name"}),(0,c.jsx)("input",{className:"input",placeholder:"eLib"}),(0,c.jsx)("label",{className:"label",style:{marginTop:6},children:"Storage Bucket"}),(0,c.jsx)("input",{className:"input",placeholder:"books"}),(0,c.jsx)("div",{className:"actions",style:{marginTop:6},children:(0,c.jsx)("button",{className:"btn primary",children:"Save"})})]}),(0,c.jsxs)("div",{className:"panel",children:[(0,c.jsx)("div",{className:"panel-title",children:"Account Config"}),(0,c.jsx)("label",{className:"label",children:"Project URL"}),(0,c.jsx)("input",{className:"input",value:"https://wuwlnawtuhjoubfkdtgc.supabase.co",readOnly:!0}),(0,c.jsx)("label",{className:"label",style:{marginTop:6},children:"Public Key"}),(0,c.jsx)("input",{className:"input",value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1d2xuYXd0dWhqb3ViZmtkdGdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0MTM5NzAsImV4cCI6MjA4MDk4OTk3MH0.fYzq5xT7ym02Ck1_WyoOHtt-QsRArj1CYqPBYLQula4".slice(0,8)+"\u2022\u2022\u2022",readOnly:!0}),(0,c.jsx)("div",{style:{marginTop:4,color:"#8696a0",fontSize:11},children:"Set values in .env file"})]}),(0,c.jsxs)("div",{className:"panel",children:[(0,c.jsx)("div",{className:"panel-title",children:"Activity Logs"}),(0,c.jsx)("div",{style:{color:"#8696a0"},children:"No logs yet"})]})]})]})}}}]);
//# sourceMappingURL=933.921bf051.chunk.js.map