{"version":3,"file":"static/js/173.68bdf315.chunk.js","mappings":"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","sources":["SomaLux/Books/Admin/universityPrefillApi.js","SomaLux/Books/Admin/pages/Upload.jsx"],"sourcesContent":["import { supabase } from '../supabaseClient';\n\n// API Configuration\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\nconst USE_BACKEND_PROXY = true; // Set to false to use direct API calls\n\n/**\n * Search for university names for autocomplete\n */\nexport async function searchUniversityNames(query, limit = 10) {\n  try {\n    // Check cache first\n    let { data, error } = await supabase\n      .rpc('search_university_names', { p_query: query, p_limit: limit });\n\n    if (error) throw error;\n    if (data?.length) return data;\n\n    // Try Wikipedia/Wikidata search as primary method (more reliable, no API key needed)\n    const wikiResults = await searchWikipediaUniversities(query, limit);\n    if (wikiResults.length > 0) {\n      // Cache results\n      await Promise.all(wikiResults.map(uni => \n        cacheUniversityPrefillData(uni.name, uni, 'wikipedia')\n      ));\n      return wikiResults;\n    }\n\n    // Try backend proxy for Google Knowledge Graph (if enabled)\n    if (USE_BACKEND_PROXY) {\n      try {\n        const response = await fetch(`${API_URL}/api/university/search?query=${encodeURIComponent(query)}&limit=${limit}`);\n        \n        if (response.ok) {\n          const data = await response.json();\n          const universities = data.universities || [];\n          \n          // Cache results\n          if (universities.length > 0) {\n            await Promise.all(universities.map(uni => \n              cacheUniversityPrefillData(uni.name, uni, 'google_proxy')\n            ));\n          }\n          \n          return universities;\n        }\n      } catch (proxyError) {\n        console.warn('Backend proxy unavailable:', proxyError.message);\n      }\n    }\n\n    return [];\n  } catch (error) {\n    console.error('Error searching university names:', error);\n    return [];\n  }\n}\n\n/**\n * Search for universities using Wikipedia API (more reliable, no API key needed)\n */\nasync function searchWikipediaUniversities(query, limit = 10) {\n  try {\n    const searchUrl = `https://en.wikipedia.org/w/api.php?action=opensearch&search=${encodeURIComponent(query + ' university')}&limit=${limit}&namespace=0&format=json&origin=*`;\n    const response = await fetch(searchUrl);\n    \n    if (!response.ok) return [];\n    \n    const data = await response.json();\n    // data[0] = query, data[1] = titles, data[2] = descriptions, data[3] = urls\n    const titles = data[1] || [];\n    const descriptions = data[2] || [];\n    const urls = data[3] || [];\n    \n    return titles\n      .filter(title => title.toLowerCase().includes('university') || title.toLowerCase().includes('college'))\n      .map((title, index) => ({\n        name: title,\n        description: descriptions[index] || '',\n        website_url: urls[index] || '',\n      }));\n  } catch (error) {\n    console.error('Error searching Wikipedia:', error);\n    return [];\n  }\n}\n\n/**\n * Get prefill data for a university by name from cache\n */\nexport async function getUniversityPrefillData(universityName) {\n  try {\n    const { data, error } = await supabase\n      .rpc('get_university_prefill_data', {\n        p_university_name: universityName,\n      });\n\n    if (error) throw error;\n    return data;\n  } catch (error) {\n    console.error('Error fetching prefill data:', error);\n    return null;\n  }\n}\n\n/**\n * Fetch university data from Google Knowledge Graph (via backend proxy)\n */\nexport async function fetchUniversityDataFromGoogle(universityName) {\n  if (USE_BACKEND_PROXY) {\n    try {\n      const response = await fetch(`${API_URL}/api/university/details?name=${encodeURIComponent(universityName)}`);\n      \n      if (response.ok) {\n        const data = await response.json();\n        return {\n          name: data.university.name || universityName,\n          description: data.university.description || '',\n          website_url: data.university.website_url || '',\n          location: data.university.location || '',\n          established: null,\n          student_count: null,\n          cover_images: data.university.image ? [data.university.image] : [],\n        };\n      }\n    } catch (error) {\n      console.error('Error fetching from Google via proxy:', error);\n    }\n  }\n  \n  return null;\n}\n\n/**\n * Fetch university summary from Wikipedia REST API\n */\nexport async function fetchUniversityDataFromWikipedia(universityName) {\n  try {\n    const url = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(universityName)}`;\n    const res = await fetch(url);\n    if (!res.ok) return null;\n    const json = await res.json();\n\n    return {\n      name: json.title || universityName,\n      description: json.extract || '',\n      website_url: '',\n      location: '',\n      established: null,\n      student_count: null,\n      cover_images: json.thumbnail?.source ? [json.thumbnail.source] : [],\n    };\n  } catch (e) {\n    console.error('Error fetching from Wikipedia REST:', e);\n    return null;\n  }\n}\n\n/**\n * Fetch university data from Wikidata\n */\nexport async function fetchUniversityDataFromWikidata(universityName) {\n  try {\n    const sparqlQuery = `\n      SELECT ?item ?itemLabel ?locationLabel ?established ?studentCount ?website\n      WHERE {\n        ?item wdt:P31/wdt:P279* wd:Q3918;\n              rdfs:label ?itemLabel.\n        OPTIONAL { ?item wdt:P131 ?location. }\n        OPTIONAL { ?item wdt:P571 ?established. }\n        OPTIONAL { ?item wdt:P2196 ?studentCount. }\n        OPTIONAL { ?item wdt:P856 ?website. }\n        FILTER(CONTAINS(LCASE(?itemLabel), LCASE(\"${universityName}\")))\n        FILTER(LANG(?itemLabel) = \"en\")\n        SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\". }\n      }\n      LIMIT 1\n    `;\n    const url = `https://query.wikidata.org/sparql?query=${encodeURIComponent(sparqlQuery)}&format=json`;\n    const response = await fetch(url);\n    if (!response.ok) return null;\n\n    const data = await response.json();\n    const binding = data.results.bindings[0];\n\n    if (!binding) return null;\n\n    return {\n      name: binding.itemLabel.value,\n      description: '',\n      website_url: binding.website?.value || '',\n      location: binding.locationLabel?.value || '',\n      established: binding.established?.value ? new Date(binding.established.value).getFullYear() : null,\n      student_count: binding.studentCount?.value || null,\n      cover_images: [],\n    };\n  } catch (error) {\n    console.error('Error fetching from Wikidata:', error);\n    return null;\n  }\n}\n\n/**\n * Fetch Wikimedia Commons images for a university\n */\nexport async function fetchWikimediaImages(universityName) {\n  try {\n    const title = (universityName || '').trim().replace(/\\s+/g, '_');\n    if (!title) return [];\n\n    const listUrl = `https://commons.wikimedia.org/w/api.php?action=query&format=json&origin=*&prop=images&titles=${encodeURIComponent(title)}`;\n    const listRes = await fetch(listUrl);\n    if (!listRes.ok) return [];\n    const listJson = await listRes.json();\n\n    const pages = listJson?.query?.pages ? Object.values(listJson.query.pages) : [];\n    const images = pages[0]?.images || [];\n    if (!images.length) return [];\n\n    const fileTitles = images\n      .map((img) => img?.title)\n      .filter(Boolean)\n      .slice(0, 50)\n      .join('|');\n\n    if (!fileTitles) return [];\n\n    const infoUrl = `https://commons.wikimedia.org/w/api.php?action=query&format=json&origin=*&prop=imageinfo&iiprop=url&titles=${encodeURIComponent(fileTitles)}`;\n    const infoRes = await fetch(infoUrl);\n    if (!infoRes.ok) return [];\n    const infoJson = await infoRes.json();\n\n    const filePages = infoJson?.query?.pages ? Object.values(infoJson.query.pages) : [];\n    const urls = filePages\n      .map((p) => p?.imageinfo?.[0]?.url)\n      .filter((u) => typeof u === 'string' && /\\.(jpg|jpeg|png|webp)$/i.test(u));\n\n    const prioritized = urls.sort((a, b) => {\n      const deprioritize = (s) => /logo|seal|coat_of_arms|emblem/i.test(s) ? 1 : 0;\n      return deprioritize(a) - deprioritize(b);\n    });\n\n    return prioritized.slice(0, 5);\n  } catch (e) {\n    console.error('Error fetching Wikimedia images:', e);\n    return [];\n  }\n}\n\n/**\n * Fetch images from Unsplash (via backend proxy if enabled)\n */\nexport async function fetchUnsplashImages(universityName) {\n  if (USE_BACKEND_PROXY) {\n    try {\n      const response = await fetch(`${API_URL}/api/university/images?query=${encodeURIComponent(universityName)}`);\n      \n      if (response.ok) {\n        const data = await response.json();\n        return data.images?.map(img => img.url) || [];\n      }\n    } catch (error) {\n      console.error('Error fetching Unsplash images via proxy:', error);\n    }\n  }\n  \n  return [];\n}\n\n/**\n * Download image from URL and convert to File object\n */\nexport async function downloadImageAsFile(imageUrl, fileName) {\n  try {\n    const response = await fetch(imageUrl);\n    if (!response.ok) throw new Error('Failed to download image');\n\n    const blob = await response.blob();\n    const file = new File([blob], fileName, { type: blob.type });\n    return file;\n  } catch (error) {\n    console.error('Error downloading image:', error);\n    return null;\n  }\n}\n\n/**\n * Cache university prefill data\n */\nexport async function cacheUniversityPrefillData(universityName, data, source = 'manual') {\n  try {\n    const { error } = await supabase\n      .from('university_prefill_cache')\n      .upsert({\n        university_name: universityName,\n        data: data,\n        source: source,\n        updated_at: new Date().toISOString(),\n      });\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error caching prefill data:', error);\n    return false;\n  }\n}\n\n/**\n * Upload multiple images for a university\n */\nexport async function uploadUniversityImages(universityId, imageFiles) {\n  try {\n    const uploadedImages = [];\n    const bucket = 'university-covers';\n\n    for (let i = 0; i < imageFiles.length; i++) {\n      const file = imageFiles[i];\n      const fileExt = file.name.split('.').pop();\n      const fileName = `${universityId}/image_${i + 1}_${Date.now()}.${fileExt}`;\n\n      const { error: uploadError } = await supabase.storage\n        .from(bucket)\n        .upload(fileName, file, {\n          cacheControl: '3600',\n          upsert: false,\n        });\n\n      if (uploadError) {\n        console.error('Error uploading image:', uploadError);\n        continue;\n      }\n\n      const { data: urlData } = supabase.storage\n        .from(bucket)\n        .getPublicUrl(fileName);\n\n      uploadedImages.push({\n        url: urlData.publicUrl,\n        fileName: fileName,\n      });\n    }\n\n    return uploadedImages;\n  } catch (error) {\n    console.error('Error uploading multiple images:', error);\n    throw error;\n  }\n}\n\n/**\n * Add image record to university_images table\n */\nexport async function addUniversityImage(universityId, imageUrl, caption = null, isPrimary = false, displayOrder = 0) {\n  try {\n    const { data, error } = await supabase\n      .rpc('add_university_image', {\n        p_university_id: universityId,\n        p_image_url: imageUrl,\n        p_caption: caption,\n        p_is_primary: isPrimary,\n        p_display_order: displayOrder,\n      });\n\n    if (error) throw error;\n    return data;\n  } catch (error) {\n    console.error('Error adding university image:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all images for a university\n */\nexport async function getUniversityImages(universityId) {\n  try {\n    const { data, error } = await supabase\n      .from('university_images')\n      .select('*')\n      .eq('university_id', universityId)\n      .order('is_primary', { ascending: false })\n      .order('display_order', { ascending: true });\n\n    if (error) throw error;\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching university images:', error);\n    throw error;\n  }\n}\n\n/**\n * Set image as primary\n */\nexport async function setPrimaryUniversityImage(imageId) {\n  try {\n    const { error } = await supabase\n      .rpc('set_primary_university_image', {\n        p_image_id: imageId,\n      });\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error setting primary image:', error);\n    return false;\n  }\n}\n\n/**\n * Delete university image\n */\nexport async function deleteUniversityImage(imageId, imageUrl) {\n  try {\n    const urlParts = imageUrl.split('/');\n    const bucket = 'university-covers';\n    const filePath = urlParts.slice(urlParts.indexOf(bucket) + 1).join('/');\n\n    const { error: storageError } = await supabase.storage\n      .from(bucket)\n      .remove([filePath]);\n\n    if (storageError) {\n      console.error('Error deleting from storage:', storageError);\n    }\n\n    const { error: dbError } = await supabase\n      .from('university_images')\n      .delete()\n      .eq('id', imageId);\n\n    if (dbError) throw dbError;\n    return true;\n  } catch (error) {\n    console.error('Error deleting university image:', error);\n    throw error;\n  }\n}\n\n/**\n * Main auto-fill function triggered on tab/input\n */\nexport async function autoFillUniversityData(universityName) {\n  try {\n    // Check cache first\n    let data = await getUniversityPrefillData(universityName);\n    if (data) return data;\n\n    // Prefer Wikipedia + Wikidata for accuracy (no API keys needed)\n    const wikiSummary = await fetchUniversityDataFromWikipedia(universityName);\n    const wikidata = await fetchUniversityDataFromWikidata(universityName);\n\n    if (wikiSummary || wikidata) {\n      const merged = {\n        name: (wikiSummary?.name || wikidata?.name || universityName) ?? universityName,\n        description: wikiSummary?.description || '',\n        website_url: wikidata?.website_url || '',\n        location: wikidata?.location || '',\n        established: wikidata?.established ?? null,\n        student_count: wikidata?.student_count ?? null,\n        cover_images: wikiSummary?.cover_images || [],\n      };\n      data = merged;\n    }\n\n    // Try Google as last resort (via proxy if enabled)\n    if (!data) {\n      data = await fetchUniversityDataFromGoogle(universityName);\n    }\n\n    // Fetch images\n    if (data && (!data.cover_images || data.cover_images.length === 0)) {\n      const commons = await fetchWikimediaImages(data.name || universityName);\n      if (commons.length) {\n        data.cover_images = commons;\n      } else {\n        const unsplash = await fetchUnsplashImages(data.name || universityName);\n        data.cover_images = unsplash;\n      }\n    }\n\n    // Cache the result\n    if (data) {\n      await cacheUniversityPrefillData(universityName, data, 'wikipedia_wikidata');\n    }\n\n    return (\n      data || {\n        name: universityName,\n        description: '',\n        website_url: '',\n        location: '',\n        established: null,\n        student_count: null,\n        cover_images: [],\n      }\n    );\n  } catch (error) {\n    console.error('Error auto-filling university data:', error);\n    return {\n      name: universityName,\n      description: '',\n      website_url: '',\n      location: '',\n      established: null,\n      student_count: null,\n      cover_images: [],\n    };\n  }\n}\n\n/**\n * Get all cached universities for dropdown/autocomplete\n */\nexport async function getAllCachedUniversities() {\n  try {\n    const { data, error } = await supabase\n      .from('university_prefill_cache')\n      .select('university_name')\n      .order('university_name');\n\n    if (error) throw error;\n    return data?.map(u => u.university_name) || [];\n  } catch (error) {\n    console.error('Error fetching cached universities:', error);\n    return [];\n  }\n}\n\n/**\n * Debounce utility\n */\nfunction debounce(func, wait) {\n  let timeout;\n  return (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}\n\n/**\n * Frontend integration for auto-fill\n */\nexport function setupAutoFill(inputElement, resultContainer) {\n  inputElement.addEventListener(\n    'input',\n    debounce(async () => {\n      const query = inputElement.value.trim();\n      if (query.length < 3) return;\n\n      const suggestions = await searchUniversityNames(query);\n      console.log('Suggestions:', suggestions);\n      \n      const datalist = document.createElement('datalist');\n      datalist.id = 'university-suggestions';\n      suggestions.forEach(s => {\n        const option = document.createElement('option');\n        option.value = s.name;\n        datalist.appendChild(option);\n      });\n      inputElement.setAttribute('list', 'university-suggestions');\n      inputElement.parentNode.appendChild(datalist);\n    }, 300)\n  );\n\n  inputElement.addEventListener('keydown', async (event) => {\n    if (event.key === 'Tab') {\n      event.preventDefault();\n      const universityName = inputElement.value.trim();\n      if (!universityName) return;\n\n      const data = await autoFillUniversityData(universityName);\n      if (data) {\n        resultContainer.innerHTML = `\n          <h3>${data.name}</h3>\n          <p>${data.description || 'No description available'}</p>\n          <a href=\"${data.website_url || '#'}\" target=\"_blank\">Website</a>\n          <p>Location: ${data.location || 'N/A'}</p>\n          <p>Established: ${data.established || 'N/A'}</p>\n          <p>Students: ${data.student_count || 'N/A'}</p>\n          <div>\n            ${data.cover_images\n              .map(img => `<img src=\"${img}\" alt=\"${data.name} campus\" width=\"200\" style=\"margin-right: 10px;\" />`)\n              .join('')}\n          </div>\n        `;\n      }\n    }\n  });\n}","import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { createBook, fetchCategories } from '../api';\nimport { createUniversity } from '../campusApi';\nimport { createPastPaper, getUniversitiesForDropdown } from '../pastPapersApi';\nimport { \n  autoFillUniversityData, \n  searchUniversityNames,\n  uploadUniversityImages,\n  addUniversityImage,\n  downloadImageAsFile,\n  fetchWikimediaImages,\n  fetchUnsplashImages\n} from '../universityPrefillApi';\nimport { FiUpload, FiFile, FiImage, FiBook, FiMapPin, FiFileText, FiSearch, FiX, FiLoader } from 'react-icons/fi';\nimport { useAdminUI } from '../AdminUIContext';\n\n// Simple debounce hook\nfunction useDebounce(callback, delay) {\n  const timeoutRef = useRef(null);\n  return useCallback((...args) => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    timeoutRef.current = setTimeout(() => callback(...args), delay);\n  }, [callback, delay]);\n}\n\n// Add styles for drag and drop effect and tabs\nconst dropzoneStyles = `\n  .dropzone {\n    border: 2px dashed #374151;\n    border-radius: 8px;\n    padding: 20px;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.3s ease;\n  }\n  .dropzone:hover {\n    border-color: #00a884;\n    background: rgba(0, 168, 132, 0.05);\n  }\n  .dropzone.drag-over {\n    border-color: #00a884;\n    background: rgba(0, 168, 132, 0.1);\n  }\n  .upload-tabs {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 20px;\n    border-bottom: 2px solid #374151;\n  }\n  .upload-tab {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 12px 24px;\n    background: transparent;\n    border: none;\n    color: #8696a0;\n    cursor: pointer;\n    font-size: 16px;\n    font-weight: 500;\n    transition: all 0.3s ease;\n    border-bottom: 3px solid transparent;\n    margin-bottom: -2px;\n  }\n  .upload-tab:hover {\n    color: #e9edef;\n    background: rgba(0, 168, 132, 0.05);\n  }\n  .upload-tab.active {\n    color: #00a884;\n    border-bottom-color: #00a884;\n  }\n  @keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n  .spin {\n    animation: spin 1s linear infinite;\n  }\n`;\n\nconst Upload = ({ userProfile }) => {\n  // Add style tag to document\n  useEffect(() => {\n    const styleTag = document.createElement('style');\n    styleTag.innerHTML = dropzoneStyles;\n    document.head.appendChild(styleTag);\n    return () => styleTag.remove();\n  }, []);\n\n  const [activeTab, setActiveTab] = useState('books'); // 'books', 'campus', 'pastpapers'\n  const navigate = useNavigate();\n  const { showToast } = useAdminUI();\n  \n  // Books state\n  const [pdf, setPdf] = useState(null);\n  const [cover, setCover] = useState(null);\n  const [categories, setCategories] = useState([]);\n  const [bookForm, setBookForm] = useState({ \n    title: '', author: '', description: '', category_id: '', \n    year: '', language: '', isbn: '', pages: '', publisher: '' \n  });\n\n  // Campus state\n  const [campusImages, setCampusImages] = useState([]);\n  const [campusForm, setCampusForm] = useState({ \n    name: '', description: '', website_url: '', location: '', \n    established: '', student_count: '' \n  });\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [isAutoFilling, setIsAutoFilling] = useState(false);\n\n  // Past Papers state\n  const [paperPdf, setPaperPdf] = useState(null);\n  const [universities, setUniversities] = useState([]);\n  const [paperForm, setPaperForm] = useState({ \n    university_id: '', faculty: '', unit_code: '', \n    unit_name: '', year: '', semester: '', exam_type: '' \n  });\n\n  const [busy, setBusy] = useState(false);\n\n  useEffect(() => { \n    (async () => { \n      try { \n        setCategories(await fetchCategories()); \n        setUniversities(await getUniversitiesForDropdown());\n      } catch {} \n    })(); \n  }, []);\n\n  const onBookChange = (k) => (e) => setBookForm((f) => ({ ...f, [k]: e.target.value }));\n  const onCampusChange = (k) => (e) => {\n    setCampusForm((f) => ({ ...f, [k]: e.target.value }));\n    // If changing name, trigger search\n    if (k === 'name') {\n      setSearchQuery(e.target.value);\n      debouncedSearch(e.target.value);\n    }\n  };\n\n  // Debounced search for universities\n  const handleSearchUniversities = async (query) => {\n    if (query.length < 2) {\n      setSearchResults([]);\n      setShowSearchResults(false);\n      return;\n    }\n\n    try {\n      const results = await searchUniversityNames(query);\n      setSearchResults(results);\n      setShowSearchResults(results.length > 0);\n    } catch (error) {\n      console.error('Error searching:', error);\n    }\n  };\n  const debouncedSearch = useDebounce(handleSearchUniversities, 300);\n\n  // Auto-fill university data\n  const handleAutoFill = async (universityName) => {\n    setIsAutoFilling(true);\n    setShowSearchResults(false);\n\n    try {\n      const data = await autoFillUniversityData(universityName || campusForm.name);\n      \n      if (data) {\n        setCampusForm({\n          name: data.name || '',\n          description: data.description || '',\n          website_url: data.website_url || '',\n          location: data.location || '',\n          established: data.established?.toString() || '',\n          student_count: data.student_count?.toString() || ''\n        });\n        \n        // Download images if available\n        if (data.cover_images && data.cover_images.length > 0) {\n          const downloadedImages = [];\n          \n          for (let i = 0; i < Math.min(data.cover_images.length, 5); i++) {\n            const imageUrl = data.cover_images[i];\n            const fileName = `${data.name.replace(/\\s+/g, '_')}_image_${i + 1}.jpg`;\n            \n            try {\n              const imageFile = await downloadImageAsFile(imageUrl, fileName);\n              if (imageFile) {\n                downloadedImages.push(imageFile);\n              }\n            } catch (err) {\n              console.error('Error downloading image:', err);\n            }\n          }\n          \n          if (downloadedImages.length > 0) {\n            setCampusImages(downloadedImages);\n            showToast({ type: 'success', message: `Auto-filled data for ${data.name} with ${downloadedImages.length} image(s)!` });\n          } else {\n            showToast({ type: 'info', message: `Auto-filled data for ${data.name}! But images could not be downloaded, please upload manually.` });\n          }\n        } else {\n          // Prefer Wikimedia Commons fallback, then Unsplash\n          let urls = await fetchWikimediaImages(data.name);\n          if (!urls.length) {\n            urls = await fetchUnsplashImages(data.name);\n          }\n\n          if (urls.length > 0) {\n            const downloadedImages = [];\n            for (let i = 0; i < urls.length; i++) {\n              try {\n                const fileName = `${data.name.replace(/\\s+/g, '_')}_auto_${i + 1}.jpg`;\n                const file = await downloadImageAsFile(urls[i], fileName);\n                if (file) downloadedImages.push(file);\n              } catch (err) {\n                console.error('Auto image download error:', err);\n              }\n            }\n\n            if (downloadedImages.length > 0) {\n              setCampusImages(downloadedImages);\n              showToast({ type: 'success', message: `Auto-filled data for ${data.name} with ${downloadedImages.length} image(s)!` });\n            } else {\n              showToast({ type: 'info', message: `Auto-filled data for ${data.name}, but images couldn't be downloaded.` });\n            }\n          } else {\n            showToast({ type: 'info', message: `Auto-filled data for ${data.name}, but no images were found automatically.` });\n          }\n        }\n      } else {\n        showToast({ type: 'info', message: 'No data found for this university. Please enter details manually.' });\n      }\n    } catch (error) {\n      console.error('Error auto-filling:', error);\n      showToast({ type: 'error', message: 'Failed to auto-fill data. Please try again.' });\n    } finally {\n      setIsAutoFilling(false);\n    }\n  };\n  const onPaperChange = (k) => (e) => setPaperForm((f) => ({ ...f, [k]: e.target.value }));\n\n  const submitBook = async () => {\n    if (!pdf) { showToast({ type: 'error', message: 'Please choose a PDF file.' }); return; }\n    setBusy(true);\n    try {\n      const metadata = {\n        title: bookForm.title || (pdf?.name?.replace(/\\.[^/.]+$/, '') || ''),\n        author: bookForm.author || 'Unknown',\n        description: bookForm.description || '',\n        category_id: bookForm.category_id || null,\n        year: bookForm.year ? Number(bookForm.year) : null,\n        language: bookForm.language || '',\n        isbn: bookForm.isbn || '',\n        pages: bookForm.pages ? Number(bookForm.pages) : 0,\n        publisher: bookForm.publisher || '',\n        uploaded_by: userProfile?.id || null\n      };\n      await createBook({ metadata, pdfFile: pdf, coverFile: cover });\n      showToast({ type: 'success', message: 'Book uploaded successfully.' });\n      navigate('/books/admin/books');\n    } catch (e) {\n      console.error('Book upload failed:', e);\n      showToast({ type: 'error', message: e?.message || 'Upload failed.' });\n    } finally { setBusy(false); }\n  };\n\n  const submitCampus = async () => {\n    if (!campusForm.name) { showToast({ type: 'error', message: 'Please enter university name.' }); return; }\n    setBusy(true);\n    try {\n      const metadata = {\n        name: campusForm.name,\n        description: campusForm.description || '',\n        website_url: campusForm.website_url || '',\n        location: campusForm.location || '',\n        established: campusForm.established ? Number(campusForm.established) : null,\n        student_count: campusForm.student_count ? Number(campusForm.student_count) : 0,\n        uploaded_by: userProfile?.id || null\n      };\n      \n      // Create university (use first image as cover)\n      const primaryImage = campusImages[0] || null;\n      const result = await createUniversity({ metadata, coverFile: primaryImage });\n      const universityId = result.id;\n      \n      // Upload additional images if any\n      if (campusImages.length > 1 && universityId) {\n        const additionalImages = campusImages.slice(1);\n        const uploadedUrls = await uploadUniversityImages(universityId, additionalImages);\n        \n        // Add them to the database\n        for (let i = 0; i < uploadedUrls.length; i++) {\n          await addUniversityImage(universityId, uploadedUrls[i].url, null, false, i + 1);\n        }\n      }\n      \n      showToast({ type: 'success', message: `University added successfully with ${campusImages.length} image(s)!` });\n      // Reset form\n      setCampusForm({ name: '', description: '', website_url: '', location: '', established: '', student_count: '' });\n      setCampusImages([]);\n    } catch (e) {\n      console.error('University upload failed:', e);\n      showToast({ type: 'error', message: e?.message || 'Upload failed.' });\n    } finally { setBusy(false); }\n  };\n\n  const submitPastPaper = async () => {\n    if (!paperPdf) { showToast({ type: 'error', message: 'Please choose a PDF file.' }); return; }\n    if (!paperForm.faculty) { showToast({ type: 'error', message: 'Please enter faculty.' }); return; }\n    if (!paperForm.unit_code) { showToast({ type: 'error', message: 'Please enter unit code.' }); return; }\n    if (!paperForm.unit_name) { showToast({ type: 'error', message: 'Please enter unit name.' }); return; }\n    \n    setBusy(true);\n    try {\n      const metadata = {\n        title: `${paperForm.unit_code} - ${paperForm.unit_name}`,\n        university_id: paperForm.university_id || null,\n        faculty: paperForm.faculty,\n        unit_code: paperForm.unit_code,\n        unit_name: paperForm.unit_name,\n        year: paperForm.year ? Number(paperForm.year) : null,\n        semester: paperForm.semester || '',\n        exam_type: paperForm.exam_type || 'Main',\n        uploaded_by: userProfile?.id || null\n      };\n      await createPastPaper({ metadata, pdfFile: paperPdf });\n      showToast({ type: 'success', message: 'Past paper uploaded successfully.' });\n      // Reset form\n      setPaperForm({ university_id: '', faculty: '', unit_code: '', unit_name: '', year: '', semester: '', exam_type: '' });\n      setPaperPdf(null);\n    } catch (e) {\n      console.error('Past paper upload failed:', e);\n      showToast({ type: 'error', message: e?.message || 'Upload failed.' });\n    } finally { setBusy(false); }\n  };\n\n  // Render dropzone component\n  const renderDropzone = (file, setFile, accept, fileType, icon) => (\n    <div\n      className=\"dropzone\"\n      onDragOver={(e) => {\n        e.preventDefault();\n        e.currentTarget.classList.add('drag-over');\n      }}\n      onDragLeave={(e) => {\n        e.preventDefault();\n        e.currentTarget.classList.remove('drag-over');\n      }}\n      onDrop={(e) => {\n        e.preventDefault();\n        e.currentTarget.classList.remove('drag-over');\n        const droppedFile = e.dataTransfer.files[0];\n        if (droppedFile && droppedFile.type.match(accept)) {\n          setFile(droppedFile);\n        }\n      }}\n      onClick={() => document.getElementById(`${fileType}-input`).click()}\n      style={{\n        border: '2px dashed #374151',\n        borderRadius: '8px',\n        padding: '20px',\n        textAlign: 'center',\n        cursor: 'pointer',\n        background: file ? 'rgba(0, 168, 132, 0.1)' : 'transparent',\n        transition: 'all 0.3s ease'\n      }}\n    >\n      <input\n        id={`${fileType}-input`}\n        type=\"file\"\n        accept={accept}\n        onChange={(e) => setFile(e.target.files?.[0] || null)}\n        style={{ display: 'none' }}\n      />\n      {file ? (\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px', color: '#00a884' }}>\n          {icon}\n          <span>{file.name}</span>\n        </div>\n      ) : (\n        <div>\n          <FiUpload size={20} style={{ marginBottom: '4px', color: '#8696a0' }} />\n          <div style={{ color: '#e9edef' }}>Drag and drop or click to browse</div>\n          <div style={{ color: '#8696a0', fontSize: '0.85em', marginTop: '2px' }}>\n            {accept === 'application/pdf' ? 'PDF files only' : 'Image files (JPG, PNG, GIF)'}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <div className=\"panel\">\n      <div className=\"panel-title\">Upload Content</div>\n      \n      {/* Tabs */}\n      <div className=\"upload-tabs\">\n        <button \n          className={`upload-tab ${activeTab === 'books' ? 'active' : ''}`}\n          onClick={() => setActiveTab('books')}\n        >\n          <FiBook size={20} />\n          Books\n        </button>\n        <button \n          className={`upload-tab ${activeTab === 'campus' ? 'active' : ''}`}\n          onClick={() => setActiveTab('campus')}\n        >\n          <FiMapPin size={20} />\n          Campus\n        </button>\n        <button \n          className={`upload-tab ${activeTab === 'pastpapers' ? 'active' : ''}`}\n          onClick={() => setActiveTab('pastpapers')}\n        >\n          <FiFileText size={20} />\n          Past Papers\n        </button>\n      </div>\n\n      {/* Books Tab */}\n      {activeTab === 'books' && (\n        <div className=\"grid-2\">\n          <div className=\"panel\">\n            <label className=\"label\">PDF File</label>\n            {renderDropzone(pdf, setPdf, 'application/pdf', 'pdf', <FiFile size={24} />)}\n            \n            <label className=\"label\" style={{ marginTop: 20 }}>Cover Image (optional)</label>\n            {renderDropzone(cover, setCover, 'image/*', 'cover', <FiImage size={24} />)}\n          </div>\n          <div className=\"panel\">\n            <label className=\"label\">Title</label>\n            <input className=\"input\" placeholder=\"Book title\" value={bookForm.title} onChange={onBookChange('title')} />\n            <label className=\"label\" style={{ marginTop: 10 }}>Author</label>\n            <input className=\"input\" placeholder=\"Author\" value={bookForm.author} onChange={onBookChange('author')} />\n            <label className=\"label\" style={{ marginTop: 10 }}>Description</label>\n            <textarea className=\"input\" rows={5} placeholder=\"Short description\" value={bookForm.description} onChange={onBookChange('description')} />\n\n            <div className=\"grid-2\" style={{ marginTop: 10 }}>\n              <div>\n                <label className=\"label\">Category</label>\n                <select className=\"select\" value={bookForm.category_id} onChange={onBookChange('category_id')}>\n                  <option value=\"\">Uncategorized</option>\n                  {categories.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                </select>\n              </div>\n              <div>\n                <label className=\"label\">Year</label>\n                <input className=\"input\" placeholder=\"Year\" value={bookForm.year} onChange={onBookChange('year')} />\n              </div>\n            </div>\n\n            <div className=\"grid-2\" style={{ marginTop: 10 }}>\n              <div>\n                <label className=\"label\">Language</label>\n                <input className=\"input\" placeholder=\"English\" value={bookForm.language} onChange={onBookChange('language')} />\n              </div>\n              <div>\n                <label className=\"label\">ISBN</label>\n                <input className=\"input\" placeholder=\"978-0-123456-78-9\" value={bookForm.isbn} onChange={onBookChange('isbn')} />\n              </div>\n            </div>\n\n            <div className=\"grid-2\" style={{ marginTop: 10 }}>\n              <div>\n                <label className=\"label\">Pages</label>\n                <input className=\"input\" type=\"number\" placeholder=\"Number of pages\" value={bookForm.pages} onChange={onBookChange('pages')} />\n              </div>\n              <div>\n                <label className=\"label\">Publisher</label>\n                <input className=\"input\" placeholder=\"Publisher name\" value={bookForm.publisher} onChange={onBookChange('publisher')} />\n              </div>\n            </div>\n\n            <div className=\"actions\" style={{ marginTop: 12 }}>\n              <button className=\"btn primary\" disabled={busy} onClick={submitBook}>{busy ? 'Uploading...' : 'Upload Book'}</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Campus Tab */}\n      {activeTab === 'campus' && (\n        <div className=\"grid-2\">\n          <div className=\"panel\">\n            <label className=\"label\">University Cover Images (Multiple)</label>\n            <input \n              type=\"file\"\n              accept=\"image/*\"\n              multiple\n              onChange={(e) => setCampusImages(Array.from(e.target.files))}\n              style={{ marginBottom: '10px' }}\n              className=\"input\"\n            />\n            {campusImages.length > 0 && (\n            <div style={{ marginTop: '10px', color: '#00a884' }}>\n               {campusImages.length} image(s) selected\n              <button \n                onClick={() => setCampusImages([])}\n                style={{ marginLeft: '10px', color: '#dc2626', background: 'none', border: 'none', cursor: 'pointer' }}\n              >\n                <FiX /> Clear\n              </button>\n            </div>\n          )}\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '4px', marginTop: '6px' }}>\n            {campusImages.map((img, idx) => (\n              <div key={idx} style={{ position: 'relative', border: '2px solid #374151', borderRadius: '8px', overflow: 'hidden' }}>\n                <img src={URL.createObjectURL(img)} alt={`Preview ${idx + 1}`} style={{ width: '100%', height: '120px', objectFit: 'cover' }} />\n                {/* Remove (X) button */}\n                <button\n                  aria-label=\"Remove image\"\n                  title=\"Remove\"\n                  onClick={() => setCampusImages((prev) => prev.filter((_, i) => i !== idx))}\n                  style={{\n                    position: 'absolute',\n                    top: '6px',\n                    left: '6px',\n                    width: '20px',\n                    height: '20px',\n                    padding: '2px',\n                    borderRadius: '6px',\n                    fontWeight: 'bold',\n                    border: 'none',\n                    cursor: 'pointer',\n                    background: '#a08f8f96',\n                    color: '#111010ff',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    boxShadow: '0 2px 6px rgba(0,0,0,0.4)'\n                  }}\n                >X\n                  {/* <FiX size={36} /> */}\n                </button>\n                <div style={{ position: 'absolute', top: '4px', right: '4px', background: 'rgba(0,0,0,0.7)', padding: '4px 8px', borderRadius: '4px', color: 'white', fontSize: '12px' }}>\n                  {idx === 0 ? 'Primary' : `#${idx + 1}`}\n                </div>\n              </div>\n            ))}\n          </div>\n          </div>\n          <div className=\"panel\">\n            <label className=\"label\">University Name *</label>\n            <div style={{ position: 'relative' }}>\n              <input \n                className=\"input\" \n                placeholder=\"e.g., University of Nairobi\" \n                value={campusForm.name} \n                onChange={onCampusChange('name')}\n                style={{ paddingRight: '80px' }}\n              />\n              <button \n                onClick={() => handleAutoFill()}\n                disabled={!campusForm.name || isAutoFilling}\n                style={{\n                  position: 'absolute',\n                  right: '8px',\n                  top: '50%',\n                  transform: 'translateY(-50%)',\n                  background: '#00a884',\n                  color: 'white',\n                  border: 'none',\n                  padding: '6px 12px',\n                  borderRadius: '4px',\n                  cursor: campusForm.name && !isAutoFilling ? 'pointer' : 'not-allowed',\n                  fontSize: '12px',\n                  opacity: campusForm.name && !isAutoFilling ? 1 : 0.5,\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '4px'\n                }}\n              >\n                {isAutoFilling ? <><FiLoader className=\"spin\" /> Loading</> : <><FiSearch /> Auto-Fill</>}\n              </button>\n              \n              {/* Search Results Dropdown */}\n              {showSearchResults && searchResults.length > 0 && (\n                <div style={{\n                  position: 'absolute',\n                  top: '100%',\n                  left: 0,\n                  right: 0,\n                  background: '#202c33',\n                  border: '1px solid #374151',\n                  borderRadius: '8px',\n                  marginTop: '4px',\n                  maxHeight: '200px',\n                  overflowY: 'auto',\n                  zIndex: 1000,\n                  boxShadow: '0 4px 6px rgba(0,0,0,0.3)'\n                }}>\n                  {searchResults.map((result, idx) => (\n                    <div\n                      key={idx}\n                      onClick={() => handleAutoFill(result.university_name)}\n                      style={{\n                        padding: '10px',\n                        cursor: 'pointer',\n                        borderBottom: idx < searchResults.length - 1 ? '1px solid #374151' : 'none',\n                        transition: 'background 0.2s'\n                      }}\n                      onMouseEnter={(e) => e.target.style.background = 'rgba(0, 168, 132, 0.1)'}\n                      onMouseLeave={(e) => e.target.style.background = 'transparent'}\n                    >\n                      {result.university_name}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n            \n            <label className=\"label\" style={{ marginTop: 10 }}>Description</label>\n            <textarea className=\"input\" rows={4} placeholder=\"Brief description about the university\" value={campusForm.description} onChange={onCampusChange('description')} />\n\n            <div className=\"grid-2\" style={{ marginTop: 10 }}>\n              <div>\n                <label className=\"label\">Location</label>\n                <input className=\"input\" placeholder=\"e.g., Nairobi\" value={campusForm.location} onChange={onCampusChange('location')} />\n              </div>\n              <div>\n                <label className=\"label\">Website URL</label>\n                <input className=\"input\" placeholder=\"https://...\" value={campusForm.website_url} onChange={onCampusChange('website_url')} />\n              </div>\n            </div>\n\n            <div className=\"grid-2\" style={{ marginTop: 10 }}>\n              <div>\n                <label className=\"label\">Established Year</label>\n                <input className=\"input\" type=\"number\" placeholder=\"e.g., 1956\" value={campusForm.established} onChange={onCampusChange('established')} />\n              </div>\n              <div>\n                <label className=\"label\">Student Count</label>\n                <input className=\"input\" type=\"number\" placeholder=\"e.g., 84000\" value={campusForm.student_count} onChange={onCampusChange('student_count')} />\n              </div>\n            </div>\n\n            <div className=\"actions\" style={{ marginTop: 12 }}>\n              <button className=\"btn primary\" disabled={busy} onClick={submitCampus}>{busy ? 'Adding...' : 'Add University'}</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Past Papers Tab */}\n      {activeTab === 'pastpapers' && (\n        <div className=\"grid-2\">\n          <div className=\"panel\">\n            <label className=\"label\">Past Paper PDF *</label>\n            {renderDropzone(paperPdf, setPaperPdf, 'application/pdf', 'paper-pdf', <FiFile size={24} />)}\n          </div>\n          <div className=\"panel\">\n            <label className=\"label\">University (optional)</label>\n            <select className=\"select\" value={paperForm.university_id} onChange={onPaperChange('university_id')}>\n              <option value=\"\">Select University</option>\n              {universities.map(u => <option key={u.id} value={u.id}>{u.name}</option>)}\n            </select>\n\n            <label className=\"label\" style={{ marginTop: 10 }}>Faculty *</label>\n            <input className=\"input\" placeholder=\"e.g., Engineering, Business, Arts\" value={paperForm.faculty} onChange={onPaperChange('faculty')} />\n\n            <div className=\"grid-2\" style={{ marginTop: 10 }}>\n              <div>\n                <label className=\"label\">Unit Code *</label>\n                <input className=\"input\" placeholder=\"e.g., CS101\" value={paperForm.unit_code} onChange={onPaperChange('unit_code')} />\n              </div>\n              <div>\n                <label className=\"label\">Unit Name *</label>\n                <input className=\"input\" placeholder=\"e.g., Introduction to Programming\" value={paperForm.unit_name} onChange={onPaperChange('unit_name')} />\n              </div>\n            </div>\n\n            <div className=\"grid-2\" style={{ marginTop: 10 }}>\n              <div>\n                <label className=\"label\">Year</label>\n                <input className=\"input\" type=\"number\" placeholder=\"e.g., 2023\" value={paperForm.year} onChange={onPaperChange('year')} />\n              </div>\n              <div>\n                <label className=\"label\">Semester</label>\n                <select className=\"select\" value={paperForm.semester} onChange={onPaperChange('semester')}>\n                  <option value=\"\">Select Semester</option>\n                  <option value=\"1\">Semester 1</option>\n                  <option value=\"2\">Semester 2</option>\n                  <option value=\"3\">Semester 3</option>\n                </select>\n              </div>\n            </div>\n\n            <label className=\"label\" style={{ marginTop: 10 }}>Exam Type</label>\n            <select className=\"select\" value={paperForm.exam_type} onChange={onPaperChange('exam_type')}>\n              <option value=\"Main\">Main Exam</option>\n              <option value=\"Supplementary\">Supplementary</option>\n              <option value=\"CAT\">CAT</option>\n              <option value=\"Mock\">Mock Exam</option>\n            </select>\n\n            <div className=\"actions\" style={{ marginTop: 12 }}>\n              <button className=\"btn primary\" disabled={busy} onClick={submitPastPaper}>{busy ? 'Uploading...' : 'Upload Past Paper'}</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Upload;"],"names":["API_URL","process","USE_BACKEND_PROXY","async","searchUniversityNames","query","limit","arguments","length","undefined","data","error","supabase","rpc","p_query","p_limit","wikiResults","searchUrl","concat","encodeURIComponent","response","fetch","ok","json","titles","descriptions","urls","filter","title","toLowerCase","includes","map","index","name","description","website_url","console","searchWikipediaUniversities","Promise","all","uni","cacheUniversityPrefillData","universities","proxyError","warn","message","fetchWikimediaImages","universityName","_listJson$query","_pages$","_infoJson$query","trim","replace","listUrl","listRes","listJson","images","pages","Object","values","fileTitles","img","Boolean","slice","join","infoUrl","infoRes","infoJson","p","_p$imageinfo","_p$imageinfo$","imageinfo","url","u","test","sort","a","b","deprioritize","s","e","fetchUnsplashImages","_data$images","downloadImageAsFile","imageUrl","fileName","Error","blob","File","type","source","from","upsert","university_name","updated_at","Date","toISOString","uploadUniversityImages","universityId","imageFiles","uploadedImages","bucket","i","file","fileExt","split","pop","now","uploadError","storage","upload","cacheControl","urlData","getPublicUrl","push","publicUrl","addUniversityImage","caption","isPrimary","displayOrder","p_university_id","p_image_url","p_caption","p_is_primary","p_display_order","autoFillUniversityData","p_university_name","getUniversityPrefillData","wikiSummary","_json$thumbnail","res","extract","location","established","student_count","cover_images","thumbnail","fetchUniversityDataFromWikipedia","wikidata","_binding$website","_binding$locationLabe","_binding$established","_binding$studentCount","sparqlQuery","binding","results","bindings","itemLabel","value","website","locationLabel","getFullYear","studentCount","fetchUniversityDataFromWikidata","_ref","_wikidata$established","_wikidata$student_cou","university","image","fetchUniversityDataFromGoogle","commons","unsplash","userProfile","useEffect","styleTag","document","createElement","innerHTML","head","appendChild","remove","activeTab","setActiveTab","useState","navigate","useNavigate","showToast","useAdminUI","pdf","setPdf","cover","setCover","categories","setCategories","bookForm","setBookForm","author","category_id","year","language","isbn","publisher","campusImages","setCampusImages","campusForm","setCampusForm","searchQuery","setSearchQuery","searchResults","setSearchResults","showSearchResults","setShowSearchResults","isAutoFilling","setIsAutoFilling","paperPdf","setPaperPdf","setUniversities","paperForm","setPaperForm","university_id","faculty","unit_code","unit_name","semester","exam_type","busy","setBusy","fetchCategories","getUniversitiesForDropdown","_unused","onBookChange","k","f","_objectSpread","target","onCampusChange","debouncedSearch","callback","delay","timeoutRef","useRef","useCallback","_len","args","Array","_key","current","clearTimeout","setTimeout","useDebounce","handleAutoFill","_data$established","_data$student_count","toString","downloadedImages","Math","min","imageFile","err","onPaperChange","renderDropzone","setFile","accept","fileType","icon","_jsxs","className","onDragOver","preventDefault","currentTarget","classList","add","onDragLeave","onDrop","droppedFile","dataTransfer","files","match","onClick","getElementById","click","style","border","borderRadius","padding","textAlign","cursor","background","transition","children","_jsx","id","onChange","_e$target$files","display","alignItems","justifyContent","gap","color","FiUpload","size","marginBottom","fontSize","marginTop","FiBook","FiMapPin","FiFileText","FiFile","FiImage","placeholder","rows","c","disabled","_pdf$name","metadata","Number","uploaded_by","createBook","pdfFile","coverFile","multiple","marginLeft","FiX","gridTemplateColumns","idx","position","overflow","src","URL","createObjectURL","alt","width","height","objectFit","prev","_","top","left","fontWeight","boxShadow","right","paddingRight","transform","opacity","_Fragment","FiLoader","FiSearch","maxHeight","overflowY","zIndex","result","borderBottom","onMouseEnter","onMouseLeave","primaryImage","createUniversity","additionalImages","uploadedUrls","createPastPaper"],"ignoreList":[],"sourceRoot":""}