{"version":3,"file":"static/js/497.3ada4f35.chunk.js","mappings":"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","sources":["SomaLux/Books/Admin/pages/UserDetails.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { supabase } from '../../supabaseClient';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n} from 'recharts';\r\n\r\nconst TABS = [\r\n  { id: 'overview', label: 'Overview' },\r\n  { id: 'views', label: 'Books Read / Viewed' },\r\n  { id: 'downloads', label: 'Downloads' },\r\n  { id: 'likes', label: 'Liked Books' },\r\n  { id: 'comments', label: 'Comments' },\r\n  { id: 'uploads', label: 'Uploads' },\r\n  { id: 'sessions', label: 'Reading Sessions' },\r\n  { id: 'goals', label: 'Goals & Progress' },\r\n  { id: 'achievements', label: 'Achievements' },\r\n  { id: 'authors', label: 'Author Engagement' },\r\n  { id: 'search_overview', label: 'Search Overview' },\r\n];\r\n\r\nconst COLORS = ['#00a884', '#34B7F1', '#FFCC00', '#f15e6c', '#8b5cf6', '#22d3ee'];\r\n\r\nconst UserDetails = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [profile, setProfile] = useState(null);\r\n  const [views, setViews] = useState([]);\r\n  const [downloads, setDownloads] = useState([]);\r\n  const [likes, setLikes] = useState([]);\r\n  const [comments, setComments] = useState([]);\r\n  const [subscriptions, setSubscriptions] = useState([]);\r\n  const [uploads, setUploads] = useState([]);\r\n  const [readingSessions, setReadingSessions] = useState([]);\r\n  const [readingGoals, setReadingGoals] = useState([]);\r\n  const [readingStats, setReadingStats] = useState(null);\r\n  const [readingStreak, setReadingStreak] = useState(null);\r\n  const [achievements, setAchievements] = useState([]);\r\n  const [authorLikes, setAuthorLikes] = useState([]);\r\n  const [authorFollows, setAuthorFollows] = useState([]);\r\n  const [authorRatings, setAuthorRatings] = useState([]);\r\n  const [authorStats, setAuthorStats] = useState([]);\r\n  const [activeTab, setActiveTab] = useState(() => {\r\n    const params = new URLSearchParams(location.search);\r\n    const t = params.get('tab');\r\n    return t && TABS.some(tab => tab.id === t) ? t : 'overview';\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    if (activeTab === 'search_overview') {\r\n      navigate(`/books/admin/users/${id}/search`);\r\n    }\r\n  }, [activeTab, id, navigate]);\r\n\r\n  useEffect(() => {\r\n    // Keep tab in sync if query param changes\r\n    const params = new URLSearchParams(location.search);\r\n    const t = params.get('tab');\r\n    if (t && TABS.some(tab => tab.id === t) && t !== activeTab) {\r\n      setActiveTab(t);\r\n    }\r\n  }, [location.search]);\r\n\r\n  useEffect(() => {\r\n    if (!id) return;\r\n\r\n    const load = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const [\r\n          profileRes,\r\n          viewsRes,\r\n          downloadsRes,\r\n          likesRes,\r\n          commentsRes,\r\n          subsRes,\r\n          uploadsRes,\r\n          sessionsRes,\r\n          goalsRes,\r\n          statsRes,\r\n          streakRes,\r\n          userAchRes,\r\n          authorLikesRes,\r\n          authorFollowsRes,\r\n          authorRatingsRes,\r\n          authorStatsRes,\r\n        ] = await Promise.all([\r\n          supabase\r\n            .from('profiles')\r\n            .select('id, email, display_name, role, created_at, avatar_url, subscription_tier')\r\n            .eq('id', id)\r\n            .maybeSingle(),\r\n          supabase\r\n            .from('book_views')\r\n            .select('id, book_id, viewed_at')\r\n            .eq('user_id', id)\r\n            .order('viewed_at', { ascending: false }),\r\n          supabase\r\n            .from('book_downloads')\r\n            .select('id, book_id, downloaded_at')\r\n            .eq('user_id', id)\r\n            .order('downloaded_at', { ascending: false }),\r\n          supabase\r\n            .from('book_likes')\r\n            .select('id, book_id, created_at')\r\n            .eq('user_id', id)\r\n            .order('created_at', { ascending: false }),\r\n          supabase\r\n            .from('book_comments')\r\n            .select('id, book_id, text, created_at')\r\n            .eq('user_id', id)\r\n            .order('created_at', { ascending: false }),\r\n          supabase\r\n            .from('subscriptions')\r\n            .select('id, product, plan_id, price_kes, status, start_at, end_date, created_at')\r\n            .eq('user_id', id)\r\n            .order('start_at', { ascending: false }),\r\n          supabase\r\n            .from('books')\r\n            .select('id, title, author, created_at, views_count, downloads_count, year, language, publisher')\r\n            .eq('uploaded_by', id)\r\n            .order('created_at', { ascending: false }),\r\n          supabase\r\n            .from('reading_sessions')\r\n            .select('id, book_id, pages_read, progress_percent, started_at, ended_at')\r\n            .eq('user_id', id)\r\n            .order('started_at', { ascending: false }),\r\n          supabase\r\n            .from('reading_goals')\r\n            .select('id, goal_type, target_books, current_progress, year, month, is_active, created_at, updated_at')\r\n            .eq('user_id', id)\r\n            .order('created_at', { ascending: false }),\r\n          supabase\r\n            .from('user_reading_stats')\r\n            .select('total_books_completed, total_books_started, genres_explored, total_pages_read, avg_pages_per_book, updated_at')\r\n            .eq('user_id', id)\r\n            .maybeSingle(),\r\n          supabase\r\n            .from('reading_streaks')\r\n            .select('current_streak, longest_streak, updated_at')\r\n            .eq('user_id', id)\r\n            .maybeSingle(),\r\n          supabase\r\n            .from('user_achievements')\r\n            .select('id, achievement_code, earned_at, metadata, achievements(title, code, tier)')\r\n            .eq('user_id', id)\r\n            .order('earned_at', { ascending: false }),\r\n          supabase\r\n            .from('author_likes')\r\n            .select('id, author_name, created_at')\r\n            .eq('user_id', id)\r\n            .order('created_at', { ascending: false }),\r\n          supabase\r\n            .from('author_follows')\r\n            .select('id, author_name, created_at')\r\n            .eq('follower_id', id)\r\n            .order('created_at', { ascending: false }),\r\n          supabase\r\n            .from('author_ratings')\r\n            .select('id, author_name, rating, created_at, updated_at')\r\n            .eq('user_id', id)\r\n            .order('created_at', { ascending: false }),\r\n          supabase\r\n            .from('author_stats')\r\n            .select('author_name, books_count, average_rating, rating_count, likes_count, loves_count, followers_count, updated_at'),\r\n        ]);\r\n\r\n        if (profileRes.error) throw profileRes.error;\r\n        setProfile(profileRes.data || null);\r\n\r\n        const viewsData = viewsRes.error ? [] : viewsRes.data || [];\r\n        const downloadsData = downloadsRes.error ? [] : downloadsRes.data || [];\r\n        const likesData = likesRes.error ? [] : likesRes.data || [];\r\n        const commentsData = commentsRes.error ? [] : commentsRes.data || [];\r\n        const subsData = subsRes.error ? [] : subsRes.data || [];\r\n        const uploadsData = uploadsRes.error ? [] : uploadsRes.data || [];\r\n        const sessionsData = sessionsRes.error ? [] : sessionsRes.data || [];\r\n        const goalsData = goalsRes.error ? [] : goalsRes.data || [];\r\n        const statsData = statsRes.error ? null : statsRes.data || null;\r\n        const streakData = streakRes.error ? null : streakRes.data || null;\r\n        const userAchData = userAchRes.error ? [] : userAchRes.data || [];\r\n        const authorLikesData = authorLikesRes.error ? [] : authorLikesRes.data || [];\r\n        const authorFollowsData = authorFollowsRes.error ? [] : authorFollowsRes.data || [];\r\n        const authorRatingsData = authorRatingsRes.error ? [] : authorRatingsRes.data || [];\r\n        const authorStatsData = authorStatsRes.error ? [] : authorStatsRes.data || [];\r\n\r\n        // Collect unique book ids to hydrate titles once (views, downloads, sessions, likes, comments)\r\n        const bookIds = Array.from(\r\n          new Set([\r\n            ...viewsData.map((v) => v.book_id).filter(Boolean),\r\n            ...downloadsData.map((d) => d.book_id).filter(Boolean),\r\n            ...sessionsData.map((s) => s.book_id).filter(Boolean),\r\n            ...likesData.map((l) => l.book_id).filter(Boolean),\r\n            ...commentsData.map((c) => c.book_id).filter(Boolean),\r\n          ]),\r\n        );\r\n\r\n        let booksMap = new Map();\r\n        if (bookIds.length > 0) {\r\n          const { data: booksData } = await supabase\r\n            .from('books')\r\n            .select('id, title, author, cover_url')\r\n            .in('id', bookIds);\r\n          if (booksData) {\r\n            booksMap = new Map(booksData.map((b) => [b.id, b]));\r\n          }\r\n        }\r\n\r\n        // Enrich datasets with book info\r\n        const withBook = (row) => {\r\n          const book = booksMap.get(row.book_id) || null;\r\n          return { ...row, book };\r\n        };\r\n\r\n        setViews(viewsData.map(withBook));\r\n        setDownloads(downloadsData.map(withBook));\r\n        setReadingSessions(sessionsData.map(withBook));\r\n        setLikes(likesData.map(withBook));\r\n        setComments(commentsData.map(withBook));\r\n        setSubscriptions(subsData || []);\r\n        setUploads(uploadsData || []);\r\n        setReadingGoals(goalsData || []);\r\n        setReadingStats(statsData);\r\n        setReadingStreak(streakData);\r\n        setAchievements(userAchData || []);\r\n        setAuthorLikes(authorLikesData || []);\r\n        setAuthorFollows(authorFollowsData || []);\r\n        setAuthorRatings(authorRatingsData || []);\r\n        setAuthorStats(authorStatsData || []);\r\n      } catch (err) {\r\n        console.error('Failed to load user details', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    load();\r\n  }, [id]);\r\n\r\n  const viewSummary = useMemo(() => {\r\n    const byBook = new Map();\r\n    views.forEach((v) => {\r\n      if (!v.book_id) return;\r\n      const existing = byBook.get(v.book_id) || {\r\n        book: v.book || null,\r\n        count: 0,\r\n        lastViewed: null,\r\n      };\r\n      existing.count += 1;\r\n      const ts = v.viewed_at ? new Date(v.viewed_at).getTime() : 0;\r\n      const lastTs = existing.lastViewed ? new Date(existing.lastViewed).getTime() : 0;\r\n      if (ts > lastTs) existing.lastViewed = v.viewed_at;\r\n      byBook.set(v.book_id, existing);\r\n    });\r\n    return Array.from(byBook.values());\r\n  }, [views]);\r\n\r\n  const commentsCount = comments.length;\r\n  const likesCount = likes.length;\r\n  const viewsCount = views.length;\r\n  const downloadsCount = downloads.length;\r\n  const uploadsCount = uploads.length;\r\n\r\n  const totalEngagement = viewsCount + likesCount + commentsCount + downloadsCount + uploadsCount;\r\n\r\n  const engagementShare = (value) => {\r\n    if (!totalEngagement) return 0;\r\n    return Math.round((value / totalEngagement) * 100);\r\n  };\r\n\r\n  const engagementPieData = useMemo(() => {\r\n    return [\r\n      { name: 'Views', value: viewsCount },\r\n      { name: 'Likes', value: likesCount },\r\n      { name: 'Comments', value: commentsCount },\r\n      { name: 'Downloads', value: downloadsCount },\r\n      { name: 'Uploads', value: uploadsCount },\r\n    ].filter((d) => d.value > 0);\r\n  }, [viewsCount, likesCount, commentsCount, downloadsCount, uploadsCount]);\r\n\r\n  const activitySeries = useMemo(() => {\r\n    const byDay = new Map();\r\n\r\n    const add = (dateStr, key) => {\r\n      if (!dateStr) return;\r\n      const d = new Date(dateStr);\r\n      if (Number.isNaN(d.getTime())) return;\r\n      const dayKey = d.toISOString().slice(0, 10);\r\n      const existing = byDay.get(dayKey) || { day: dayKey, views: 0, downloads: 0 };\r\n      existing[key] += 1;\r\n      byDay.set(dayKey, existing);\r\n    };\r\n\r\n    views.forEach((v) => add(v.viewed_at, 'views'));\r\n    downloads.forEach((d) => add(d.downloaded_at, 'downloads'));\r\n\r\n    return Array.from(byDay.values()).sort((a, b) => (a.day < b.day ? -1 : 1));\r\n  }, [views, downloads]);\r\n\r\n  const downloadsSummary = useMemo(() => {\r\n    const byBook = new Map();\r\n    downloads.forEach((d) => {\r\n      if (!d.book_id) return;\r\n      const existing = byBook.get(d.book_id) || {\r\n        book: d.book || null,\r\n        count: 0,\r\n        lastDownloaded: null,\r\n      };\r\n      existing.count += 1;\r\n      const ts = d.downloaded_at ? new Date(d.downloaded_at).getTime() : 0;\r\n      const lastTs = existing.lastDownloaded ? new Date(existing.lastDownloaded).getTime() : 0;\r\n      if (ts > lastTs) existing.lastDownloaded = d.downloaded_at;\r\n      byBook.set(d.book_id, existing);\r\n    });\r\n    return Array.from(byBook.values());\r\n  }, [downloads]);\r\n\r\n  const latestSubscription = useMemo(() => {\r\n    if (!subscriptions || subscriptions.length === 0) return null;\r\n    return subscriptions[0];\r\n  }, [subscriptions]);\r\n\r\n  const renderTabContent = () => {\r\n    if (activeTab === 'overview') {\r\n      return (\r\n        <div>\r\n          <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap', marginBottom: 12 }}>\r\n            {[{\r\n              label: 'Books Viewed',\r\n              value: viewsCount,\r\n              color: '#00a884',\r\n              bg: 'rgba(0,168,132,0.1)',\r\n            }, {\r\n              label: 'Books Liked',\r\n              value: likesCount,\r\n              color: '#34B7F1',\r\n              bg: 'rgba(52,183,241,0.1)',\r\n            }, {\r\n              label: 'Comments',\r\n              value: commentsCount,\r\n              color: '#FFCC00',\r\n              bg: 'rgba(255,204,0,0.1)',\r\n            }, {\r\n              label: 'Downloads',\r\n              value: downloadsCount,\r\n              color: '#8b5cf6',\r\n              bg: 'rgba(139,92,246,0.1)',\r\n            }, {\r\n              label: 'Uploads',\r\n              value: uploadsCount,\r\n              color: '#f15e6c',\r\n              bg: 'rgba(241,94,108,0.1)',\r\n            }].map((card, idx) => {\r\n              const pct = engagementShare(card.value);\r\n              return (\r\n                <div\r\n                  key={idx}\r\n                  style={{\r\n                    padding: 8,\r\n                    borderRadius: 12,\r\n                    background: '#111b21',\r\n                    minWidth: 200,\r\n                    boxShadow: '0 1px 3px rgba(0,0,0,0.4)',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: 4,\r\n                  }}\r\n                >\r\n                  <div style={{ color: '#8696a0', fontSize: 12 }}>{card.label}</div>\r\n                  <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginTop: 4 }}>\r\n                    <div style={{ fontSize: 22, fontWeight: 600 }}>{card.value}</div>\r\n                    <div\r\n                      style={{\r\n                        fontSize: 11,\r\n                        padding: '2px 8px',\r\n                        borderRadius: 999,\r\n                        background: card.bg,\r\n                        color: card.color,\r\n                      }}\r\n                    >\r\n                      {totalEngagement ? `${pct}% of activity` : '—'}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap', marginBottom: 12 }}>\r\n            <div\r\n              style={{\r\n                flex: 1,\r\n                minWidth: 320,\r\n                padding: 8,\r\n                borderRadius: 12,\r\n                background: '#111b21',\r\n              }}\r\n            >\r\n              <div style={{ color: '#e9edef', fontSize: 12, marginBottom: 6 }}>Activity Over Time</div>\r\n              <div style={{ width: '100%', height: 260 }}>\r\n                {activitySeries.length === 0 ? (\r\n                  <div style={{ color: '#8696a0', textAlign: 'center', paddingTop: 40 }}>\r\n                    No activity yet for this user.\r\n                  </div>\r\n                ) : (\r\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <LineChart data={activitySeries} margin={{ top: 10, right: 16, left: -16, bottom: 0 }}>\r\n                      <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#202c33\" />\r\n                      <XAxis dataKey=\"day\" stroke=\"#8696a0\" tick={{ fontSize: 11 }} tickMargin={8} />\r\n                      <YAxis stroke=\"#8696a0\" tick={{ fontSize: 11 }} />\r\n                      <Tooltip\r\n                        contentStyle={{\r\n                          backgroundColor: '#1f2c33',\r\n                          border: '1px solid #2a3942',\r\n                          borderRadius: 8,\r\n                          color: '#e9edef',\r\n                        }}\r\n                        labelStyle={{ color: '#cfd8dc' }}\r\n                      />\r\n                      <Legend />\r\n                      <Line type=\"monotone\" dataKey=\"views\" name=\"Views\" stroke=\"#00a884\" strokeWidth={2} dot={false} />\r\n                      <Line type=\"monotone\" dataKey=\"downloads\" name=\"Downloads\" stroke=\"#34B7F1\" strokeWidth={2} dot={false} />\r\n                    </LineChart>\r\n                  </ResponsiveContainer>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div\r\n              style={{\r\n                flex: 1,\r\n                minWidth: 280,\r\n                padding: 8,\r\n                borderRadius: 12,\r\n                background: '#111b21',\r\n              }}\r\n            >\r\n              <div style={{ color: '#e9edef', fontSize: 12, marginBottom: 6 }}>Engagement Breakdown</div>\r\n              <div style={{ width: '100%', height: 260 }}>\r\n                {engagementPieData.length === 0 ? (\r\n                  <div style={{ color: '#8696a0', textAlign: 'center', paddingTop: 40 }}>\r\n                    No engagement yet for this user.\r\n                  </div>\r\n                ) : (\r\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <BarChart data={engagementPieData} layout=\"vertical\" margin={{ top: 10, right: 24, left: 40, bottom: 0 }}>\r\n                      <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#202c33\" />\r\n                      <XAxis type=\"number\" stroke=\"#8696a0\" />\r\n                      <YAxis dataKey=\"name\" type=\"category\" stroke=\"#8696a0\" tick={{ fontSize: 12 }} />\r\n                      <Tooltip\r\n                        contentStyle={{\r\n                          backgroundColor: '#1f2c33',\r\n                          border: '1px solid #2a3942',\r\n                          borderRadius: 8,\r\n                          color: '#e9edef',\r\n                        }}\r\n                        labelStyle={{ color: '#cfd8dc' }}\r\n                      />\r\n                      <Legend />\r\n                      <Bar dataKey=\"value\" name=\"Events\" radius={[4, 4, 4, 4]}>\r\n                        {engagementPieData.map((entry, index) => (\r\n                          <Bar key={`bar-${index}`} dataKey=\"value\" fill={COLORS[index % COLORS.length]} />\r\n                        ))}\r\n                      </Bar>\r\n                    </BarChart>\r\n                  </ResponsiveContainer>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {latestSubscription && (\r\n            <div\r\n              style={{\r\n                marginTop: 6,\r\n                padding: 8,\r\n                borderRadius: 12,\r\n                background: '#111b21',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                gap: 4,\r\n                maxWidth: 420,\r\n              }}\r\n            >\r\n              <div style={{ fontSize: 13, color: '#8696a0' }}>Latest Subscription</div>\r\n              <div style={{ fontSize: 13 }}>\r\n                <strong>{latestSubscription.product}</strong> · Plan {latestSubscription.plan_id} · Ksh{' '}\r\n                {latestSubscription.price_kes}\r\n              </div>\r\n              <div style={{ fontSize: 12, color: '#8696a0' }}>\r\n                Status:{' '}\r\n                <span style={{ fontWeight: 600 }}>{latestSubscription.status}</span>\r\n                {latestSubscription.start_at && (\r\n                  <>\r\n                    {' '}\r\n                    · From {new Date(latestSubscription.start_at).toLocaleDateString()} to{' '}\r\n                    {latestSubscription.end_date\r\n                      ? new Date(latestSubscription.end_date).toLocaleDateString()\r\n                      : '—'}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {(readingStats || readingStreak) && (\r\n            <div\r\n              style={{\r\n                marginTop: 12,\r\n                padding: 8,\r\n                borderRadius: 12,\r\n                background: '#111b21',\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n                gap: 8,\r\n              }}\r\n            >\r\n              {readingStats && (\r\n                <div style={{ minWidth: 220 }}>\r\n                  <div style={{ color: '#8696a0', fontSize: 12 }}>Reading Stats</div>\r\n                  <div style={{ fontSize: 12, marginTop: 4 }}>\r\n                    <div>Total books completed: <strong>{readingStats.total_books_completed}</strong></div>\r\n                    <div>Total pages read: <strong>{readingStats.total_pages_read}</strong></div>\r\n                    <div>Avg pages/book: <strong>{readingStats.avg_pages_per_book}</strong></div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {readingStreak && (\r\n                <div style={{ minWidth: 220 }}>\r\n                  <div style={{ color: '#8696a0', fontSize: 12 }}>Reading Streak</div>\r\n                  <div style={{ fontSize: 12, marginTop: 4 }}>\r\n                    <div>Current streak: <strong>{readingStreak.current_streak}</strong> days</div>\r\n                    <div>Longest streak: <strong>{readingStreak.longest_streak}</strong> days</div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeTab === 'uploads') {\r\n      return (\r\n        <div>\r\n          {uploads.length === 0 ? (\r\n            <div style={{ color: '#8696a0' }}>No uploads recorded for this user.</div>\r\n          ) : (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Title</th>\r\n                  <th>Author</th>\r\n                  <th>Year</th>\r\n                  <th>Language</th>\r\n                  <th>Views</th>\r\n                  <th>Downloads</th>\r\n                  <th>Uploaded At</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {uploads.map((b) => (\r\n                  <tr key={b.id}>\r\n                    <td>{b.title}</td>\r\n                    <td>{b.author || '—'}</td>\r\n                    <td>{b.year || '—'}</td>\r\n                    <td>{b.language || '—'}</td>\r\n                    <td>{b.views ?? 0}</td>\r\n                    <td>{b.downloads ?? 0}</td>\r\n                    <td>{b.created_at ? new Date(b.created_at).toLocaleString() : '—'}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeTab === 'views') {\r\n      return (\r\n        <div>\r\n          {viewSummary.length === 0 ? (\r\n            <div style={{ color: '#8696a0' }}>No reading activity recorded for this user.</div>\r\n          ) : (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Book</th>\r\n                  <th>Author</th>\r\n                  <th>Times Viewed</th>\r\n                  <th>Last Viewed</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {viewSummary.map((row, idx) => (\r\n                  <tr key={idx}>\r\n                    <td>{row.book?.title || 'Unknown'}</td>\r\n                    <td>{row.book?.author || '—'}</td>\r\n                    <td>{row.count}</td>\r\n                    <td>\r\n                      {row.lastViewed\r\n                        ? new Date(row.lastViewed).toLocaleString()\r\n                        : '—'}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeTab === 'downloads') {\r\n      return (\r\n        <div>\r\n          {downloadsSummary.length === 0 ? (\r\n            <div style={{ color: '#8696a0' }}>No downloads recorded for this user.</div>\r\n          ) : (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Book</th>\r\n                  <th>Author</th>\r\n                  <th>Times Downloaded</th>\r\n                  <th>Last Downloaded</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {downloadsSummary.map((row, idx) => (\r\n                  <tr key={idx}>\r\n                    <td>{row.book?.title || 'Unknown'}</td>\r\n                    <td>{row.book?.author || '—'}</td>\r\n                    <td>{row.count}</td>\r\n                    <td>\r\n                      {row.lastDownloaded\r\n                        ? new Date(row.lastDownloaded).toLocaleString()\r\n                        : '—'}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeTab === 'likes') {\r\n      return (\r\n        <div>\r\n          {likes.length === 0 ? (\r\n            <div style={{ color: '#8696a0' }}>No liked books for this user.</div>\r\n          ) : (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Book</th>\r\n                  <th>Author</th>\r\n                  <th>Liked At</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {likes.map((like) => (\r\n                  <tr key={like.id}>\r\n                    <td>{like.book?.title || 'Unknown'}</td>\r\n                    <td>{like.book?.author || '—'}</td>\r\n                    <td>\r\n                      {like.created_at\r\n                        ? new Date(like.created_at).toLocaleString()\r\n                        : '—'}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeTab === 'comments') {\r\n      return (\r\n        <div>\r\n          {comments.length === 0 ? (\r\n            <div style={{ color: '#8696a0' }}>No comments from this user.</div>\r\n          ) : (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Book</th>\r\n                  <th>Comment</th>\r\n                  <th>Created At</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {comments.map((c) => (\r\n                  <tr key={c.id}>\r\n                    <td>{c.book?.title || 'Unknown'}</td>\r\n                    <td>\r\n                      {c.text && c.text.length > 120\r\n                        ? `${c.text.slice(0, 120)}…`\r\n                        : c.text || '—'}\r\n                    </td>\r\n                    <td>\r\n                      {c.created_at\r\n                        ? new Date(c.created_at).toLocaleString()\r\n                        : '—'}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeTab === 'sessions') {\r\n      return (\r\n        <div>\r\n          {readingSessions.length === 0 ? (\r\n            <div style={{ color: '#8696a0' }}>No reading sessions recorded for this user.</div>\r\n          ) : (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Book</th>\r\n                  <th>Pages Read</th>\r\n                  <th>Progress %</th>\r\n                  <th>Started</th>\r\n                  <th>Ended</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {readingSessions.map((s) => (\r\n                  <tr key={s.id}>\r\n                    <td>{s.book?.title || 'Unknown'}</td>\r\n                    <td>{s.pages_read}</td>\r\n                    <td>{s.progress_percent}</td>\r\n                    <td>{s.started_at ? new Date(s.started_at).toLocaleString() : '—'}</td>\r\n                    <td>{s.ended_at ? new Date(s.ended_at).toLocaleString() : 'In progress'}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeTab === 'goals') {\r\n      return (\r\n        <div>\r\n          <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap', marginBottom: 12 }}>\r\n            {readingStats && (\r\n              <div\r\n                style={{\r\n                  padding: 8,\r\n                  borderRadius: 12,\r\n                  background: '#111b21',\r\n                  minWidth: 220,\r\n                }}\r\n              >\r\n                <div style={{ color: '#8696a0', fontSize: 12 }}>Lifetime Reading Stats</div>\r\n                <div style={{ fontSize: 12, marginTop: 4 }}>\r\n                  <div>Total books completed: <strong>{readingStats.total_books_completed}</strong></div>\r\n                  <div>Total books started: <strong>{readingStats.total_books_started}</strong></div>\r\n                  <div>Total pages read: <strong>{readingStats.total_pages_read}</strong></div>\r\n                  <div>Avg pages per book: <strong>{readingStats.avg_pages_per_book}</strong></div>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {readingStreak && (\r\n              <div\r\n                style={{\r\n                  padding: 8,\r\n                  borderRadius: 12,\r\n                  background: '#111b21',\r\n                  minWidth: 220,\r\n                }}\r\n              >\r\n                <div style={{ color: '#8696a0', fontSize: 12 }}>Reading Streak</div>\r\n                <div style={{ fontSize: 12, marginTop: 4 }}>\r\n                  <div>Current streak: <strong>{readingStreak.current_streak}</strong> days</div>\r\n                  <div>Longest streak: <strong>{readingStreak.longest_streak}</strong> days</div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {readingGoals.length === 0 ? (\r\n            <div style={{ color: '#8696a0' }}>No reading goals defined for this user.</div>\r\n          ) : (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Type</th>\r\n                  <th>Target Books</th>\r\n                  <th>Progress</th>\r\n                  <th>Period</th>\r\n                  <th>Status</th>\r\n                  <th>Updated</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {readingGoals.map((g) => {\r\n                  const pct = g.target_books > 0\r\n                    ? Math.round((g.current_progress / g.target_books) * 100)\r\n                    : 0;\r\n                  const period = g.goal_type === 'yearly'\r\n                    ? g.year || '—'\r\n                    : g.goal_type === 'monthly'\r\n                      ? `${g.month || '—'}/${g.year || '—'}`\r\n                      : 'Custom';\r\n                  return (\r\n                    <tr key={g.id}>\r\n                      <td>{g.goal_type}</td>\r\n                      <td>{g.target_books}</td>\r\n                      <td>\r\n                        {g.current_progress} ({pct}% )\r\n                      </td>\r\n                      <td>{period}</td>\r\n                      <td>{g.is_active ? 'Active' : 'Inactive'}</td>\r\n                      <td>{g.updated_at ? new Date(g.updated_at).toLocaleString() : '—'}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeTab === 'achievements') {\r\n      return (\r\n        <div>\r\n          {achievements.length === 0 ? (\r\n            <div style={{ color: '#8696a0' }}>No achievements recorded for this user.</div>\r\n          ) : (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Title</th>\r\n                  <th>Code</th>\r\n                  <th>Tier</th>\r\n                  <th>Awarded</th>\r\n                  <th>Earned</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {achievements.map((a) => (\r\n                  <tr key={a.id}>\r\n                    <td>{a.achievements?.title || 'Achievement'}</td>\r\n                    <td>{a.achievements?.code || '—'}</td>\r\n                    <td>{a.achievements?.tier || '—'}</td>\r\n                    <td>{a.awarded_at ? new Date(a.awarded_at).toLocaleString() : '—'}</td>\r\n                    <td>{a.earned_at ? new Date(a.earned_at).toLocaleString() : '—'}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeTab === 'authors') {\r\n      // Build quick lookup for author_stats\r\n      const statsByAuthor = new Map(\r\n        (authorStats || []).map((s) => [s.author_name, s])\r\n      );\r\n\r\n      return (\r\n        <div>\r\n          <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap', marginBottom: 12 }}>\r\n            <div\r\n              style={{\r\n                padding: 8,\r\n                borderRadius: 12,\r\n                background: '#111b21',\r\n                minWidth: 180,\r\n              }}\r\n            >\r\n              <div style={{ color: '#8696a0', fontSize: 12 }}>Authors Liked</div>\r\n              <div style={{ fontSize: 22, fontWeight: 600 }}>{authorLikes.length}</div>\r\n            </div>\r\n            <div\r\n              style={{\r\n                padding: 8,\r\n                borderRadius: 12,\r\n                background: '#111b21',\r\n                minWidth: 180,\r\n              }}\r\n            >\r\n              <div style={{ color: '#8696a0', fontSize: 12 }}>Authors Followed</div>\r\n              <div style={{ fontSize: 22, fontWeight: 600 }}>{authorFollows.length}</div>\r\n            </div>\r\n            <div\r\n              style={{\r\n                padding: 8,\r\n                borderRadius: 12,\r\n                background: '#111b21',\r\n                minWidth: 180,\r\n              }}\r\n            >\r\n              <div style={{ color: '#8696a0', fontSize: 12 }}>Authors Rated</div>\r\n              <div style={{ fontSize: 22, fontWeight: 600 }}>{authorRatings.length}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <h4 style={{ color: '#e9edef', marginBottom: 8 }}>Author Ratings</h4>\r\n          {authorRatings.length === 0 ? (\r\n            <div style={{ color: '#8696a0', marginBottom: 12 }}>No author ratings from this user.</div>\r\n          ) : (\r\n            <table className=\"table\" style={{ marginBottom: 12 }}>\r\n              <thead>\r\n                <tr>\r\n                  <th>Author</th>\r\n                  <th>Rating</th>\r\n                  <th>Given At</th>\r\n                  <th>Author Avg Rating</th>\r\n                  <th>Author Rating Count</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {authorRatings.map((r) => {\r\n                  const s = statsByAuthor.get(r.author_name);\r\n                  return (\r\n                    <tr key={r.id}>\r\n                      <td>{r.author_name}</td>\r\n                      <td>{r.rating}</td>\r\n                      <td>{r.created_at ? new Date(r.created_at).toLocaleString() : '—'}</td>\r\n                      <td>{s?.average_rating ?? '—'}</td>\r\n                      <td>{s?.rating_count ?? '—'}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n\r\n          <h4 style={{ color: '#e9edef', marginBottom: 8 }}>Authors Followed</h4>\r\n          {authorFollows.length === 0 ? (\r\n            <div style={{ color: '#8696a0', marginBottom: 12 }}>No authors followed by this user.</div>\r\n          ) : (\r\n            <table className=\"table\" style={{ marginBottom: 12 }}>\r\n              <thead>\r\n                <tr>\r\n                  <th>Author</th>\r\n                  <th>Followed At</th>\r\n                  <th>Total Followers</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {authorFollows.map((f) => {\r\n                  const s = statsByAuthor.get(f.author_name);\r\n                  return (\r\n                    <tr key={f.id}>\r\n                      <td>{f.author_name}</td>\r\n                      <td>{f.created_at ? new Date(f.created_at).toLocaleString() : '—'}</td>\r\n                      <td>{s?.followers_count ?? '—'}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n\r\n          <h4 style={{ color: '#e9edef', marginBottom: 8 }}>Authors Liked</h4>\r\n          {authorLikes.length === 0 ? (\r\n            <div style={{ color: '#8696a0' }}>No authors liked by this user.</div>\r\n          ) : (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Author</th>\r\n                  <th>Liked At</th>\r\n                  <th>Total Likes</th>\r\n                  <th>Total Loves</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {authorLikes.map((l) => {\r\n                  const s = statsByAuthor.get(l.author_name);\r\n                  return (\r\n                    <tr key={l.id}>\r\n                      <td>{l.author_name}</td>\r\n                      <td>{l.created_at ? new Date(l.created_at).toLocaleString() : '—'}</td>\r\n                      <td>{s?.likes_count ?? '—'}</td>\r\n                      <td>{s?.loves_count ?? '—'}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"panel\">\r\n      <div className=\"panel-title\" style={{ display: 'flex', alignItems: 'center', gap: 8, fontSize: 12 }}>\r\n        <button className=\"btn\" onClick={() => navigate(-1)}>\r\n          Back\r\n        </button>\r\n        <span>User Details</span>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div style={{ color: '#8696a0', padding: 12 }}>Loading user details...</div>\r\n      ) : !profile ? (\r\n        <div style={{ color: '#8696a0', padding: 12 }}>User not found.</div>\r\n      ) : (\r\n        <>\r\n          <div style={{ display: 'flex', gap: 8, marginBottom: 12, flexWrap: 'wrap', alignItems: 'center' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n              <div className=\"viewer-avatar\" style={{ width: 48, height: 48, fontSize: 20 }}>\r\n                {profile.avatar_url ? (\r\n                  <img\r\n                    src={profile.avatar_url}\r\n                    alt={profile.display_name || profile.email || 'User avatar'}\r\n                    style={{ width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover' }}\r\n                  />\r\n                ) : (\r\n                  (profile.display_name || profile.email || '?').charAt(0).toUpperCase()\r\n                )}\r\n              </div>\r\n              <div>\r\n                <div style={{ fontSize: 16, fontWeight: 600 }}>\r\n                  {profile.display_name || '—'}\r\n                </div>\r\n                <div style={{ color: '#8696a0', fontSize: 13 }}>{profile.email}</div>\r\n                <div style={{ color: '#8696a0', fontSize: 12 }}>\r\n                  Role: <strong>{profile.role || 'viewer'}</strong>\r\n                  {profile.created_at && (\r\n                    <>\r\n                      {' '}\r\n                      · Joined {new Date(profile.created_at).toLocaleDateString()}\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', gap: 8, marginBottom: 12, flexWrap: 'wrap' }}>\r\n            {TABS.map((tab) => (\r\n              <button\r\n                key={tab.id}\r\n                className=\"btn\"\r\n                style={{\r\n                  padding: '6px 14px',\r\n                  fontSize: 12,\r\n                  background: activeTab === tab.id ? '#202c33' : 'transparent',\r\n                  borderColor: activeTab === tab.id ? '#23a76d' : 'rgba(134,150,160,0.3)',\r\n                }}\r\n                onClick={() => setActiveTab(tab.id)}\r\n              >\r\n                {tab.label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {renderTabContent()}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDetails;\r\n"],"names":["TABS","id","label","COLORS","UserDetails","useParams","navigate","useNavigate","location","useLocation","loading","setLoading","useState","profile","setProfile","views","setViews","downloads","setDownloads","likes","setLikes","comments","setComments","subscriptions","setSubscriptions","uploads","setUploads","readingSessions","setReadingSessions","readingGoals","setReadingGoals","readingStats","setReadingStats","readingStreak","setReadingStreak","achievements","setAchievements","authorLikes","setAuthorLikes","authorFollows","setAuthorFollows","authorRatings","setAuthorRatings","authorStats","setAuthorStats","activeTab","setActiveTab","t","URLSearchParams","search","get","some","tab","useEffect","concat","async","profileRes","viewsRes","downloadsRes","likesRes","commentsRes","subsRes","uploadsRes","sessionsRes","goalsRes","statsRes","streakRes","userAchRes","authorLikesRes","authorFollowsRes","authorRatingsRes","authorStatsRes","Promise","all","supabase","from","select","eq","maybeSingle","order","ascending","error","data","viewsData","downloadsData","likesData","commentsData","subsData","uploadsData","sessionsData","goalsData","statsData","streakData","userAchData","authorLikesData","authorFollowsData","authorRatingsData","authorStatsData","bookIds","Array","Set","map","v","book_id","filter","Boolean","d","s","l","c","booksMap","Map","length","booksData","in","b","withBook","row","book","_objectSpread","err","console","load","viewSummary","useMemo","byBook","forEach","existing","count","lastViewed","viewed_at","Date","getTime","set","values","commentsCount","likesCount","viewsCount","downloadsCount","uploadsCount","totalEngagement","engagementPieData","name","value","activitySeries","byDay","add","dateStr","key","Number","isNaN","dayKey","toISOString","slice","day","downloaded_at","sort","a","downloadsSummary","lastDownloaded","latestSubscription","_jsxs","className","children","style","display","alignItems","gap","fontSize","_jsx","onClick","color","padding","_Fragment","marginBottom","flexWrap","width","height","avatar_url","src","alt","display_name","email","borderRadius","objectFit","charAt","toUpperCase","fontWeight","role","created_at","toLocaleDateString","background","borderColor","renderTabContent","bg","card","idx","pct","Math","round","minWidth","boxShadow","flexDirection","justifyContent","marginTop","flex","textAlign","paddingTop","ResponsiveContainer","LineChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","stroke","XAxis","dataKey","tick","tickMargin","YAxis","Tooltip","contentStyle","backgroundColor","border","labelStyle","Legend","Line","type","strokeWidth","dot","BarChart","layout","Bar","radius","entry","index","fill","maxWidth","product","plan_id","price_kes","status","start_at","end_date","total_books_completed","total_pages_read","avg_pages_per_book","current_streak","longest_streak","_b$views","_b$downloads","title","author","year","language","toLocaleString","_row$book","_row$book2","_row$book3","_row$book4","like","_like$book","_like$book2","_c$book","text","_s$book","pages_read","progress_percent","started_at","ended_at","total_books_started","g","target_books","current_progress","period","goal_type","month","is_active","updated_at","_a$achievements","_a$achievements2","_a$achievements3","code","tier","awarded_at","earned_at","statsByAuthor","author_name","r","_s$average_rating","_s$rating_count","rating","average_rating","rating_count","f","_s$followers_count","followers_count","_s$likes_count","_s$loves_count","likes_count","loves_count"],"ignoreList":[],"sourceRoot":""}