"use strict";(self.webpackChunkcampuslife=self.webpackChunkcampuslife||[]).push([[352],{7352:(e,s,a)=>{a.r(s),a.d(s,{default:()=>r});var l=a(9379),i=a(5043),t=a(6263),n=a(3488),c=a(5200),d=a(579);function r(){var e;const[s,a]=(0,i.useState)([]),[r,o]=(0,i.useState)(!0),[m,h]=(0,i.useState)(null),[p,u]=(0,i.useState)(null),[x,v]=(0,i.useState)(!1),[j,g]=(0,i.useState)(null),[N,b]=(0,i.useState)("ads"),[y,f]=(0,i.useState)("image"),[A,k]=(0,i.useState)(!1),[C,D]=(0,i.useState)(null),[T,_]=(0,i.useState)(null),[w,S]=(0,i.useState)(null),[U,P]=(0,i.useState)(!1),[F,E]=(0,i.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]}),[L,B]=(0,i.useState)({title:"",adType:"image",placement:"homepage",imageUrl:"",videoUrl:"",videoDuration:0,videoThumbnailUrl:"",clickUrl:"",ctaText:"Learn More",ctaButtonColor:"#00a884",startDate:(new Date).toISOString().split("T")[0],endDate:"",countdownSeconds:10,isSkippable:!0,budget:"",dailyBudget:"",costPerClick:.5,minAge:0,maxAge:100,targetGender:"all",targetDevices:["mobile","tablet","desktop"],frequencyCap:0,conversionTracking:!1,conversionUrl:"",status:"draft",priority:0,abTestGroup:"control"}),O=async e=>{try{P(!0),console.log("\ud83d\udcc8 [Analytics] Fetching detailed metrics for ad:",e);const s=await t.A.get("".concat(n.H,"/api/admin/analytics/").concat(e));console.log("\u2705 [Analytics] Metrics received:",s.data.data),_(s.data.data)}catch(s){console.error("\u274c [Analytics] Failed to fetch analytics:",s)}finally{P(!1)}},G=async e=>{try{const s=await t.A.get("".concat(n.H,"/api/admin/analytics/").concat(e,"/engagement"),{params:{startDate:F.startDate,endDate:F.endDate}});S(s.data.data)}catch(s){console.error("Failed to fetch engagement:",s)}},I=(e,s)=>{E(a=>(0,l.A)((0,l.A)({},a),{},{[e]:s}))};(0,i.useEffect)(()=>{(async()=>{try{o(!0),console.log("\ud83d\udd04 [FETCH_ADS] Fetching ads from backend...");const e=await t.A.get("".concat(n.H,"/api/admin/ads/all"));console.log("\u2705 [FETCH_ADS] Response:",e.data),console.log("\u2705 [FETCH_ADS] Ads array:",e.data.data),a(e.data.data||[]),h(null)}catch(e){console.error("\u274c [FETCH_ADS] Error:",e),h("Failed to load ads. Make sure backend is running.")}finally{o(!1)}})()},[]),(0,i.useEffect)(()=>{C&&(O(C.id),G(C.id))},[C]);const R=e=>{const{name:s,value:a,type:i,checked:t}=e.target;B(e=>(0,l.A)((0,l.A)({},e),{},{[s]:"checkbox"===i?t:a})),h(null)},V=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image";const a=e.target.files[0];if(console.log("\ud83d\udce4 [UPLOAD] File selected:",{fileType:s,fileName:null===a||void 0===a?void 0:a.name,fileSize:null===a||void 0===a?void 0:a.size}),a)try{k(!0);const e=new FileReader;e.onload=async e=>{const i=e.target.result.split(",")[1];console.log("\ud83d\udcf8 [UPLOAD] Base64 ready, size:",i.length);try{const e="video"===s?"video/mp4":a.type;console.log("\ud83d\ude80 [UPLOAD] Sending to backend:",{fileType:s,mimeType:e});const n=await t.A.post("http://localhost:5000/api/upload/".concat(s),{fileName:a.name,fileData:i,mimeType:e});console.log("\u2705 [UPLOAD] Response:",n.data),console.log("\u2705 [UPLOAD] Response keys:",Object.keys(n.data)),console.log("\u2705 [UPLOAD] filePath value:",n.data.filePath),n.data.success?("video"===s?(B(e=>(0,l.A)((0,l.A)({},e),{},{videoUrl:n.data.filePath||n.data.imagePath,videoDuration:n.data.duration||0})),console.log("\u2705 [UPLOAD] Video URL set:",n.data.filePath||n.data.imagePath)):"thumbnail"===s?(B(e=>(0,l.A)((0,l.A)({},e),{},{videoThumbnailUrl:n.data.filePath||n.data.imagePath})),console.log("\u2705 [UPLOAD] Thumbnail URL set:",n.data.filePath||n.data.imagePath)):(B(e=>(0,l.A)((0,l.A)({},e),{},{imageUrl:n.data.filePath||n.data.imagePath})),console.log("\u2705 [UPLOAD] Image URL set:",n.data.filePath||n.data.imagePath)),u("".concat(s.charAt(0).toUpperCase()+s.slice(1)," uploaded successfully!")),setTimeout(()=>u(null),3e3)):console.error("\u274c [UPLOAD] Response not successful:",n.data)}catch(r){var n,c,d;console.error("\u274c [UPLOAD] Error:",r),console.error("\u274c [UPLOAD] Response:",null===(n=r.response)||void 0===n?void 0:n.data),h((null===(c=r.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.error)||"Failed to upload ".concat(s))}finally{k(!1)}},e.readAsDataURL(a)}catch(i){console.error("\u274c [FILE_READ] Error:",i),h("Failed to read file"),k(!1)}else console.warn("\u26a0\ufe0f [UPLOAD] No file selected")},q=()=>{B({title:"",adType:"image",placement:"homepage",imageUrl:"",videoUrl:"",videoDuration:0,videoThumbnailUrl:"",clickUrl:"",ctaText:"Learn More",ctaButtonColor:"#00a884",startDate:(new Date).toISOString().split("T")[0],endDate:"",countdownSeconds:10,isSkippable:!0,budget:"",dailyBudget:"",costPerClick:.5,minAge:0,maxAge:100,targetGender:"all",targetDevices:["mobile","tablet","desktop"],frequencyCap:0,conversionTracking:!1,conversionUrl:"",status:"draft",priority:0,abTestGroup:"control"}),f("image"),g(null),v(!1)};return r?(0,d.jsx)("div",{className:"ads-management",children:(0,d.jsx)("div",{className:"ads-loading",children:"Loading ads..."})}):(0,d.jsxs)("div",{className:"ads-management advanced",children:[(0,d.jsx)("div",{className:"ads-header-enhanced",children:(0,d.jsxs)("div",{className:"header-main",children:[(0,d.jsxs)("div",{className:"header-title-section",children:[(0,d.jsx)("h1",{children:"Ad Management"}),(0,d.jsx)("p",{children:"Create, edit, and manage advertisements with video support"})]}),(0,d.jsxs)("div",{className:"header-stats",children:[(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{className:"stat-label",children:"Total Ads"}),(0,d.jsx)("span",{className:"stat-value",children:s.length})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{className:"stat-label",children:"Active"}),(0,d.jsx)("span",{className:"stat-value",children:s.filter(e=>"active"===e.status).length})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{className:"stat-label",children:"Total Views"}),(0,d.jsx)("span",{className:"stat-value",children:s.reduce((e,s)=>e+(s.total_impressions||0),0).toLocaleString()})]})]})]})}),m&&(0,d.jsxs)("div",{className:"ads-error",children:[(0,d.jsx)("span",{children:m}),(0,d.jsx)("button",{onClick:()=>h(null),children:"\xd7"})]}),p&&(0,d.jsxs)("div",{className:"ads-success",children:[(0,d.jsx)("span",{children:p}),(0,d.jsx)("button",{onClick:()=>u(null),children:"\xd7"})]}),(0,d.jsx)("div",{className:"ads-tabs-container",children:(0,d.jsxs)("div",{className:"ads-tabs",children:[(0,d.jsxs)("button",{className:"tab ".concat("ads"===N?"active":""),onClick:()=>{b("ads"),v(!1)},children:[(0,d.jsx)("span",{className:"tab-icon",children:"\ud83d\udcca"}),(0,d.jsx)("span",{className:"tab-text",children:"Ads"}),(0,d.jsx)("span",{className:"tab-count",children:s.length})]}),(0,d.jsxs)("button",{className:"tab ".concat("analytics"===N?"active":""),onClick:()=>b("analytics"),children:[(0,d.jsx)("span",{className:"tab-icon",children:"\ud83d\udcc8"}),(0,d.jsx)("span",{className:"tab-text",children:"Analytics"}),(0,d.jsx)("span",{className:"tab-count",children:C?"1":"-"})]})]})}),!x&&"ads"===N&&(0,d.jsx)("div",{className:"header-actions",children:(0,d.jsxs)("button",{className:"btn-create-ad",onClick:()=>v(!0),children:[(0,d.jsx)(c.GGD,{size:18}),(0,d.jsx)("span",{children:"Create Ad"})]})}),x&&"ads"===N&&(0,d.jsxs)("div",{className:"ads-form-container",children:[(0,d.jsx)("h2",{children:j?"Edit Ad":"Create Ad"}),(0,d.jsxs)("div",{className:"ad-type-selection",children:[(0,d.jsxs)("button",{type:"button",className:"type-btn ".concat("image"===L.adType?"active":""),onClick:()=>{B((0,l.A)((0,l.A)({},L),{},{adType:"image"})),f("image")},children:[(0,d.jsx)(c.fZZ,{})," Image Ad"]}),(0,d.jsxs)("button",{type:"button",className:"type-btn ".concat("video"===L.adType?"active":""),onClick:()=>{B((0,l.A)((0,l.A)({},L),{},{adType:"video"})),f("video")},children:[(0,d.jsx)(c.pVQ,{})," Video Ad"]})]}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),L.title)if("image"!==L.adType||L.imageUrl)if("video"!==L.adType||L.videoUrl)try{const e={title:L.title,adType:L.adType,imageUrl:L.imageUrl||null,videoUrl:L.videoUrl||null,videoDuration:parseInt(L.videoDuration)||0,videoThumbnailUrl:L.videoThumbnailUrl||null,clickUrl:L.clickUrl||null,ctaText:L.ctaText,ctaButtonColor:L.ctaButtonColor,placement:L.placement,startDate:L.startDate,endDate:L.endDate||null,countdownSeconds:parseInt(L.countdownSeconds)||10,isSkippable:L.isSkippable,budget:parseFloat(L.budget)||0,dailyBudget:parseFloat(L.dailyBudget)||0,costPerClick:parseFloat(L.costPerClick)||.5,minAge:parseInt(L.minAge)||0,maxAge:parseInt(L.maxAge)||100,targetGender:L.targetGender,targetDevices:JSON.stringify(L.targetDevices),frequencyCap:parseInt(L.frequencyCap)||0,conversionTracking:L.conversionTracking,conversionUrl:L.conversionUrl||null,status:L.status,priority:parseInt(L.priority)||0,abTestGroup:L.abTestGroup};if(console.log("\ud83d\udce4 [SAVE_AD] FULL Payload:",JSON.stringify(e,null,2)),console.log("\ud83d\udce4 [SAVE_AD] FormData state:",L),console.log("\ud83d\udce4 [SAVE_AD] FormData.placement:",L.placement),j){const l=await t.A.put("".concat("https://somalux-q2bw.onrender.com","/api/admin/ads/").concat(j),e);a(s.map(e=>e.id===j?l.data.data:e)),u("Ad updated successfully!")}else{console.log("\ud83d\udce4 [SAVE_AD] POSTing to backend...");const l=await t.A.post("".concat("https://somalux-q2bw.onrender.com","/api/admin/ads"),e);console.log("\u2705 [SAVE_AD] Response:",l.data),a([...s,l.data.data]),u("Ad created successfully!")}q(),setTimeout(()=>u(null),3e3)}catch(c){var l,i,n;console.error("\u274c [SAVE_AD] Error:",c),console.error("\u274c [SAVE_AD] Error response:",null===(l=c.response)||void 0===l?void 0:l.data),console.error("\u274c [SAVE_AD] Full error:",c.response),h((null===(i=c.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.error)||"Failed to save ad")}else h("Please upload a video");else h("Please upload an image");else h("Please enter ad title")},className:"ads-form",children:[(0,d.jsxs)("fieldset",{className:"form-section",children:[(0,d.jsx)("legend",{children:"\ud83d\udccb Basic Information & Timing"}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Title *"}),(0,d.jsx)("input",{type:"text",name:"title",value:L.title,onChange:R,placeholder:"Ad title",required:!0,style:{minWidth:"180px"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Placement *"}),(0,d.jsxs)("select",{name:"placement",value:L.placement,onChange:R,required:!0,children:[(0,d.jsxs)("optgroup",{label:"Regular Placements",children:[(0,d.jsx)("option",{value:"homepage",children:"Homepage"}),(0,d.jsx)("option",{value:"books",children:"Books"}),(0,d.jsx)("option",{value:"authors",children:"Authors"}),(0,d.jsx)("option",{value:"categories",children:"Categories"}),(0,d.jsx)("option",{value:"pastpapers",children:"Past Papers"}),(0,d.jsx)("option",{value:"papers",children:"Papers"})]}),(0,d.jsxs)("optgroup",{label:"Grid Card Placements",children:[(0,d.jsx)("option",{value:"grid-books",children:"Grid - Books"}),(0,d.jsx)("option",{value:"grid-authors",children:"Grid - Authors"}),(0,d.jsx)("option",{value:"grid-categories",children:"Grid - Categories"}),(0,d.jsx)("option",{value:"grid-pastpapers",children:"Grid - Past Papers"}),(0,d.jsx)("option",{value:"grid-campus",children:"Grid - Campus/Universities"}),(0,d.jsx)("option",{value:"grid-papers",children:"Grid - Papers"})]})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Status"}),(0,d.jsxs)("select",{name:"status",value:L.status,onChange:R,children:[(0,d.jsx)("option",{value:"draft",children:"Draft"}),(0,d.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,d.jsx)("option",{value:"active",children:"Active"}),(0,d.jsx)("option",{value:"paused",children:"Paused"}),(0,d.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Priority"}),(0,d.jsx)("input",{type:"number",name:"priority",value:L.priority,onChange:R,min:"0",max:"100",placeholder:"0-100",style:{width:"80px"}})]})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Start Date"}),(0,d.jsx)("input",{type:"date",name:"startDate",value:L.startDate,onChange:R})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"End Date"}),(0,d.jsx)("input",{type:"date",name:"endDate",value:L.endDate,onChange:R})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Countdown (sec)"}),(0,d.jsx)("input",{type:"number",name:"countdownSeconds",value:L.countdownSeconds,onChange:R,min:"3",max:"60",style:{width:"80px"}})]}),(0,d.jsx)("div",{className:"form-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",name:"isSkippable",checked:L.isSkippable,onChange:R}),"Skippable"]})})]})]}),(0,d.jsxs)("fieldset",{className:"form-section",children:[(0,d.jsx)("legend",{children:"\ud83c\udfa8 Media & CTA"}),"image"===L.adType&&(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Image *"}),(0,d.jsxs)("div",{className:"upload-section",children:[(0,d.jsx)("input",{type:"file",accept:"image/*",onChange:e=>V(e,"image"),disabled:A,className:"file-input"}),A&&(0,d.jsx)("span",{className:"upload-status",children:"Uploading..."})]})]}),"video"===L.adType&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Video File *"}),(0,d.jsxs)("div",{className:"upload-section",children:[(0,d.jsx)("input",{type:"file",accept:"video/mp4",onChange:e=>V(e,"video"),disabled:A,className:"file-input"}),A&&(0,d.jsx)("span",{className:"upload-status",children:"Uploading..."})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Thumbnail Image"}),(0,d.jsx)("div",{className:"upload-section",children:(0,d.jsx)("input",{type:"file",accept:"image/*",onChange:e=>V(e,"thumbnail"),disabled:A,className:"file-input"})})]})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"CTA Text"}),(0,d.jsx)("input",{type:"text",name:"ctaText",value:L.ctaText,onChange:R,placeholder:"Learn More",style:{minWidth:"120px"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"CTA Color"}),(0,d.jsx)("input",{type:"color",name:"ctaButtonColor",value:L.ctaButtonColor,onChange:R,style:{height:"28px",width:"50px",cursor:"pointer"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Click URL"}),(0,d.jsx)("input",{type:"url",name:"clickUrl",value:L.clickUrl,onChange:R,placeholder:"https://example.com",style:{minWidth:"180px"}})]})]})]}),(0,d.jsxs)("fieldset",{className:"form-section",children:[(0,d.jsx)("legend",{children:"\ud83d\udcb0 Budget & Conversion"}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Total Budget"}),(0,d.jsx)("input",{type:"number",name:"budget",value:L.budget,onChange:R,step:"0.01",min:"0",placeholder:"0.00",style:{width:"90px"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Daily Budget"}),(0,d.jsx)("input",{type:"number",name:"dailyBudget",value:L.dailyBudget,onChange:R,step:"0.01",min:"0",placeholder:"0.00",style:{width:"90px"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Cost Per Click"}),(0,d.jsx)("input",{type:"number",name:"costPerClick",value:L.costPerClick,onChange:R,step:"0.01",min:"0",placeholder:"0.00",style:{width:"90px"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"A/B Test"}),(0,d.jsxs)("select",{name:"abTestGroup",value:L.abTestGroup,onChange:R,children:[(0,d.jsx)("option",{value:"control",children:"Control"}),(0,d.jsx)("option",{value:"variant_a",children:"Variant A"}),(0,d.jsx)("option",{value:"variant_b",children:"Variant B"}),(0,d.jsx)("option",{value:"variant_c",children:"Variant C"})]})]})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsx)("div",{className:"form-group",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("input",{type:"checkbox",name:"conversionTracking",checked:L.conversionTracking,onChange:R}),"Enable Conversion Tracking"]})}),L.conversionTracking&&(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Conversion URL"}),(0,d.jsx)("input",{type:"url",name:"conversionUrl",value:L.conversionUrl,onChange:R,placeholder:"https://analytics.example.com/pixel",style:{minWidth:"200px"}})]})]})]}),(0,d.jsxs)("fieldset",{className:"form-section",children:[(0,d.jsx)("legend",{children:"\ud83c\udfaf Targeting"}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Gender"}),(0,d.jsxs)("select",{name:"targetGender",value:L.targetGender,onChange:R,children:[(0,d.jsx)("option",{value:"all",children:"All"}),(0,d.jsx)("option",{value:"male",children:"Male"}),(0,d.jsx)("option",{value:"female",children:"Female"})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Min Age"}),(0,d.jsx)("input",{type:"number",name:"minAge",value:L.minAge,onChange:R,min:"0",max:"100",style:{width:"70px"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Max Age"}),(0,d.jsx)("input",{type:"number",name:"maxAge",value:L.maxAge,onChange:R,min:"0",max:"100",style:{width:"70px"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Frequency Cap"}),(0,d.jsx)("input",{type:"number",name:"frequencyCap",value:L.frequencyCap,onChange:R,min:"0",placeholder:"Unlimited",style:{width:"80px"}})]})]}),(0,d.jsx)("div",{className:"form-row",children:(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Target Devices"}),(0,d.jsx)("div",{className:"checkbox-group",children:["mobile","tablet","desktop"].map(e=>(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",checked:L.targetDevices.includes(e),onChange:()=>(e=>{B(s=>(0,l.A)((0,l.A)({},s),{},{targetDevices:s.targetDevices.includes(e)?s.targetDevices.filter(s=>s!==e):[...s.targetDevices,e]}))})(e)}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]})})]}),(0,d.jsxs)("div",{className:"form-actions",children:[(0,d.jsx)("button",{type:"submit",className:"btn-primary",children:j?"\u270f\ufe0f Update":"\u2795 Create Ad"}),(0,d.jsx)("button",{type:"button",className:"btn-secondary",onClick:q,children:"\u2715 Cancel"})]})]})]}),"ads"===N&&!x&&(0,d.jsx)("div",{className:"ads-list",children:0===s.length?(0,d.jsx)("div",{className:"no-ads",children:(0,d.jsx)("p",{children:"No ads yet. Create your first ad!"})}):(0,d.jsxs)("table",{className:"ads-table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Title"}),(0,d.jsx)("th",{children:"Type"}),(0,d.jsx)("th",{children:"Placement"}),(0,d.jsx)("th",{children:"Status"}),(0,d.jsx)("th",{children:"Impressions"}),(0,d.jsx)("th",{children:"Clicks"}),(0,d.jsx)("th",{children:"CTR"}),(0,d.jsx)("th",{children:"Start Date"}),(0,d.jsx)("th",{children:"End Date"}),(0,d.jsx)("th",{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:s.map(e=>{var l,i,n;return(0,d.jsxs)("tr",{className:"ad-row ".concat(e.status),children:[(0,d.jsx)("td",{className:"title-cell",children:(0,d.jsxs)("div",{className:"title-with-thumb",children:["video"===e.ad_type?(0,d.jsx)("div",{className:"ad-thumb video",children:"\ud83c\udfa5"}):(0,d.jsx)(d.Fragment,{children:e.image_url&&(0,d.jsx)("img",{src:e.image_url,alt:e.title,className:"ad-thumb"})}),(0,d.jsx)("span",{children:e.title})]})}),(0,d.jsx)("td",{className:"type-cell",children:(0,d.jsx)("span",{className:"badge-type",children:(null===(l=e.ad_type)||void 0===l?void 0:l.toUpperCase())||"IMAGE"})}),(0,d.jsx)("td",{children:e.placement}),(0,d.jsx)("td",{children:(0,d.jsx)("span",{className:"status-badge ".concat(e.status),children:(null===(i=e.status)||void 0===i?void 0:i.charAt(0).toUpperCase())+(null===(n=e.status)||void 0===n?void 0:n.slice(1))||"Active"})}),(0,d.jsx)("td",{className:"number",children:e.total_impressions||0}),(0,d.jsx)("td",{className:"number",children:e.total_clicks||0}),(0,d.jsxs)("td",{className:"number",children:[e.total_impressions>0?((e.total_clicks||0)/e.total_impressions*100).toFixed(2):0,"%"]}),(0,d.jsx)("td",{className:"date-cell",children:e.start_date?new Date(e.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"\u2014"}),(0,d.jsx)("td",{className:"date-cell",children:e.end_date?new Date(e.end_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"\u2014"}),(0,d.jsx)("td",{className:"actions-cell",children:(0,d.jsxs)("div",{className:"actions",children:[(0,d.jsx)("button",{className:"btn-small edit",onClick:()=>(e=>{f(e.ad_type||"image"),B({title:e.title,adType:e.ad_type||"image",imageUrl:e.image_url||"",videoUrl:e.video_url||"",videoDuration:e.video_duration||0,videoThumbnailUrl:e.video_thumbnail_url||"",clickUrl:e.click_url||"",ctaText:e.cta_text||"Learn More",ctaButtonColor:e.cta_button_color||"#00a884",placement:e.placement,startDate:e.start_date?e.start_date.split("T")[0]:(new Date).toISOString().split("T")[0],endDate:e.end_date?e.end_date.split("T")[0]:"",countdownSeconds:e.countdown_seconds||10,isSkippable:void 0===e.is_skippable||e.is_skippable,budget:e.budget||"",dailyBudget:e.daily_budget||"",costPerClick:e.cost_per_click||.5,minAge:e.min_age||0,maxAge:e.max_age||100,targetGender:e.target_gender||"all",targetDevices:e.target_devices?JSON.parse(e.target_devices):["mobile","tablet","desktop"],frequencyCap:e.frequency_cap||0,conversionTracking:e.conversion_tracking||!1,conversionUrl:e.conversion_url||"",status:e.status||"draft",priority:e.priority||0,abTestGroup:e.ab_test_group||"control"}),g(e.id),v(!0)})(e),title:"Edit ad",children:(0,d.jsx)(c.WXf,{})}),(0,d.jsx)("button",{className:"btn-small delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this ad?"))try{await t.A.delete("".concat("https://somalux-q2bw.onrender.com","/api/admin/ads/").concat(e)),a(s.filter(s=>s.id!==e)),u("Ad deleted successfully!"),setTimeout(()=>u(null),3e3)}catch(l){console.error("Failed to delete ad:",l),h("Failed to delete ad")}})(e.id),title:"Delete ad",children:(0,d.jsx)(c.IXo,{})})]})})]},e.id)})})]})}),"analytics"===N&&(0,d.jsxs)("div",{className:"analytics-section",children:[(0,d.jsxs)("div",{className:"analytics-header-section",children:[(0,d.jsx)("h3",{children:"\ufffd Ad Performance Analytics"}),(0,d.jsx)("p",{children:"Real-time tracking of impressions, clicks, and engagement metrics"})]}),(0,d.jsxs)("div",{className:"ads-performance-table-wrapper",children:[(0,d.jsx)("h2",{children:"All Ads Performance Overview"}),(0,d.jsxs)("div",{className:"ads-performance-table",children:[(0,d.jsxs)("div",{className:"table-header",children:[(0,d.jsx)("div",{className:"col-title",children:"Ad Title"}),(0,d.jsx)("div",{className:"col-placement",children:"Placement"}),(0,d.jsx)("div",{className:"col-impressions",children:"Impressions"}),(0,d.jsx)("div",{className:"col-clicks",children:"Clicks"}),(0,d.jsx)("div",{className:"col-dismisses",children:"Dismisses"}),(0,d.jsx)("div",{className:"col-ctr",children:"CTR %"}),(0,d.jsx)("div",{className:"col-engagement",children:"Engagement %"})]}),(0,d.jsx)("div",{className:"table-body",children:s.map(e=>(0,d.jsxs)("div",{className:"table-row ".concat((null===C||void 0===C?void 0:C.id)===e.id?"active":""),onClick:()=>{D(e),O(e.id),G(e.id)},children:[(0,d.jsx)("div",{className:"col-title",children:e.title}),(0,d.jsx)("div",{className:"col-placement",children:(0,d.jsx)("span",{className:"placement-badge",children:e.placement})}),(0,d.jsx)("div",{className:"col-impressions",children:e.total_impressions||0}),(0,d.jsx)("div",{className:"col-clicks",children:e.total_clicks||0}),(0,d.jsx)("div",{className:"col-dismisses",children:e.total_dismisses||0}),(0,d.jsxs)("div",{className:"col-ctr",children:[e.total_impressions>0?((e.total_clicks||0)/e.total_impressions*100).toFixed(1):0,"%"]}),(0,d.jsxs)("div",{className:"col-engagement",children:[e.total_impressions>0?((e.total_clicks+e.total_dismisses)/e.total_impressions*100).toFixed(1):0,"%"]})]},e.id))})]})]}),C&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"selected-ad-analytics-panel",children:[(0,d.jsxs)("h2",{children:["\ud83d\udcc8 Analytics Details: ",C.title]}),(0,d.jsxs)("div",{className:"key-metrics-grid",children:[(0,d.jsxs)("div",{className:"key-metric",children:[(0,d.jsx)("span",{className:"label",children:"Total Impressions"}),(0,d.jsx)("span",{className:"value",children:C.total_impressions||0})]}),(0,d.jsxs)("div",{className:"key-metric",children:[(0,d.jsx)("span",{className:"label",children:"Total Clicks"}),(0,d.jsx)("span",{className:"value highlight-blue",children:C.total_clicks||0})]}),(0,d.jsxs)("div",{className:"key-metric",children:[(0,d.jsx)("span",{className:"label",children:"Total Dismisses"}),(0,d.jsx)("span",{className:"value highlight-red",children:C.total_dismisses||0})]}),(0,d.jsxs)("div",{className:"key-metric",children:[(0,d.jsx)("span",{className:"label",children:"Click-Through Rate"}),(0,d.jsxs)("span",{className:"value highlight-green",children:[C.total_impressions>0?((C.total_clicks||0)/C.total_impressions*100).toFixed(1):0,"%"]})]}),(0,d.jsxs)("div",{className:"key-metric",children:[(0,d.jsx)("span",{className:"label",children:"Engagement Rate"}),(0,d.jsxs)("span",{className:"value highlight-purple",children:[C.total_impressions>0?((C.total_clicks+C.total_dismisses)/C.total_impressions*100).toFixed(1):0,"%"]})]}),(0,d.jsxs)("div",{className:"key-metric",children:[(0,d.jsx)("span",{className:"label",children:"Completion Rate"}),(0,d.jsxs)("span",{className:"value highlight-yellow",children:[C.total_impressions>0?((C.total_impressions-C.total_dismisses)/C.total_impressions*100).toFixed(1):0,"%"]})]})]}),(0,d.jsxs)("div",{className:"analytics-grid",children:[(0,d.jsxs)("div",{className:"ad-info-card",children:[(0,d.jsx)("h3",{children:"Ad Information"}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"label",children:"Status:"}),(0,d.jsx)("span",{className:"value status-badge ".concat(C.is_active?"active":"inactive"),children:C.is_active?"\u25cf Active":"\u25cb Inactive"})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"label",children:"Dismiss Rate:"}),(0,d.jsxs)("span",{className:"value",children:[C.dismissRate||0,"%"]})]}),(0,d.jsxs)("div",{className:"info-row",children:[(0,d.jsx)("span",{className:"label",children:"Avg View Duration:"}),(0,d.jsxs)("span",{className:"value",children:[(null===T||void 0===T||null===(e=T.metrics)||void 0===e?void 0:e.avgViewDuration)||0,"s"]})]})]}),(0,d.jsxs)("div",{className:"device-breakdown-card",children:[(0,d.jsx)("h3",{children:"Device Breakdown"}),((e,s,a,l,i,t)=>{const n=(null===T||void 0===T||null===(e=T.metrics)||void 0===e||null===(s=e.deviceBreakdown)||void 0===s?void 0:s.mobile)||0,c=(null===T||void 0===T||null===(a=T.metrics)||void 0===a||null===(l=a.deviceBreakdown)||void 0===l?void 0:l.tablet)||0,r=(null===T||void 0===T||null===(i=T.metrics)||void 0===i||null===(t=i.deviceBreakdown)||void 0===t?void 0:t.desktop)||0,o=n+c+r;return(0,d.jsxs)("div",{className:"device-rows",children:[(0,d.jsxs)("div",{className:"device-item",children:[(0,d.jsx)("span",{className:"device-name",children:"\ud83d\udcf1 Mobile"}),(0,d.jsx)("span",{className:"device-count",children:n}),(0,d.jsx)("div",{className:"device-bar-small",children:(0,d.jsx)("div",{className:"bar mobile",style:{width:o>0?n/o*100:"0%"}})}),(0,d.jsxs)("span",{className:"device-pct",children:[o>0?(n/o*100).toFixed(1):0,"%"]})]}),(0,d.jsxs)("div",{className:"device-item",children:[(0,d.jsx)("span",{className:"device-name",children:"\ud83d\udcf1 Tablet"}),(0,d.jsx)("span",{className:"device-count",children:c}),(0,d.jsx)("div",{className:"device-bar-small",children:(0,d.jsx)("div",{className:"bar tablet",style:{width:o>0?c/o*100:"0%"}})}),(0,d.jsxs)("span",{className:"device-pct",children:[o>0?(c/o*100).toFixed(1):0,"%"]})]}),(0,d.jsxs)("div",{className:"device-item",children:[(0,d.jsx)("span",{className:"device-name",children:"\ud83d\udda5\ufe0f Desktop"}),(0,d.jsx)("span",{className:"device-count",children:r}),(0,d.jsx)("div",{className:"device-bar-small",children:(0,d.jsx)("div",{className:"bar desktop",style:{width:o>0?r/o*100:"0%"}})}),(0,d.jsxs)("span",{className:"device-pct",children:[o>0?(r/o*100).toFixed(1):0,"%"]})]})]})})()]})]}),(0,d.jsxs)("div",{className:"engagement-section",children:[(0,d.jsxs)("div",{className:"engagement-header-row",children:[(0,d.jsx)("h3",{children:"Daily Engagement Timeline"}),(0,d.jsxs)("div",{className:"date-selector-inline",children:[(0,d.jsx)("input",{type:"date",value:F.startDate,onChange:e=>I("startDate",e.target.value),title:"Start Date"}),(0,d.jsx)("input",{type:"date",value:F.endDate,onChange:e=>I("endDate",e.target.value),title:"End Date"}),(0,d.jsx)("button",{className:"btn-refresh",onClick:()=>{C&&G(C.id)},children:"Refresh"})]})]}),w&&Object.keys(w).length>0?(0,d.jsxs)("div",{className:"engagement-table",children:[(0,d.jsxs)("div",{className:"table-header-row",children:[(0,d.jsx)("div",{className:"col date",children:"Date"}),(0,d.jsx)("div",{className:"col impressions",children:"Impressions"}),(0,d.jsx)("div",{className:"col clicks",children:"Clicks"}),(0,d.jsx)("div",{className:"col dismisses",children:"Dismisses"}),(0,d.jsx)("div",{className:"col avgTime",children:"Avg Time"})]}),(0,d.jsx)("div",{className:"table-body-rows",children:Object.entries(w).map(e=>{let[s,a]=e;return(0,d.jsxs)("div",{className:"table-row-item",children:[(0,d.jsx)("div",{className:"col date",children:s}),(0,d.jsx)("div",{className:"col impressions",children:a.impressions||0}),(0,d.jsx)("div",{className:"col clicks",children:a.clicks||0}),(0,d.jsx)("div",{className:"col dismisses",children:a.dismisses||0}),(0,d.jsxs)("div",{className:"col avgTime",children:[a.totalViewTime>0?(a.totalViewTime/Math.max(a.impressions,1)).toFixed(1):0,"s"]})]},s)})})]}):(0,d.jsx)("p",{className:"no-data",children:"No engagement data for selected date range"})]})]})})]})]})}}}]);
//# sourceMappingURL=352.73ff2ffe.chunk.js.map