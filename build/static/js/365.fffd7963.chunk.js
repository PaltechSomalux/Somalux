"use strict";(self.webpackChunkcampuslife=self.webpackChunkcampuslife||[]).push([[365],{2365:(e,s,i)=>{i.r(s),i.d(s,{default:()=>c});var t=i(9379),r=i(5043),l=i(3515),a=i(9101),o=i(5200),n=i(579);const c=e=>{let{userProfile:s}=e;const[i,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)([]),[p,h]=(0,r.useState)(0),[m,x]=(0,r.useState)(1),[j]=(0,r.useState)(10),[g,b]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),[y,_]=(0,r.useState)({}),[S,C]=(0,r.useState)({col:"created_at",dir:"desc"}),{confirm:w,showToast:P}=(0,a.v)(),k="admin"===(null===s||void 0===s?void 0:s.role)||["campuslives254@gmail.com","paltechsomalux@gmail.com"].includes(null===s||void 0===s?void 0:s.email),A=(0,r.useMemo)(()=>Math.max(1,Math.ceil(p/j)),[p,j]);(0,r.useEffect)(()=>{s&&(async()=>{c(!0);try{const e=(await(0,l._x)()||[]).map(e=>(0,t.A)((0,t.A)({},e),{},{subscription_tier:e.subscription_tier||"basic",subscription_started_at:e.subscription_started_at}));u(e),h(e.length)}catch(e){console.error("Failed to load profiles:",e),P({type:"error",message:"Failed to load users."})}finally{c(!1)}})()},[s]);const F=(0,r.useMemo)(()=>d.filter(e=>{const s=!g||e.email&&e.email.toLowerCase().includes(g.toLowerCase())||e.display_name&&e.display_name.toLowerCase().includes(g.toLowerCase()),i=!f||e.subscription_tier===f;return s&&i}),[d,g,f]),N=(0,r.useMemo)(()=>{const e=(m-1)*j;return F.slice(e,e+j)},[F,m,j]);return k?i?(0,n.jsx)("div",{style:{padding:20,color:"#8696a0"},children:"Loading..."}):(0,n.jsxs)("div",{style:{padding:12},children:[(0,n.jsxs)("div",{className:"section-header",style:{marginBottom:16},children:[(0,n.jsx)("h2",{style:{color:"#e9edef",fontSize:18,margin:0},children:"Verify Users"}),(0,n.jsx)("p",{style:{color:"#8696a0",fontSize:12,margin:"4px 0 0 0"},children:"Manage user subscription tiers and verification status"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:12,flexWrap:"wrap"},children:[(0,n.jsxs)("div",{style:{flex:1,minWidth:200,position:"relative"},children:[(0,n.jsx)(o.CKj,{style:{position:"absolute",left:8,top:8,color:"#8696a0"}}),(0,n.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:g,onChange:e=>b(e.target.value),className:"input",style:{paddingLeft:32,width:"100%",backgroundColor:"black",color:"white",fontSize:"13px"}})]}),(0,n.jsxs)("select",{className:"select",value:f,onChange:e=>v(e.target.value),style:{minWidth:150,width:"auto"},children:[(0,n.jsx)("option",{value:"",children:"All Tiers"}),(0,n.jsx)("option",{value:"basic",children:"Basic"}),(0,n.jsx)("option",{value:"premium",children:"Premium"}),(0,n.jsx)("option",{value:"premium_pro",children:"Premium Pro"})]})]}),(0,n.jsx)("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{className:"table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"User"}),(0,n.jsx)("th",{children:"Email"}),(0,n.jsx)("th",{children:"Current Tier"}),(0,n.jsx)("th",{children:"Subscription Date"}),(0,n.jsx)("th",{children:"Change Tier To"})]})}),(0,n.jsx)("tbody",{children:0===N.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:5,style:{textAlign:"center",color:"#8696a0",padding:20},children:"No users found"})}):N.map(e=>{var s;const i=(e=>{switch(e){case"premium":return{icon:(0,n.jsx)(o.YrT,{}),color:"#2196F3",label:"Premium",bgColor:"rgba(33, 150, 243, 0.1)"};case"premium_pro":return{icon:(0,n.jsx)(o.TPq,{}),color:"#FFD700",label:"Premium Pro",bgColor:"rgba(255, 215, 0, 0.1)"};default:return{icon:(0,n.jsx)(o.usP,{}),color:"#8696a0",label:"Basic",bgColor:"rgba(134, 150, 160, 0.05)"}}})(e.subscription_tier);return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.display_name||(null===(s=e.email)||void 0===s?void 0:s.split("@")[0])||"Unknown"}),(0,n.jsx)("td",{style:{fontSize:12,color:"#8696a0"},children:e.email}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",borderRadius:4,backgroundColor:i.bgColor,width:"fit-content"},children:[(0,n.jsx)("span",{style:{color:i.color,fontSize:14},children:i.icon}),(0,n.jsx)("span",{style:{color:i.color,fontSize:12,fontWeight:500},children:i.label})]})}),(0,n.jsx)("td",{style:{fontSize:12,color:"#8696a0"},children:e.subscription_started_at?new Date(e.subscription_started_at).toLocaleDateString():"\u2014"}),(0,n.jsx)("td",{children:(0,n.jsxs)("select",{value:e.subscription_tier,onChange:s=>(async(e,s)=>{_(s=>(0,t.A)((0,t.A)({},s),{},{[e]:!0}));try{const i=await(0,l.pP)(e,s);u(r=>r.map(r=>{var l,a;return r.id===e?(0,t.A)((0,t.A)({},r),{},{subscription_tier:(null===(l=i.data)||void 0===l?void 0:l.subscription_tier)||s,subscription_started_at:(null===(a=i.data)||void 0===a?void 0:a.subscription_started_at)||(new Date).toISOString()}):r})),P({type:"success",message:"User tier updated to ".concat(s)})}catch(i){console.error("Failed to update tier:",i),P({type:"error",message:"Failed to update user tier."})}finally{_(s=>(0,t.A)((0,t.A)({},s),{},{[e]:!1}))}})(e.id,s.target.value),disabled:y[e.id],className:"select",style:{fontSize:12},children:[(0,n.jsx)("option",{value:"basic",children:"Basic"}),(0,n.jsx)("option",{value:"premium",children:"Premium"}),(0,n.jsx)("option",{value:"premium_pro",children:"Premium Pro"})]})})]},e.id)})})]})}),(0,n.jsxs)("div",{className:"actions",style:{marginTop:10},children:[(0,n.jsx)("button",{className:"btn",disabled:m<=1,onClick:()=>x(e=>Math.max(1,e-1)),children:"Prev"}),(0,n.jsxs)("span",{style:{color:"#cfd8dc"},children:["Page ",m," of ",A]}),(0,n.jsx)("button",{className:"btn",disabled:m>=A,onClick:()=>x(e=>Math.min(A,e+1)),children:"Next"})]}),(0,n.jsxs)("div",{style:{marginTop:16,padding:12,backgroundColor:"rgba(0, 168, 132, 0.05)",border:"1px solid rgba(0, 168, 132, 0.2)",borderRadius:6,color:"#8696a0",fontSize:12},children:[(0,n.jsx)("strong",{style:{color:"#00a884"},children:"Tier Information:"}),(0,n.jsxs)("ul",{style:{margin:"8px 0 0 0",paddingLeft:16},children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Basic:"})," Default tier for all new users"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Premium:"})," ",(0,n.jsx)("span",{style:{color:"#2196F3"},children:"\u25cf"})," Blue verification - Enhanced features"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Premium Pro:"})," ",(0,n.jsx)("span",{style:{color:"#FFD700"},children:"\u25cf"})," Gold verification - All premium features"]})]})]})]}):(0,n.jsx)("div",{style:{padding:20,color:"#e9edef"},children:"You don't have permission to access this page."})}}}]);
//# sourceMappingURL=365.fffd7963.chunk.js.map