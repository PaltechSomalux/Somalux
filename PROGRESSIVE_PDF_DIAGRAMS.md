# Progressive PDF Loading - Visual Architecture & Flow Diagrams

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PASTPAPERS.JSX (MAIN PAGE)                 â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  State Management:                                          â”‚ â”‚
â”‚  â”‚  - papers (all loaded data)                                â”‚ â”‚
â”‚  â”‚  - displayedPapers (current page view)                     â”‚ â”‚
â”‚  â”‚  - loading (page loading state)                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                    â”‚
â”‚                              â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  useProgressivePDFLoader Hook:                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Input:  displayedPapers (array of papers)            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Config: {                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   maxConcurrentLoads: 1,      â† Load 1 at a time    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   delayBetweenLoads: 250,     â† 250ms delay         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   prioritizeVisible: true      â† Visible first       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ }                                                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Output:                                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - loadedPaperIds (Set)        â† Loaded papers        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - currentlyLoading (Set)      â† Loading now          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - markAsLoaded (function)     â† Mark complete        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - progress (0-100%)           â† Loading %            â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                    â”‚
â”‚                              â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  PAPER GRID COMPONENT:                                    â”‚ â”‚
â”‚  â”‚  Renders 31 papers in a grid layout                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                             â”‚                â”‚             â”‚
                              â–¼                             â–¼                â–¼             â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Paper 2   Paper 3   ...   Paper 31
          â”‚   PAPER 1 CARD                   â”‚
          â”‚                                  â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
          â”‚  â”‚ LazyPDFCover Component:      â”‚â”‚
          â”‚  â”‚                              â”‚â”‚
          â”‚  â”‚ State: "placeholder"         â”‚â”‚
          â”‚  â”‚ Shows: ğŸ“„ Loading preview... â”‚â”‚
          â”‚  â”‚                              â”‚â”‚
          â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
          â”‚  â”‚ â”‚ Intersection Observer  â”‚  â”‚â”‚
          â”‚  â”‚ â”‚                        â”‚  â”‚â”‚
          â”‚  â”‚ â”‚ Detects when visible   â”‚  â”‚â”‚
          â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
          â”‚  â”‚              â”‚               â”‚â”‚
          â”‚  â”‚              â–¼               â”‚â”‚
          â”‚  â”‚ Stagger Delay Timer:        â”‚â”‚
          â”‚  â”‚ index=0 â†’ 0ms delay        â”‚â”‚
          â”‚  â”‚ index=1 â†’ 150ms delay      â”‚â”‚
          â”‚  â”‚ index=2 â†’ 300ms delay      â”‚â”‚
          â”‚  â”‚ ...                        â”‚â”‚
          â”‚  â”‚              â”‚               â”‚â”‚
          â”‚  â”‚              â–¼               â”‚â”‚
          â”‚  â”‚ State: "loading"            â”‚â”‚
          â”‚  â”‚ Shows: â³ Rendering...       â”‚â”‚
          â”‚  â”‚                              â”‚â”‚
          â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
          â”‚  â”‚ â”‚ PDFCover Renders PDF   â”‚  â”‚â”‚
          â”‚  â”‚ â”‚                        â”‚  â”‚â”‚
          â”‚  â”‚ â”‚ (PDF Worker loads)     â”‚  â”‚â”‚
          â”‚  â”‚ â”‚ (Page 1 extracted)     â”‚  â”‚â”‚
          â”‚  â”‚ â”‚ (Canvas rendered)      â”‚  â”‚â”‚
          â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
          â”‚  â”‚              â”‚               â”‚â”‚
          â”‚  â”‚              â–¼               â”‚â”‚
          â”‚  â”‚ State: "loaded"             â”‚â”‚
          â”‚  â”‚ Shows: [ACTUAL PDF PREVIEW] â”‚â”‚
          â”‚  â”‚                              â”‚â”‚
          â”‚  â”‚ Callback: onLoadComplete() â”‚â”‚
          â”‚  â”‚ â†’ markAsLoaded(paperId)    â”‚â”‚
          â”‚  â”‚                              â”‚â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
          â”‚  â”‚ Course Title                   â”‚
          â”‚  â”‚ Faculty â€¢ Year â€¢ Semester      â”‚
          â”‚  â”‚ [Like] [Download] [Bookmark]  â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
USER VISITS PAGE
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Initial State       â”‚
â”‚                     â”‚
â”‚ papers: []          â”‚
â”‚ loading: true       â”‚
â”‚ displayedPapers: [] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch papers from API           â”‚
â”‚ (pageSize: 1000 to get all)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ setPapers([...31 papers])       â”‚
â”‚ loading: false                  â”‚
â”‚                                 â”‚
â”‚ [Display 31 placeholders]       â”‚
â”‚ âœ… PAGE FULLY RESPONSIVE        â”‚
â”‚ (No hang! <500ms)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ (Background, non-blocking)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useProgressivePDFLoader Hook Activates:                 â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Paper 1: Check if visible                         â”‚  â”‚
â”‚ â”‚ â”œâ”€ Is in viewport? YES                           â”‚  â”‚
â”‚ â”‚ â”œâ”€ Add to queue (priority)                       â”‚  â”‚
â”‚ â”‚ â””â”€ Start loading immediately                     â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                             â”‚
â”‚          â–¼ (Wait 250ms - delayBetweenLoads)            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Paper 2: Check if visible                         â”‚  â”‚
â”‚ â”‚ â”œâ”€ Is in viewport? YES                           â”‚  â”‚
â”‚ â”‚ â”œâ”€ Previous load done? YES                       â”‚  â”‚
â”‚ â”‚ â”œâ”€ Add to queue                                  â”‚  â”‚
â”‚ â”‚ â””â”€ Start loading                                 â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                             â”‚
â”‚          â–¼ (Wait 250ms)                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Paper 3...                                        â”‚  â”‚
â”‚ â”‚ (continues for all papers)                        â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Timeline Comparison

### BEFORE (Current - With Hangs)

```
Time  Action                                    CPU    Memory
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0ms   User loads page                           2%     50MB
 â”‚
 â”œâ”€ 50ms  Fetch papers from API starts        10%     60MB
 â”‚
 â”œâ”€100ms  Data received, PDF rendering starts  40%     80MB
 â”‚
 â”œâ”€500ms  31 PDFs rendering simultaneously    95%âš ï¸   250MBâš ï¸
 â”‚        PAGE FREEZES âŒ
 â”‚
 â”œâ”€1500ms CPU still maxed out                 90%     280MB
 â”‚
 â”œâ”€2500ms Still rendering PDFs                75%     290MB
 â”‚
 â”œâ”€3500ms Most PDFs rendered                  50%     300MB
 â”‚
 â””â”€5000ms All PDFs done, page finally usable  10%     290MB
          âœ… Page responsive (but 5s delay!)

Total Time to Interactive: 5 SECONDS âŒ
```

### AFTER (With Progressive Loading)

```
Time  Action                                    CPU    Memory
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0ms   User loads page                           2%     50MB
 â”‚
 â”œâ”€ 50ms  Fetch papers from API starts        10%     60MB
 â”‚
 â”œâ”€100ms  Data received, placeholders shown    8%     70MB
 â”‚
 â”œâ”€200ms  Page fully rendered & responsive     5%     75MB
 â”‚        USER CAN INTERACT âœ…
 â”‚
 â”œâ”€300ms  PDF 1 starts loading (background)   12%     80MB
 â”‚
 â”œâ”€500ms  PDF 1 loaded, PDF 2 starts          10%     85MB
 â”‚        (User scrolling, clicking, etc.)    
 â”‚
 â”œâ”€1000ms PDF 3 loads                          8%     90MB
 â”‚
 â”œâ”€2000ms PDF 6 loads                          7%     100MB
 â”‚        (More visible papers already loaded) âœ…
 â”‚
 â”œâ”€5000ms PDF 15 loads                         6%     110MB
 â”‚        (User likely finished viewing)
 â”‚
 â””â”€15000ms PDF 31 loads (if ever needed)       5%     120MB
           âœ… All loaded (but no lag at any point!)

Total Time to Interactive: <500ms âœ…
Peak CPU: 12% vs 95% before
Peak Memory: 120MB vs 300MB before
```

---

## State Transition Diagram for Each Paper

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LAZYPDFCOVER STATES                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚     CREATED       â”‚
                   â”‚ (Mounted)         â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   PLACEHOLDER     â”‚ â—„â”€â”€ Initial state
                   â”‚                   â”‚      Shows icon
                   â”‚  ğŸ“„ Loading...    â”‚      Non-blocking
                   â”‚                   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        (Intersection Observer fires)
        (Paper enters viewport)
                            â”‚
                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚    SCHEDULED      â”‚ â—„â”€â”€ Waiting for turn
                   â”‚                   â”‚      in queue
                   â”‚  â° {index*150}ms  â”‚
                   â”‚                   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              (Delay timer finishes)
                            â”‚
                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚    LOADING        â”‚ â—„â”€â”€ PDF rendering
                   â”‚                   â”‚      shows spinner
                   â”‚  â³ Rendering...   â”‚
                   â”‚                   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
            (PDFCover.onLoadSuccess)
                            â”‚
                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚     LOADED        â”‚ â—„â”€â”€ Preview visible
                   â”‚                   â”‚      Callback fired
                   â”‚ [PDF PREVIEW]     â”‚      markAsLoaded()
                   â”‚                   â”‚      Done!
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Memory Usage Graph

```
MEMORY USAGE OVER TIME

BEFORE (Current):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
300MB â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€ All PDFs loaded
      â”‚                                  â•±         (Memory stays high)
250MB â”‚                              â”Œâ”€â”€â”€
      â”‚                          â”Œâ”€â”€â”€
200MB â”‚                      â”Œâ”€â”€â”€
      â”‚                  â”Œâ”€â”€â”€
150MB â”‚              â”Œâ”€â”€â”€
      â”‚          â”Œâ”€â”€â”€                     âŒ High memory usage
100MB â”‚      â”Œâ”€â”€â”€
      â”‚  â”Œâ”€â”€â”€     PDF 1  PDF 2  PDF 3  PDF 4  ... PDF 31
 50MB â”‚â”€â”€â”˜   all rendering simultaneously
      â”‚      (CPU maxed out)
  0MB â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      0ms    500ms   1000ms   1500ms   2000ms


AFTER (With Progressive Loading):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
300MB â”‚
      â”‚
200MB â”‚
      â”‚
120MB â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Stays low!
      â”‚ â”‚               (Only 1-2 PDFs in memory)
      â”‚ â”‚
 80MB â”‚ â”‚ â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€ Slight steps
      â”‚ â”‚/                        as papers load
 50MB â”‚â”€â”¤                         âœ… Minimal memory
      â”‚ â”‚                         âœ… Smooth line
  0MB â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      0ms    5000ms    10000ms   15000ms   20000ms
           PDF 1   PDF 2   PDF 3 ... PDF 31
           (slow, sequential loading)
```

---

## CPU Usage Graph

```
CPU USAGE OVER TIME

BEFORE (Current):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
100%  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â”‚                â”Œâ”€â”€â”€â”˜              Spike!
 80%  â”‚            â”Œâ”€â”€â”˜
      â”‚        â”Œâ”€â”€â”˜                       âŒ High CPU usage
 60%  â”‚    â”Œâ”€â”€â”˜
      â”‚ â”Œâ”€â”€â”˜
 40%  â”‚â”€â”˜                                  Peak: 95%
      â”‚                                    Duration: 3-5s
 20%  â”‚
      â”‚
  0%  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      0ms    500ms   1000ms   1500ms   2000ms


AFTER (With Progressive Loading):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 30%  â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Smooth
 20%  â”‚ â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€â•±â”€ Slight bumps
      â”‚â•±    as each PDF renders             âœ… Constant
 12%  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   âœ… Predictable
      â”‚                                     Peak: 12%
  5%  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â”‚
  0%  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      0ms    5000ms    10000ms   15000ms   20000ms
         (smooth, constant usage)
```

---

## Stagger Delay Distribution

```
How papers load over time:

Paper  Index  Stagger Delay   Start Time    Load Duration   Complete
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1     0     0ms            0ms           ~300ms          300ms
  2     1     150ms          150ms         ~300ms          450ms
  3     2     300ms          300ms         ~300ms          600ms
  4     3     450ms          450ms         ~300ms          750ms
  5     4     600ms          600ms         ~300ms          900ms
  ...
 10     9    1350ms         1350ms         ~300ms         1650ms
 ...
 20    19    2850ms         2850ms         ~300ms         3150ms
 ...
 31    30    4500ms         4500ms         ~300ms         4800ms

Configuration:
- Index 0-20: delayBetweenLoads = 150ms (Increasing)
- Index 20+: Max delay capped at 3000ms (150ms * 20)
- Max total: All 31 papers loaded by ~5 seconds
- But user interactions start within 500ms! âœ…
```

---

## Queue Management State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PROGRESSIVE PDF LOADER STATE MACHINE              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚  IDLE STATE  â”‚
                     â”‚              â”‚
                     â”‚ Queue: []    â”‚
                     â”‚ Loading: 0   â”‚
                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                 (New paper added to queue)
                            â”‚
                            â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ ENQUEUE      â”‚
                     â”‚              â”‚
                     â”‚ Papers to    â”‚
                     â”‚ process: N   â”‚
                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              (Check concurrent limit)
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                     â”‚
         â–¼ (Space available)    â–¼ (Max reached)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PROCESS   â”‚           â”‚  WAIT STATE  â”‚
    â”‚            â”‚           â”‚              â”‚
    â”‚ Start      â”‚           â”‚ Waiting for  â”‚
    â”‚ loading    â”‚           â”‚ slot to free â”‚
    â”‚ Paper 1    â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â”‚
           â”‚                (Previous load done)
           â”‚                        â”‚
           â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ LOADING STATE                      â”‚
    â”‚                                    â”‚
    â”‚ Currently Loading: 1 paper         â”‚
    â”‚ In Queue: N-1 papers               â”‚
    â”‚                                    â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Paper 1:                       â”‚ â”‚
    â”‚ â”‚ â”œâ”€ Fetch PDF                   â”‚ â”‚
    â”‚ â”‚ â”œâ”€ Initialize worker           â”‚ â”‚
    â”‚ â”‚ â”œâ”€ Extract page 1              â”‚ â”‚
    â”‚ â”‚ â”œâ”€ Render to canvas            â”‚ â”‚
    â”‚ â”‚ â”œâ”€ Display preview âœ…          â”‚ â”‚
    â”‚ â”‚ â””â”€ Fire callback               â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                    â”‚
    â”‚ Duration: ~300ms                   â”‚
    â”‚                                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    (Load complete)
             â”‚
             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ COMPLETE    â”‚
        â”‚             â”‚
        â”‚ Paper 1:    â”‚
        â”‚ Loaded âœ…   â”‚
        â”‚             â”‚
        â”‚ Queue: N-1  â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    (Check if queue has more)
              â”‚
         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                          â”‚
         â–¼ (Yes, more in queue)    â–¼ (Empty)
    [Back to PROCESS]          [Back to IDLE]
    (Load Paper 2)             (Wait for user
                                or scroll)
```

---

## Network Speed Impact

```
NETWORK SPEED AFFECTS LOADING SPEED:

4G Connection:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Config: 2 concurrent, 100ms delay          â”‚
â”‚ Time to all loaded: ~8 seconds             â”‚
â”‚ Smooth, responsive                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3G Connection:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Config: 1 concurrent, 250ms delay          â”‚
â”‚ Time to all loaded: ~15 seconds            â”‚
â”‚ Still responsive, no lag                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2G Connection:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Config: 1 concurrent, 500ms delay          â”‚
â”‚ Time to all loaded: ~30 seconds            â”‚
â”‚ Very slow, but never blocks                â”‚
â”‚ User can still interact throughout         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Slow/No Network:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Config: 1 concurrent, 1000ms delay         â”‚
â”‚ PDFs load very slowly or not at all        â”‚
â”‚ But placeholders always show                â”‚
â”‚ User can still browse papers                â”‚
â”‚ (No preview, but functional)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Integration Points

```
APPLICATION ARCHITECTURE:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUPABASE (Database)                                â”‚
â”‚  - Stores all past papers                           â”‚
â”‚  - Returns 1000 papers on request                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PASTPAPERS.JSX (Main Component)                    â”‚
â”‚  - Fetches papers on mount                          â”‚
â”‚  - Manages pagination & filtering                   â”‚
â”‚  - Manages loading state                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€ useProgressivePDFLoader Hook â—€â”€â”€â”€â”€ NEW
                 â”‚  (Manages PDF loading queue)
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PAPERGRID.JSX (Paper Grid Display)                 â”‚
â”‚  - Renders 31 papers per page                       â”‚
â”‚  - Maps displayedPapers to cards                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€ LazyPDFCover â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NEW
                 â”‚  (Per paper, lazy loads preview)
                 â”‚  â”‚
                 â”‚  â””â”€ PDFCover (Updated)
                 â”‚     - Renders actual PDF
                 â”‚     - Added onLoadComplete callback
                 â”‚
                 â””â”€ Paper Card Content
                    - Title, faculty, stats
                    - Like/bookmark buttons
```

---

## Summary

All diagrams show how the system:
1. **Prevents hangs** by showing placeholders first
2. **Manages loading** one PDF at a time
3. **Stays responsive** throughout the entire process
4. **Gradually reveals** previews without impact

The progressive approach ensures users can interact immediately while PDFs load smoothly in the background.
